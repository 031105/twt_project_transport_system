{"ast":null,"code":"import _objectSpread from\"/Users/gohshunda/TWT-Transport-Booking/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Route as RouteIcon,Plus,Edit,Trash,Search,X,Check,Map,ArrowRight,Clock,DollarSign,Bus}from'lucide-react';import{getAllRoutes,getAllLocations,createRoute,updateRoute,deleteRoute}from'../../services/adminApi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RouteManagement=()=>{const[routes,setRoutes]=useState([]);const[filteredRoutes,setFilteredRoutes]=useState([]);const[locations,setLocations]=useState([]);const[loading,setLoading]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[showCreateModal,setShowCreateModal]=useState(false);const[showEditModal,setShowEditModal]=useState(false);const[currentRoute,setCurrentRoute]=useState(null);const[formData,setFormData]=useState({name:'',basePrice:'',routeType:'standard',stops:[{locationId:'',isOrigin:true,isDestination:false,arrivalOffsetMinutes:0,departureOffsetMinutes:10,priceFromOrigin:0},{locationId:'',isOrigin:false,isDestination:true,arrivalOffsetMinutes:120,departureOffsetMinutes:0,priceFromOrigin:0}]});// 加载所有路线\nconst loadRoutes=async()=>{setLoading(true);try{const response=await getAllRoutes();if(response.success){setRoutes(response.data);setFilteredRoutes(response.data);}else{alert('Failed to load routes: '+(response.error||'Unknown error'));}}catch(error){console.error('Error loading routes:',error);alert('An error occurred while loading routes');}finally{setLoading(false);}};// 加载所有站点\nconst loadLocations=async()=>{try{const response=await getAllLocations();if(response.success){setLocations(response.data);}else{alert('Failed to load locations: '+(response.error||'Unknown error'));}}catch(error){console.error('Error loading locations:',error);alert('An error occurred while loading locations');}};// 初始化加载\nuseEffect(()=>{loadRoutes();loadLocations();},[]);// 搜索过滤\nuseEffect(()=>{if(searchTerm.trim()===''){setFilteredRoutes(routes);}else{const term=searchTerm.toLowerCase();const filtered=routes.filter(route=>{var _route$originLocation,_route$originLocation2,_route$destinationLoc,_route$destinationLoc2;return route.name.toLowerCase().includes(term)||((_route$originLocation=route.originLocation)===null||_route$originLocation===void 0?void 0:(_route$originLocation2=_route$originLocation.name)===null||_route$originLocation2===void 0?void 0:_route$originLocation2.toLowerCase().includes(term))||((_route$destinationLoc=route.destinationLocation)===null||_route$destinationLoc===void 0?void 0:(_route$destinationLoc2=_route$destinationLoc.name)===null||_route$destinationLoc2===void 0?void 0:_route$destinationLoc2.toLowerCase().includes(term));});setFilteredRoutes(filtered);}},[searchTerm,routes]);// 表单处理\nconst handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};// 处理站点变更\nconst handleStopChange=(index,field,value)=>{setFormData(prev=>{const newStops=[...prev.stops];newStops[index]=_objectSpread(_objectSpread({},newStops[index]),{},{[field]:value});// 如果设置为起点，其他站点不能是起点\nif(field==='isOrigin'&&value===true){newStops.forEach((stop,i)=>{if(i!==index){newStops[i]=_objectSpread(_objectSpread({},newStops[i]),{},{isOrigin:false});}});}// 如果设置为终点，其他站点不能是终点\nif(field==='isDestination'&&value===true){newStops.forEach((stop,i)=>{if(i!==index){newStops[i]=_objectSpread(_objectSpread({},newStops[i]),{},{isDestination:false});}});}return _objectSpread(_objectSpread({},prev),{},{stops:newStops});});};// 添加新站点\nconst addStop=()=>{setFormData(prev=>{const newStops=[...prev.stops];// 在倒数第二个位置添加新站点（在终点站之前）\nconst lastIndex=newStops.length-1;const newStop={locationId:'',isOrigin:false,isDestination:false,arrivalOffsetMinutes:newStops[lastIndex].arrivalOffsetMinutes-30,departureOffsetMinutes:newStops[lastIndex].arrivalOffsetMinutes-20,priceFromOrigin:0};newStops.splice(lastIndex,0,newStop);return _objectSpread(_objectSpread({},prev),{},{stops:newStops});});};// 删除站点\nconst removeStop=index=>{setFormData(prev=>{const newStops=[...prev.stops];// 不能删除起点或终点\nif(newStops[index].isOrigin||newStops[index].isDestination){alert('Cannot remove origin or destination stops');return prev;}// 需要至少保留两个站点（起点和终点）\nif(newStops.length<=2){alert('Route must have at least two stops');return prev;}newStops.splice(index,1);return _objectSpread(_objectSpread({},prev),{},{stops:newStops});});};// 打开创建模态框\nconst openCreateModal=()=>{var _locations$,_locations$2;// 检查是否有足够的站点\nif(locations.length<2){alert('You need at least two locations to create a route. Please add locations first.');return;}setFormData({name:'',basePrice:'',routeType:'standard',stops:[{locationId:((_locations$=locations[0])===null||_locations$===void 0?void 0:_locations$.id)||'',isOrigin:true,isDestination:false,arrivalOffsetMinutes:0,departureOffsetMinutes:10,priceFromOrigin:0},{locationId:((_locations$2=locations[1])===null||_locations$2===void 0?void 0:_locations$2.id)||'',isOrigin:false,isDestination:true,arrivalOffsetMinutes:120,departureOffsetMinutes:0,priceFromOrigin:0}]});setShowCreateModal(true);};// 打开编辑模态框\nconst openEditModal=route=>{setCurrentRoute(route);// 准备表单数据\nconst formattedStops=route.stops.map(stop=>({id:stop.id,locationId:stop.locationId,isOrigin:stop.isOrigin,isDestination:stop.isDestination,arrivalOffsetMinutes:stop.arrivalOffsetMinutes,departureOffsetMinutes:stop.departureOffsetMinutes,priceFromOrigin:stop.priceFromOrigin}));setFormData({name:route.name||'',basePrice:route.basePrice||'',routeType:route.routeType||'standard',stops:formattedStops});setShowEditModal(true);};// 创建路线\nconst handleCreateRoute=async()=>{// 基本验证\nif(!formData.name||!formData.basePrice){alert('Name and base price are required fields');return;}// 验证站点\nconst hasOrigin=formData.stops.some(stop=>stop.isOrigin);const hasDestination=formData.stops.some(stop=>stop.isDestination);if(!hasOrigin||!hasDestination){alert('Route must have both origin and destination stops');return;}// 验证所有站点都有选择位置\nconst allStopsHaveLocation=formData.stops.every(stop=>stop.locationId);if(!allStopsHaveLocation){alert('All stops must have a location selected');return;}setLoading(true);try{const response=await createRoute(formData);if(response.success){setShowCreateModal(false);loadRoutes();alert('Route created successfully');}else{alert('Failed to create route: '+(response.error||'Unknown error'));}}catch(error){console.error('Error creating route:',error);alert('An error occurred while creating the route');}finally{setLoading(false);}};// 更新路线\nconst handleUpdateRoute=async()=>{if(!currentRoute||!currentRoute.id){alert('No route selected for update');return;}// 基本验证\nif(!formData.name||!formData.basePrice){alert('Name and base price are required fields');return;}// 验证站点\nconst hasOrigin=formData.stops.some(stop=>stop.isOrigin);const hasDestination=formData.stops.some(stop=>stop.isDestination);if(!hasOrigin||!hasDestination){alert('Route must have both origin and destination stops');return;}// 验证所有站点都有选择位置\nconst allStopsHaveLocation=formData.stops.every(stop=>stop.locationId);if(!allStopsHaveLocation){alert('All stops must have a location selected');return;}setLoading(true);try{const response=await updateRoute(currentRoute.id,formData);if(response.success){setShowEditModal(false);loadRoutes();alert('Route updated successfully');}else{alert('Failed to update route: '+(response.error||'Unknown error'));}}catch(error){console.error('Error updating route:',error);alert('An error occurred while updating the route');}finally{setLoading(false);}};// 删除路线\nconst handleDeleteRoute=async routeId=>{if(!window.confirm('Are you sure you want to delete this route? This action cannot be undone.')){return;}setLoading(true);try{const response=await deleteRoute(routeId);if(response.success){loadRoutes();alert('Route deleted successfully');}else{alert('Failed to delete route: '+(response.error||'Unknown error'));}}catch(error){console.error('Error deleting route:',error);alert('An error occurred while deleting the route');}finally{setLoading(false);}};// 格式化时间偏移为小时:分钟\nconst formatTimeOffset=minutes=>{const hours=Math.floor(minutes/60);const mins=minutes%60;return\"\".concat(hours.toString().padStart(2,'0'),\":\").concat(mins.toString().padStart(2,'0'));};// 获取站点名称\nconst getLocationName=locationId=>{const location=locations.find(loc=>loc.id===locationId);return location?location.name:'Unknown Location';};// 表单模态框\nconst RouteFormModal=_ref=>{let{isCreate,onClose,onSubmit}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:isCreate?'Create New Route':'Edit Route'}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Route Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",required:true,placeholder:\"e.g. KL Express\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Base Price (RM) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"basePrice\",value:formData.basePrice,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",required:true,placeholder:\"e.g. 35.50\",min:\"0\",step:\"0.01\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Route Type\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"routeType\",value:formData.routeType,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"standard\",children:\"Standard\"}),/*#__PURE__*/_jsx(\"option\",{value:\"express\",children:\"Express\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vip\",children:\"VIP\"}),/*#__PURE__*/_jsx(\"option\",{value:\"night\",children:\"Night Service\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-800\",children:\"Route Stops\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:addStop,className:\"text-sm flex items-center text-blue-600 hover:text-blue-800\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4 mr-1\"}),\"Add Intermediate Stop\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:formData.stops.map((stop,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full flex items-center justify-center mr-2 \".concat(stop.isOrigin?'bg-green-100 text-green-600':stop.isDestination?'bg-red-100 text-red-600':'bg-blue-100 text-blue-600'),children:index+1}),/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium\",children:stop.isOrigin?'Origin':stop.isDestination?'Destination':'Intermediate Stop'})]}),!stop.isOrigin&&!stop.isDestination&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeStop(index),className:\"text-red-500 hover:text-red-700\",children:/*#__PURE__*/_jsx(Trash,{className:\"w-4 h-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Location *\"}),/*#__PURE__*/_jsxs(\"select\",{value:stop.locationId,onChange:e=>handleStopChange(index,'locationId',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a location\"}),locations.map(location=>/*#__PURE__*/_jsxs(\"option\",{value:location.id,children:[location.name,\" (\",location.city,\")\"]},location.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"origin-\".concat(index),checked:stop.isOrigin,onChange:e=>handleStopChange(index,'isOrigin',e.target.checked),className:\"mr-2\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"origin-\".concat(index),className:\"text-sm\",children:\"Origin\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"destination-\".concat(index),checked:stop.isDestination,onChange:e=>handleStopChange(index,'isDestination',e.target.checked),className:\"mr-2\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"destination-\".concat(index),className:\"text-sm\",children:\"Destination\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Arrival Time Offset (minutes)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:stop.arrivalOffsetMinutes,onChange:e=>handleStopChange(index,'arrivalOffsetMinutes',parseInt(e.target.value)||0),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",min:\"0\",disabled:stop.isOrigin// 起点没有到达时间\n})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Departure Time Offset (minutes)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:stop.departureOffsetMinutes,onChange:e=>handleStopChange(index,'departureOffsetMinutes',parseInt(e.target.value)||0),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",min:\"0\",disabled:stop.isDestination// 终点没有出发时间\n})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Price from Origin (RM)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:stop.priceFromOrigin,onChange:e=>handleStopChange(index,'priceFromOrigin',parseFloat(e.target.value)||0),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",min:\"0\",step:\"0.01\",disabled:stop.isOrigin// 起点价格始终为0\n})]})]})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary flex-1 flex items-center justify-center\",onClick:onSubmit,disabled:loading,children:loading?'Processing...':isCreate?'Create Route':'Update Route'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary flex-1\",onClick:onClose,disabled:loading,children:\"Cancel\"})]})]})});};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Route Management\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-primary flex items-center\",onClick:openCreateModal,children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4 mr-2\"}),\"Add New Route\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search routes by name or location...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full px-4 py-2 pl-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(Search,{className:\"w-5 h-5 text-gray-400 absolute left-3 top-2.5\"}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSearchTerm(''),className:\"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),loading&&!filteredRoutes.length?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"Loading routes...\"})]}):filteredRoutes.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-10 border border-dashed border-gray-300 rounded-lg\",children:[/*#__PURE__*/_jsx(RouteIcon,{className:\"w-12 h-12 text-gray-400 mx-auto mb-3\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"No routes found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-1\",children:searchTerm?'Try a different search term':'Add your first route to get started'}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSearchTerm(''),className:\"mt-3 text-blue-600 hover:text-blue-800\",children:\"Clear search\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:filteredRoutes.map(route=>{var _route$originLocation3,_route$destinationLoc3,_route$stops;return/*#__PURE__*/_jsxs(\"div\",{className:\"card hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(Bus,{className:\"w-5 h-5 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:route.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 capitalize\",children:[route.routeType,\" Route\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>openEditModal(route),className:\"p-1 text-gray-500 hover:text-blue-600\",title:\"Edit route\",children:/*#__PURE__*/_jsx(Edit,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteRoute(route.id),className:\"p-1 text-gray-500 hover:text-red-600\",title:\"Delete route\",children:/*#__PURE__*/_jsx(Trash,{className:\"w-4 h-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(Map,{className:\"w-4 h-4 mr-2 text-gray-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:(_route$originLocation3=route.originLocation)===null||_route$originLocation3===void 0?void 0:_route$originLocation3.name}),/*#__PURE__*/_jsx(ArrowRight,{className:\"w-4 h-4 mx-2 text-gray-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:(_route$destinationLoc3=route.destinationLocation)===null||_route$destinationLoc3===void 0?void 0:_route$destinationLoc3.name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-4 h-4 mr-1 text-gray-500\"}),/*#__PURE__*/_jsx(\"span\",{children:((_route$stops=route.stops)===null||_route$stops===void 0?void 0:_route$stops.length)>2?\"\".concat(route.stops.length-2,\" intermediate stops\"):'Direct route'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(DollarSign,{className:\"w-4 h-4 mr-1 text-gray-500\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"RM \",parseFloat(route.basePrice).toFixed(2)]})]})]})]})]},route.id);})}),showCreateModal&&/*#__PURE__*/_jsx(RouteFormModal,{isCreate:true,onClose:()=>setShowCreateModal(false),onSubmit:handleCreateRoute}),showEditModal&&/*#__PURE__*/_jsx(RouteFormModal,{isCreate:false,onClose:()=>setShowEditModal(false),onSubmit:handleUpdateRoute})]});};export default RouteManagement;","map":{"version":3,"names":["React","useState","useEffect","Route","RouteIcon","Plus","Edit","Trash","Search","X","Check","Map","ArrowRight","Clock","DollarSign","Bus","getAllRoutes","getAllLocations","createRoute","updateRoute","deleteRoute","jsx","_jsx","jsxs","_jsxs","RouteManagement","routes","setRoutes","filteredRoutes","setFilteredRoutes","locations","setLocations","loading","setLoading","searchTerm","setSearchTerm","showCreateModal","setShowCreateModal","showEditModal","setShowEditModal","currentRoute","setCurrentRoute","formData","setFormData","name","basePrice","routeType","stops","locationId","isOrigin","isDestination","arrivalOffsetMinutes","departureOffsetMinutes","priceFromOrigin","loadRoutes","response","success","data","alert","error","console","loadLocations","trim","term","toLowerCase","filtered","filter","route","_route$originLocation","_route$originLocation2","_route$destinationLoc","_route$destinationLoc2","includes","originLocation","destinationLocation","handleInputChange","e","value","target","prev","_objectSpread","handleStopChange","index","field","newStops","forEach","stop","i","addStop","lastIndex","length","newStop","splice","removeStop","openCreateModal","_locations$","_locations$2","id","openEditModal","formattedStops","map","handleCreateRoute","hasOrigin","some","hasDestination","allStopsHaveLocation","every","handleUpdateRoute","handleDeleteRoute","routeId","window","confirm","formatTimeOffset","minutes","hours","Math","floor","mins","concat","toString","padStart","getLocationName","location","find","loc","RouteFormModal","_ref","isCreate","onClose","onSubmit","className","children","onClick","type","onChange","required","placeholder","min","step","city","checked","htmlFor","parseInt","disabled","parseFloat","_route$originLocation3","_route$destinationLoc3","_route$stops","title","toFixed"],"sources":["/Users/gohshunda/TWT-Transport-Booking/src/components/admin/RouteManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Route as RouteIcon, \n  Plus, \n  Edit, \n  Trash, \n  Search, \n  X, \n  Check, \n  Map,\n  ArrowRight,\n  Clock,\n  DollarSign,\n  Bus\n} from 'lucide-react';\nimport { \n  getAllRoutes, \n  getAllLocations,\n  createRoute, \n  updateRoute, \n  deleteRoute \n} from '../../services/adminApi';\n\nconst RouteManagement = () => {\n  const [routes, setRoutes] = useState([]);\n  const [filteredRoutes, setFilteredRoutes] = useState([]);\n  const [locations, setLocations] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [currentRoute, setCurrentRoute] = useState(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    basePrice: '',\n    routeType: 'standard',\n    stops: [\n      {\n        locationId: '',\n        isOrigin: true,\n        isDestination: false,\n        arrivalOffsetMinutes: 0,\n        departureOffsetMinutes: 10,\n        priceFromOrigin: 0\n      },\n      {\n        locationId: '',\n        isOrigin: false,\n        isDestination: true,\n        arrivalOffsetMinutes: 120,\n        departureOffsetMinutes: 0,\n        priceFromOrigin: 0\n      }\n    ]\n  });\n\n  // 加载所有路线\n  const loadRoutes = async () => {\n    setLoading(true);\n    try {\n      const response = await getAllRoutes();\n      if (response.success) {\n        setRoutes(response.data);\n        setFilteredRoutes(response.data);\n      } else {\n        alert('Failed to load routes: ' + (response.error || 'Unknown error'));\n      }\n    } catch (error) {\n      console.error('Error loading routes:', error);\n      alert('An error occurred while loading routes');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 加载所有站点\n  const loadLocations = async () => {\n    try {\n      const response = await getAllLocations();\n      if (response.success) {\n        setLocations(response.data);\n      } else {\n        alert('Failed to load locations: ' + (response.error || 'Unknown error'));\n      }\n    } catch (error) {\n      console.error('Error loading locations:', error);\n      alert('An error occurred while loading locations');\n    }\n  };\n\n  // 初始化加载\n  useEffect(() => {\n    loadRoutes();\n    loadLocations();\n  }, []);\n\n  // 搜索过滤\n  useEffect(() => {\n    if (searchTerm.trim() === '') {\n      setFilteredRoutes(routes);\n    } else {\n      const term = searchTerm.toLowerCase();\n      const filtered = routes.filter(\n        route => \n          route.name.toLowerCase().includes(term) || \n          route.originLocation?.name?.toLowerCase().includes(term) || \n          route.destinationLocation?.name?.toLowerCase().includes(term)\n      );\n      setFilteredRoutes(filtered);\n    }\n  }, [searchTerm, routes]);\n\n  // 表单处理\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  // 处理站点变更\n  const handleStopChange = (index, field, value) => {\n    setFormData(prev => {\n      const newStops = [...prev.stops];\n      newStops[index] = { ...newStops[index], [field]: value };\n      \n      // 如果设置为起点，其他站点不能是起点\n      if (field === 'isOrigin' && value === true) {\n        newStops.forEach((stop, i) => {\n          if (i !== index) {\n            newStops[i] = { ...newStops[i], isOrigin: false };\n          }\n        });\n      }\n      \n      // 如果设置为终点，其他站点不能是终点\n      if (field === 'isDestination' && value === true) {\n        newStops.forEach((stop, i) => {\n          if (i !== index) {\n            newStops[i] = { ...newStops[i], isDestination: false };\n          }\n        });\n      }\n      \n      return { ...prev, stops: newStops };\n    });\n  };\n\n  // 添加新站点\n  const addStop = () => {\n    setFormData(prev => {\n      const newStops = [...prev.stops];\n      // 在倒数第二个位置添加新站点（在终点站之前）\n      const lastIndex = newStops.length - 1;\n      const newStop = {\n        locationId: '',\n        isOrigin: false,\n        isDestination: false,\n        arrivalOffsetMinutes: newStops[lastIndex].arrivalOffsetMinutes - 30,\n        departureOffsetMinutes: newStops[lastIndex].arrivalOffsetMinutes - 20,\n        priceFromOrigin: 0\n      };\n      \n      newStops.splice(lastIndex, 0, newStop);\n      return { ...prev, stops: newStops };\n    });\n  };\n\n  // 删除站点\n  const removeStop = (index) => {\n    setFormData(prev => {\n      const newStops = [...prev.stops];\n      // 不能删除起点或终点\n      if (newStops[index].isOrigin || newStops[index].isDestination) {\n        alert('Cannot remove origin or destination stops');\n        return prev;\n      }\n      \n      // 需要至少保留两个站点（起点和终点）\n      if (newStops.length <= 2) {\n        alert('Route must have at least two stops');\n        return prev;\n      }\n      \n      newStops.splice(index, 1);\n      return { ...prev, stops: newStops };\n    });\n  };\n\n  // 打开创建模态框\n  const openCreateModal = () => {\n    // 检查是否有足够的站点\n    if (locations.length < 2) {\n      alert('You need at least two locations to create a route. Please add locations first.');\n      return;\n    }\n\n    setFormData({\n      name: '',\n      basePrice: '',\n      routeType: 'standard',\n      stops: [\n        {\n          locationId: locations[0]?.id || '',\n          isOrigin: true,\n          isDestination: false,\n          arrivalOffsetMinutes: 0,\n          departureOffsetMinutes: 10,\n          priceFromOrigin: 0\n        },\n        {\n          locationId: locations[1]?.id || '',\n          isOrigin: false,\n          isDestination: true,\n          arrivalOffsetMinutes: 120,\n          departureOffsetMinutes: 0,\n          priceFromOrigin: 0\n        }\n      ]\n    });\n    setShowCreateModal(true);\n  };\n\n  // 打开编辑模态框\n  const openEditModal = (route) => {\n    setCurrentRoute(route);\n    \n    // 准备表单数据\n    const formattedStops = route.stops.map(stop => ({\n      id: stop.id,\n      locationId: stop.locationId,\n      isOrigin: stop.isOrigin,\n      isDestination: stop.isDestination,\n      arrivalOffsetMinutes: stop.arrivalOffsetMinutes,\n      departureOffsetMinutes: stop.departureOffsetMinutes,\n      priceFromOrigin: stop.priceFromOrigin\n    }));\n    \n    setFormData({\n      name: route.name || '',\n      basePrice: route.basePrice || '',\n      routeType: route.routeType || 'standard',\n      stops: formattedStops\n    });\n    \n    setShowEditModal(true);\n  };\n\n  // 创建路线\n  const handleCreateRoute = async () => {\n    // 基本验证\n    if (!formData.name || !formData.basePrice) {\n      alert('Name and base price are required fields');\n      return;\n    }\n\n    // 验证站点\n    const hasOrigin = formData.stops.some(stop => stop.isOrigin);\n    const hasDestination = formData.stops.some(stop => stop.isDestination);\n    \n    if (!hasOrigin || !hasDestination) {\n      alert('Route must have both origin and destination stops');\n      return;\n    }\n\n    // 验证所有站点都有选择位置\n    const allStopsHaveLocation = formData.stops.every(stop => stop.locationId);\n    if (!allStopsHaveLocation) {\n      alert('All stops must have a location selected');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await createRoute(formData);\n      if (response.success) {\n        setShowCreateModal(false);\n        loadRoutes();\n        alert('Route created successfully');\n      } else {\n        alert('Failed to create route: ' + (response.error || 'Unknown error'));\n      }\n    } catch (error) {\n      console.error('Error creating route:', error);\n      alert('An error occurred while creating the route');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 更新路线\n  const handleUpdateRoute = async () => {\n    if (!currentRoute || !currentRoute.id) {\n      alert('No route selected for update');\n      return;\n    }\n\n    // 基本验证\n    if (!formData.name || !formData.basePrice) {\n      alert('Name and base price are required fields');\n      return;\n    }\n\n    // 验证站点\n    const hasOrigin = formData.stops.some(stop => stop.isOrigin);\n    const hasDestination = formData.stops.some(stop => stop.isDestination);\n    \n    if (!hasOrigin || !hasDestination) {\n      alert('Route must have both origin and destination stops');\n      return;\n    }\n\n    // 验证所有站点都有选择位置\n    const allStopsHaveLocation = formData.stops.every(stop => stop.locationId);\n    if (!allStopsHaveLocation) {\n      alert('All stops must have a location selected');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await updateRoute(currentRoute.id, formData);\n      if (response.success) {\n        setShowEditModal(false);\n        loadRoutes();\n        alert('Route updated successfully');\n      } else {\n        alert('Failed to update route: ' + (response.error || 'Unknown error'));\n      }\n    } catch (error) {\n      console.error('Error updating route:', error);\n      alert('An error occurred while updating the route');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 删除路线\n  const handleDeleteRoute = async (routeId) => {\n    if (!window.confirm('Are you sure you want to delete this route? This action cannot be undone.')) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await deleteRoute(routeId);\n      if (response.success) {\n        loadRoutes();\n        alert('Route deleted successfully');\n      } else {\n        alert('Failed to delete route: ' + (response.error || 'Unknown error'));\n      }\n    } catch (error) {\n      console.error('Error deleting route:', error);\n      alert('An error occurred while deleting the route');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 格式化时间偏移为小时:分钟\n  const formatTimeOffset = (minutes) => {\n    const hours = Math.floor(minutes / 60);\n    const mins = minutes % 60;\n    return `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}`;\n  };\n\n  // 获取站点名称\n  const getLocationName = (locationId) => {\n    const location = locations.find(loc => loc.id === locationId);\n    return location ? location.name : 'Unknown Location';\n  };\n\n  // 表单模态框\n  const RouteFormModal = ({ isCreate, onClose, onSubmit }) => (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className=\"text-lg font-semibold\">\n            {isCreate ? 'Create New Route' : 'Edit Route'}\n          </h3>\n          <button \n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Route Name *\n            </label>\n            <input\n              type=\"text\"\n              name=\"name\"\n              value={formData.name}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              required\n              placeholder=\"e.g. KL Express\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Base Price (RM) *\n            </label>\n            <input\n              type=\"number\"\n              name=\"basePrice\"\n              value={formData.basePrice}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              required\n              placeholder=\"e.g. 35.50\"\n              min=\"0\"\n              step=\"0.01\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Route Type\n            </label>\n            <select\n              name=\"routeType\"\n              value={formData.routeType}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              <option value=\"standard\">Standard</option>\n              <option value=\"express\">Express</option>\n              <option value=\"vip\">VIP</option>\n              <option value=\"night\">Night Service</option>\n            </select>\n          </div>\n        </div>\n\n        <div className=\"mb-4\">\n          <div className=\"flex justify-between items-center mb-2\">\n            <h4 className=\"font-medium text-gray-800\">Route Stops</h4>\n            <button\n              type=\"button\"\n              onClick={addStop}\n              className=\"text-sm flex items-center text-blue-600 hover:text-blue-800\"\n            >\n              <Plus className=\"w-4 h-4 mr-1\" />\n              Add Intermediate Stop\n            </button>\n          </div>\n\n          <div className=\"space-y-4\">\n            {formData.stops.map((stop, index) => (\n              <div key={index} className=\"border border-gray-200 rounded-lg p-4\">\n                <div className=\"flex justify-between items-center mb-3\">\n                  <div className=\"flex items-center\">\n                    <div className={`w-8 h-8 rounded-full flex items-center justify-center mr-2 ${\n                      stop.isOrigin ? 'bg-green-100 text-green-600' : \n                      stop.isDestination ? 'bg-red-100 text-red-600' : \n                      'bg-blue-100 text-blue-600'\n                    }`}>\n                      {index + 1}\n                    </div>\n                    <h5 className=\"font-medium\">\n                      {stop.isOrigin ? 'Origin' : stop.isDestination ? 'Destination' : 'Intermediate Stop'}\n                    </h5>\n                  </div>\n                  \n                  {!stop.isOrigin && !stop.isDestination && (\n                    <button\n                      type=\"button\"\n                      onClick={() => removeStop(index)}\n                      className=\"text-red-500 hover:text-red-700\"\n                    >\n                      <Trash className=\"w-4 h-4\" />\n                    </button>\n                  )}\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Location *\n                    </label>\n                    <select\n                      value={stop.locationId}\n                      onChange={(e) => handleStopChange(index, 'locationId', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      required\n                    >\n                      <option value=\"\">Select a location</option>\n                      {locations.map(location => (\n                        <option key={location.id} value={location.id}>\n                          {location.name} ({location.city})\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div className=\"flex space-x-4\">\n                    <div className=\"flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        id={`origin-${index}`}\n                        checked={stop.isOrigin}\n                        onChange={(e) => handleStopChange(index, 'isOrigin', e.target.checked)}\n                        className=\"mr-2\"\n                      />\n                      <label htmlFor={`origin-${index}`} className=\"text-sm\">Origin</label>\n                    </div>\n                    \n                    <div className=\"flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        id={`destination-${index}`}\n                        checked={stop.isDestination}\n                        onChange={(e) => handleStopChange(index, 'isDestination', e.target.checked)}\n                        className=\"mr-2\"\n                      />\n                      <label htmlFor={`destination-${index}`} className=\"text-sm\">Destination</label>\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Arrival Time Offset (minutes)\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={stop.arrivalOffsetMinutes}\n                      onChange={(e) => handleStopChange(index, 'arrivalOffsetMinutes', parseInt(e.target.value) || 0)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      min=\"0\"\n                      disabled={stop.isOrigin} // 起点没有到达时间\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Departure Time Offset (minutes)\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={stop.departureOffsetMinutes}\n                      onChange={(e) => handleStopChange(index, 'departureOffsetMinutes', parseInt(e.target.value) || 0)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      min=\"0\"\n                      disabled={stop.isDestination} // 终点没有出发时间\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Price from Origin (RM)\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={stop.priceFromOrigin}\n                      onChange={(e) => handleStopChange(index, 'priceFromOrigin', parseFloat(e.target.value) || 0)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      min=\"0\"\n                      step=\"0.01\"\n                      disabled={stop.isOrigin} // 起点价格始终为0\n                    />\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"flex space-x-3 mt-6\">\n          <button \n            className=\"btn-primary flex-1 flex items-center justify-center\"\n            onClick={onSubmit}\n            disabled={loading}\n          >\n            {loading ? 'Processing...' : (isCreate ? 'Create Route' : 'Update Route')}\n          </button>\n          <button \n            className=\"btn-secondary flex-1\"\n            onClick={onClose}\n            disabled={loading}\n          >\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Route Management</h2>\n        <button \n          className=\"btn-primary flex items-center\"\n          onClick={openCreateModal}\n        >\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Add New Route\n        </button>\n      </div>\n\n      {/* Search Bar */}\n      <div className=\"relative\">\n        <input\n          type=\"text\"\n          placeholder=\"Search routes by name or location...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className=\"w-full px-4 py-2 pl-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        />\n        <Search className=\"w-5 h-5 text-gray-400 absolute left-3 top-2.5\" />\n        {searchTerm && (\n          <button\n            onClick={() => setSearchTerm('')}\n            className=\"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        )}\n      </div>\n\n      {/* Routes List */}\n      {loading && !filteredRoutes.length ? (\n        <div className=\"text-center py-10\">\n          <div className=\"spinner\"></div>\n          <p className=\"mt-2 text-gray-600\">Loading routes...</p>\n        </div>\n      ) : filteredRoutes.length === 0 ? (\n        <div className=\"text-center py-10 border border-dashed border-gray-300 rounded-lg\">\n          <RouteIcon className=\"w-12 h-12 text-gray-400 mx-auto mb-3\" />\n          <h3 className=\"text-lg font-medium text-gray-900\">No routes found</h3>\n          <p className=\"text-gray-500 mt-1\">\n            {searchTerm ? 'Try a different search term' : 'Add your first route to get started'}\n          </p>\n          {searchTerm && (\n            <button\n              onClick={() => setSearchTerm('')}\n              className=\"mt-3 text-blue-600 hover:text-blue-800\"\n            >\n              Clear search\n            </button>\n          )}\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          {filteredRoutes.map(route => (\n            <div key={route.id} className=\"card hover:shadow-md transition-shadow\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\n                    <Bus className=\"w-5 h-5 text-blue-600\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-gray-900\">{route.name}</h3>\n                    <p className=\"text-sm text-gray-600 capitalize\">{route.routeType} Route</p>\n                  </div>\n                </div>\n                <div className=\"flex space-x-2\">\n                  <button \n                    onClick={() => openEditModal(route)}\n                    className=\"p-1 text-gray-500 hover:text-blue-600\"\n                    title=\"Edit route\"\n                  >\n                    <Edit className=\"w-4 h-4\" />\n                  </button>\n                  <button \n                    onClick={() => handleDeleteRoute(route.id)}\n                    className=\"p-1 text-gray-500 hover:text-red-600\"\n                    title=\"Delete route\"\n                  >\n                    <Trash className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n              \n              <div className=\"space-y-3\">\n                <div className=\"flex items-center text-sm\">\n                  <Map className=\"w-4 h-4 mr-2 text-gray-500\" />\n                  <div className=\"flex items-center\">\n                    <span className=\"font-medium\">{route.originLocation?.name}</span>\n                    <ArrowRight className=\"w-4 h-4 mx-2 text-gray-400\" />\n                    <span className=\"font-medium\">{route.destinationLocation?.name}</span>\n                  </div>\n                </div>\n                \n                <div className=\"flex flex-wrap gap-4 text-sm text-gray-600\">\n                  <div className=\"flex items-center\">\n                    <Clock className=\"w-4 h-4 mr-1 text-gray-500\" />\n                    <span>\n                      {route.stops?.length > 2 ? `${route.stops.length - 2} intermediate stops` : 'Direct route'}\n                    </span>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <DollarSign className=\"w-4 h-4 mr-1 text-gray-500\" />\n                    <span>RM {parseFloat(route.basePrice).toFixed(2)}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Create Modal */}\n      {showCreateModal && (\n        <RouteFormModal\n          isCreate={true}\n          onClose={() => setShowCreateModal(false)}\n          onSubmit={handleCreateRoute}\n        />\n      )}\n\n      {/* Edit Modal */}\n      {showEditModal && (\n        <RouteFormModal\n          isCreate={false}\n          onClose={() => setShowEditModal(false)}\n          onSubmit={handleUpdateRoute}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default RouteManagement; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}