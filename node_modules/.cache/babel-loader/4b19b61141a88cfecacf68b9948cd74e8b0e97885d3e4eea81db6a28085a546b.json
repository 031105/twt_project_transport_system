{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Star,ChevronRight,MapPin,Clock,Calendar}from'lucide-react';import{format}from'date-fns';import{getPopularTrips}from'../../services/adminApi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PopularTrips=_ref=>{let{onTripSelect}=_ref;const[loading,setLoading]=useState(true);const[trips,setTrips]=useState([]);const[error,setError]=useState(null);useEffect(()=>{const fetchPopularTrips=async()=>{setLoading(true);try{// 使用真实API获取热门行程数据\nconst response=await getPopularTrips();if(response.success){setTrips(response.data);}else{setError(response.error||'Failed to fetch popular trips');}setLoading(false);}catch(err){console.error('Error fetching popular trips:',err);setError('An error occurred while fetching popular trips');setLoading(false);}};fetchPopularTrips();},[]);const handleTripClick=trip=>{if(onTripSelect){onTripSelect(trip);}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"Loading popular trips...\"})]});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-red-500 mb-2\",children:[\"Error: \",error]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-blue-500 underline\",onClick:()=>window.location.reload(),children:\"Retry\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Popular Trips\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Showing most booked trips\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:trips.length>0?trips.map(trip=>/*#__PURE__*/_jsxs(\"div\",{className:\"card hover:shadow-md transition-shadow cursor-pointer\",onClick:()=>handleTripClick(trip),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-lg text-gray-900\",children:trip.route.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-1 text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsxs(\"span\",{children:[trip.origin,\" \\u2192 \",trip.destination]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full flex items-center\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-3 h-3 mr-1\"}),trip.bookingCount||0,\" bookings\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mt-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-500\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-4 h-4 mr-1\"}),trip.departureTime]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-500\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-1\"}),trip.date?format(new Date(trip.date),'dd MMM yyyy'):'N/A']}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:typeof trip.price==='number'?\"RM \".concat(trip.price.toFixed(2)):trip.price})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 flex justify-end\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"text-blue-600 text-sm flex items-center hover:text-blue-800\",children:[\"View Details\",/*#__PURE__*/_jsx(ChevronRight,{className:\"w-4 h-4 ml-1\"})]})})]},trip.id)):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-6\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No popular trips found\"})})})]});};export default PopularTrips;","map":{"version":3,"names":["React","useState","useEffect","Star","ChevronRight","MapPin","Clock","Calendar","format","getPopularTrips","jsx","_jsx","jsxs","_jsxs","PopularTrips","_ref","onTripSelect","loading","setLoading","trips","setTrips","error","setError","fetchPopularTrips","response","success","data","err","console","handleTripClick","trip","className","children","onClick","window","location","reload","length","map","route","name","origin","destination","bookingCount","departureTime","date","Date","price","concat","toFixed","id"],"sources":["/Users/gohshunda/TWT-Transport-Booking/src/components/admin/PopularTrips.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Star, ChevronRight, MapPin, Clock, Calendar } from 'lucide-react';\nimport { format } from 'date-fns';\nimport { getPopularTrips } from '../../services/adminApi';\n\nconst PopularTrips = ({ onTripSelect }) => {\n  const [loading, setLoading] = useState(true);\n  const [trips, setTrips] = useState([]);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchPopularTrips = async () => {\n      setLoading(true);\n      try {\n        // 使用真实API获取热门行程数据\n        const response = await getPopularTrips();\n        if (response.success) {\n          setTrips(response.data);\n        } else {\n          setError(response.error || 'Failed to fetch popular trips');\n        }\n        setLoading(false);\n      } catch (err) {\n        console.error('Error fetching popular trips:', err);\n        setError('An error occurred while fetching popular trips');\n        setLoading(false);\n      }\n    };\n\n    fetchPopularTrips();\n  }, []);\n\n  const handleTripClick = (trip) => {\n    if (onTripSelect) {\n      onTripSelect(trip);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"p-4 text-center\">\n        <div className=\"spinner\"></div>\n        <p className=\"mt-2 text-gray-600\">Loading popular trips...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-4 text-center\">\n        <div className=\"text-red-500 mb-2\">Error: {error}</div>\n        <button \n          className=\"text-blue-500 underline\"\n          onClick={() => window.location.reload()}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Popular Trips</h2>\n        <div className=\"text-sm text-gray-500\">\n          Showing most booked trips\n        </div>\n      </div>\n\n      <div className=\"space-y-4\">\n        {trips.length > 0 ? trips.map((trip) => (\n          <div \n            key={trip.id}\n            className=\"card hover:shadow-md transition-shadow cursor-pointer\"\n            onClick={() => handleTripClick(trip)}\n          >\n            <div className=\"flex justify-between items-start\">\n              <div>\n                <h3 className=\"font-semibold text-lg text-gray-900\">{trip.route.name}</h3>\n                <div className=\"flex items-center mt-1 text-sm text-gray-600\">\n                  <MapPin className=\"w-4 h-4 mr-1\" />\n                  <span>{trip.origin} → {trip.destination}</span>\n                </div>\n              </div>\n              <div className=\"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full flex items-center\">\n                <Star className=\"w-3 h-3 mr-1\" />\n                {trip.bookingCount || 0} bookings\n              </div>\n            </div>\n            \n            <div className=\"flex justify-between mt-4 text-sm\">\n              <div className=\"flex items-center text-gray-500\">\n                <Clock className=\"w-4 h-4 mr-1\" />\n                {trip.departureTime}\n              </div>\n              <div className=\"flex items-center text-gray-500\">\n                <Calendar className=\"w-4 h-4 mr-1\" />\n                {trip.date ? format(new Date(trip.date), 'dd MMM yyyy') : 'N/A'}\n              </div>\n              <div className=\"font-medium\">{typeof trip.price === 'number' ? `RM ${trip.price.toFixed(2)}` : trip.price}</div>\n            </div>\n            \n            <div className=\"mt-3 flex justify-end\">\n              <button className=\"text-blue-600 text-sm flex items-center hover:text-blue-800\">\n                View Details\n                <ChevronRight className=\"w-4 h-4 ml-1\" />\n              </button>\n            </div>\n          </div>\n        )) : (\n          <div className=\"text-center py-6\">\n            <p className=\"text-gray-500\">No popular trips found</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default PopularTrips; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}