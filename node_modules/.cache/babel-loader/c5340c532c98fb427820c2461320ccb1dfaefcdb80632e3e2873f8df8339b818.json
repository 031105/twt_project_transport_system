{"ast":null,"code":"var _jsxFileName = \"/Users/gohshunda/TWT-Transport-Booking/src/context/AppContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\n// import { mockUsers, mockApi } from '../data/mockData';\n\n// Initial state\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  // System Settings\n  systemDate: '2025-06-24',\n  // Fixed project date instead of real-time\n\n  // User & Auth\n  currentUser: null,\n  isAuthenticated: false,\n  isLoading: false,\n  // Search & Booking\n  searchParams: {\n    origin: '',\n    destination: '',\n    date: '2025-06-24'\n  },\n  searchResults: [],\n  selectedTrip: null,\n  selectedSeat: null,\n  // Locations\n  locations: [],\n  locationsLoading: false,\n  // Booking Process\n  bookingInProgress: null,\n  bookingHistory: [],\n  // UI State\n  sidebarOpen: false,\n  notifications: [],\n  // Error handling\n  error: null\n};\n\n// Action types\nexport const ACTIONS = {\n  // System actions\n  SET_SYSTEM_DATE: 'SET_SYSTEM_DATE',\n  // Auth actions\n  LOGIN_START: 'LOGIN_START',\n  LOGIN_SUCCESS: 'LOGIN_SUCCESS',\n  LOGIN_FAILURE: 'LOGIN_FAILURE',\n  LOGOUT: 'LOGOUT',\n  // Search actions\n  SET_SEARCH_PARAMS: 'SET_SEARCH_PARAMS',\n  SEARCH_TRIPS_START: 'SEARCH_TRIPS_START',\n  SEARCH_TRIPS_SUCCESS: 'SEARCH_TRIPS_SUCCESS',\n  SEARCH_TRIPS_FAILURE: 'SEARCH_TRIPS_FAILURE',\n  // Location actions\n  LOAD_LOCATIONS_START: 'LOAD_LOCATIONS_START',\n  LOAD_LOCATIONS_SUCCESS: 'LOAD_LOCATIONS_SUCCESS',\n  LOAD_LOCATIONS_FAILURE: 'LOAD_LOCATIONS_FAILURE',\n  // Booking actions\n  SELECT_TRIP: 'SELECT_TRIP',\n  SELECT_SEAT: 'SELECT_SEAT',\n  CREATE_BOOKING_START: 'CREATE_BOOKING_START',\n  CREATE_BOOKING_SUCCESS: 'CREATE_BOOKING_SUCCESS',\n  CREATE_BOOKING_FAILURE: 'CREATE_BOOKING_FAILURE',\n  LOAD_BOOKING_HISTORY: 'LOAD_BOOKING_HISTORY',\n  // UI actions\n  TOGGLE_SIDEBAR: 'TOGGLE_SIDEBAR',\n  ADD_NOTIFICATION: 'ADD_NOTIFICATION',\n  REMOVE_NOTIFICATION: 'REMOVE_NOTIFICATION',\n  CLEAR_ERROR: 'CLEAR_ERROR',\n  SET_ERROR: 'SET_ERROR'\n};\n\n// Reducer function\nconst appReducer = (state, action) => {\n  switch (action.type) {\n    case ACTIONS.SET_SYSTEM_DATE:\n      return {\n        ...state,\n        systemDate: action.payload\n      };\n    case ACTIONS.LOGIN_START:\n      return {\n        ...state,\n        isLoading: true,\n        error: null\n      };\n    case ACTIONS.LOGIN_SUCCESS:\n      return {\n        ...state,\n        currentUser: action.payload,\n        isAuthenticated: true,\n        isLoading: false,\n        error: null\n      };\n    case ACTIONS.LOGIN_FAILURE:\n      return {\n        ...state,\n        currentUser: null,\n        isAuthenticated: false,\n        isLoading: false,\n        error: action.payload\n      };\n    case ACTIONS.LOGOUT:\n      return {\n        ...state,\n        currentUser: null,\n        isAuthenticated: false,\n        bookingHistory: [],\n        bookingInProgress: null,\n        selectedTrip: null,\n        selectedSeat: null\n      };\n    case ACTIONS.SET_SEARCH_PARAMS:\n      return {\n        ...state,\n        searchParams: {\n          ...state.searchParams,\n          ...action.payload\n        }\n      };\n    case ACTIONS.SEARCH_TRIPS_START:\n      return {\n        ...state,\n        isLoading: true,\n        error: null\n      };\n    case ACTIONS.SEARCH_TRIPS_SUCCESS:\n      return {\n        ...state,\n        searchResults: action.payload,\n        isLoading: false,\n        error: null\n      };\n    case ACTIONS.SEARCH_TRIPS_FAILURE:\n      return {\n        ...state,\n        searchResults: [],\n        isLoading: false,\n        error: action.payload\n      };\n    case ACTIONS.LOAD_LOCATIONS_START:\n      return {\n        ...state,\n        locationsLoading: true,\n        error: null\n      };\n    case ACTIONS.LOAD_LOCATIONS_SUCCESS:\n      return {\n        ...state,\n        locations: action.payload,\n        locationsLoading: false,\n        error: null\n      };\n    case ACTIONS.LOAD_LOCATIONS_FAILURE:\n      return {\n        ...state,\n        locations: [],\n        locationsLoading: false,\n        error: action.payload\n      };\n    case ACTIONS.SELECT_TRIP:\n      return {\n        ...state,\n        selectedTrip: action.payload,\n        selectedSeat: null // Reset seat selection when trip changes\n      };\n    case ACTIONS.SELECT_SEAT:\n      return {\n        ...state,\n        selectedSeat: action.payload\n      };\n    case ACTIONS.CREATE_BOOKING_START:\n      return {\n        ...state,\n        isLoading: true,\n        error: null\n      };\n    case ACTIONS.CREATE_BOOKING_SUCCESS:\n      return {\n        ...state,\n        bookingInProgress: action.payload,\n        isLoading: false,\n        error: null\n      };\n    case ACTIONS.CREATE_BOOKING_FAILURE:\n      return {\n        ...state,\n        bookingInProgress: null,\n        isLoading: false,\n        error: action.payload\n      };\n    case ACTIONS.LOAD_BOOKING_HISTORY:\n      return {\n        ...state,\n        bookingHistory: action.payload\n      };\n    case ACTIONS.TOGGLE_SIDEBAR:\n      return {\n        ...state,\n        sidebarOpen: !state.sidebarOpen\n      };\n    case ACTIONS.ADD_NOTIFICATION:\n      return {\n        ...state,\n        notifications: [...state.notifications, {\n          id: Date.now(),\n          ...action.payload\n        }]\n      };\n    case ACTIONS.REMOVE_NOTIFICATION:\n      return {\n        ...state,\n        notifications: state.notifications.filter(n => n.id !== action.payload)\n      };\n    case ACTIONS.CLEAR_ERROR:\n      return {\n        ...state,\n        error: null\n      };\n    case ACTIONS.SET_ERROR:\n      return {\n        ...state,\n        error: action.payload\n      };\n    default:\n      return state;\n  }\n};\n\n// Create context\nconst AppContext = /*#__PURE__*/createContext();\n\n// Provider component\nexport const AppProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(appReducer, initialState);\n\n  // Auto-login from localStorage on app start\n  useEffect(() => {\n    const savedUser = localStorage.getItem('currentUser');\n    if (savedUser) {\n      try {\n        const user = JSON.parse(savedUser);\n        dispatch({\n          type: ACTIONS.LOGIN_SUCCESS,\n          payload: user\n        });\n      } catch (error) {\n        localStorage.removeItem('currentUser');\n      }\n    }\n  }, []);\n\n  // Load locations on app start\n  useEffect(() => {\n    const loadInitialLocations = async () => {\n      try {\n        const response = await fetch('http://localhost:5001/api/locations');\n        if (response.ok) {\n          const data = await response.json();\n          dispatch({\n            type: ACTIONS.LOAD_LOCATIONS_SUCCESS,\n            payload: data.data || []\n          });\n        }\n      } catch (error) {\n        console.error('Failed to load locations:', error);\n      }\n    };\n    loadInitialLocations();\n  }, []);\n\n  // Load user bookings when user logs in\n  useEffect(() => {\n    if (state.isAuthenticated && state.currentUser) {\n      loadBookingHistory();\n    }\n  }, [state.isAuthenticated, state.currentUser]);\n\n  // Action creators\n  const login = async (email, password) => {\n    dispatch({\n      type: ACTIONS.LOGIN_START\n    });\n    try {\n      const response = await fetch('http://localhost:5001/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!response.ok) {\n        var _errorData$error;\n        const errorData = await response.json();\n        throw new Error(((_errorData$error = errorData.error) === null || _errorData$error === void 0 ? void 0 : _errorData$error.message) || 'Login failed');\n      }\n      const data = await response.json();\n      const user = data.data.user;\n      const token = data.data.tokens.accessToken;\n\n      // Save user and token to localStorage\n      localStorage.setItem('currentUser', JSON.stringify(user));\n      localStorage.setItem('accessToken', token);\n      localStorage.setItem('refreshToken', data.data.tokens.refreshToken);\n      dispatch({\n        type: ACTIONS.LOGIN_SUCCESS,\n        payload: user\n      });\n      addNotification({\n        type: 'success',\n        message: `Welcome back, ${user.firstName || user.email}!`\n      });\n      return user;\n    } catch (error) {\n      dispatch({\n        type: ACTIONS.LOGIN_FAILURE,\n        payload: error.message\n      });\n      addNotification({\n        type: 'error',\n        message: error.message\n      });\n      throw error;\n    }\n  };\n  const logout = () => {\n    localStorage.removeItem('currentUser');\n    localStorage.removeItem('accessToken');\n    localStorage.removeItem('refreshToken');\n    dispatch({\n      type: ACTIONS.LOGOUT\n    });\n    addNotification({\n      type: 'success',\n      message: 'You have been logged out successfully'\n    });\n  };\n  const setSystemDate = date => {\n    dispatch({\n      type: ACTIONS.SET_SYSTEM_DATE,\n      payload: date\n    });\n  };\n  const searchTrips = async searchParams => {\n    dispatch({\n      type: ACTIONS.SEARCH_TRIPS_START\n    });\n    try {\n      const token = localStorage.getItem('accessToken');\n      const query = new URLSearchParams(searchParams).toString();\n      const response = await fetch(`http://localhost:5001/api/trips?${query}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        var _errorData$error2;\n        const errorData = await response.json();\n        throw new Error(((_errorData$error2 = errorData.error) === null || _errorData$error2 === void 0 ? void 0 : _errorData$error2.message) || 'Failed to search trips');\n      }\n      const data = await response.json();\n      const results = data.data || [];\n      dispatch({\n        type: ACTIONS.SEARCH_TRIPS_SUCCESS,\n        payload: results\n      });\n      dispatch({\n        type: ACTIONS.SET_SEARCH_PARAMS,\n        payload: searchParams\n      });\n      return results;\n    } catch (error) {\n      dispatch({\n        type: ACTIONS.SEARCH_TRIPS_FAILURE,\n        payload: error.message\n      });\n      throw error;\n    }\n  };\n  const loadAllTrips = async () => {\n    dispatch({\n      type: ACTIONS.SEARCH_TRIPS_START\n    });\n    try {\n      const token = localStorage.getItem('accessToken');\n      const response = await fetch('http://localhost:5001/api/trips', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        var _errorData$error3;\n        const errorData = await response.json();\n        throw new Error(((_errorData$error3 = errorData.error) === null || _errorData$error3 === void 0 ? void 0 : _errorData$error3.message) || 'Failed to load trips');\n      }\n      const data = await response.json();\n      const results = data.data || [];\n\n      // Process the trips to ensure next_departure is available\n      const processedResults = results.map(trip => {\n        return {\n          ...trip,\n          next_departure: trip.departureDatetime,\n          route: {\n            ...trip.route,\n            next_departure: trip.departureDatetime\n          }\n        };\n      });\n      dispatch({\n        type: ACTIONS.SEARCH_TRIPS_SUCCESS,\n        payload: processedResults\n      });\n      dispatch({\n        type: ACTIONS.SET_SEARCH_PARAMS,\n        payload: {\n          origin: '',\n          destination: '',\n          date: ''\n        }\n      });\n      return processedResults;\n    } catch (error) {\n      dispatch({\n        type: ACTIONS.SEARCH_TRIPS_FAILURE,\n        payload: error.message\n      });\n      throw error;\n    }\n  };\n  const loadLocations = async () => {\n    dispatch({\n      type: ACTIONS.LOAD_LOCATIONS_START\n    });\n    try {\n      const token = localStorage.getItem('accessToken');\n      const response = await fetch('http://localhost:5001/api/locations', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        var _errorData$error4;\n        const errorData = await response.json();\n        throw new Error(((_errorData$error4 = errorData.error) === null || _errorData$error4 === void 0 ? void 0 : _errorData$error4.message) || 'Failed to load locations');\n      }\n      const data = await response.json();\n      const locations = data.data || [];\n      dispatch({\n        type: ACTIONS.LOAD_LOCATIONS_SUCCESS,\n        payload: locations\n      });\n      return locations;\n    } catch (error) {\n      dispatch({\n        type: ACTIONS.LOAD_LOCATIONS_FAILURE,\n        payload: error.message\n      });\n      throw error;\n    }\n  };\n  const selectTrip = async trip => {\n    try {\n      const token = localStorage.getItem('accessToken');\n      const response = await fetch(`http://localhost:5001/api/trips/${trip.id}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        var _errorData$error5;\n        const errorData = await response.json();\n        throw new Error(((_errorData$error5 = errorData.error) === null || _errorData$error5 === void 0 ? void 0 : _errorData$error5.message) || 'Failed to load trip details');\n      }\n      const data = await response.json();\n      const tripDetails = data.data;\n      dispatch({\n        type: ACTIONS.SELECT_TRIP,\n        payload: tripDetails\n      });\n      return tripDetails;\n    } catch (error) {\n      addNotification({\n        type: 'error',\n        message: 'Failed to load trip details'\n      });\n      throw error;\n    }\n  };\n  const selectSeat = seat => {\n    dispatch({\n      type: ACTIONS.SELECT_SEAT,\n      payload: seat\n    });\n  };\n  const createBooking = async bookingData => {\n    dispatch({\n      type: ACTIONS.CREATE_BOOKING_START\n    });\n    try {\n      const token = localStorage.getItem('accessToken');\n      const response = await fetch('http://localhost:5001/api/bookings', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(bookingData)\n      });\n      if (!response.ok) {\n        var _errorData$error6;\n        const errorData = await response.json();\n        throw new Error(((_errorData$error6 = errorData.error) === null || _errorData$error6 === void 0 ? void 0 : _errorData$error6.message) || 'Failed to create booking');\n      }\n      const data = await response.json();\n      const booking = data.data;\n      dispatch({\n        type: ACTIONS.CREATE_BOOKING_SUCCESS,\n        payload: booking\n      });\n      addNotification({\n        type: 'success',\n        message: `Booking created successfully! Reference: ${booking.booking_reference || booking.id}`\n      });\n      return booking;\n    } catch (error) {\n      dispatch({\n        type: ACTIONS.CREATE_BOOKING_FAILURE,\n        payload: error.message\n      });\n      addNotification({\n        type: 'error',\n        message: 'Failed to create booking. Please try again.'\n      });\n      throw error;\n    }\n  };\n  const processPayment = async paymentData => {\n    try {\n      const token = localStorage.getItem('accessToken');\n      const response = await fetch('http://localhost:5001/api/payments', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(paymentData)\n      });\n      if (!response.ok) {\n        var _errorData$error7;\n        const errorData = await response.json();\n        throw new Error(((_errorData$error7 = errorData.error) === null || _errorData$error7 === void 0 ? void 0 : _errorData$error7.message) || 'Payment failed');\n      }\n      const data = await response.json();\n      const payment = data.data;\n      if (payment.status === 'completed') {\n        addNotification({\n          type: 'success',\n          message: 'Payment completed successfully!'\n        });\n        loadBookingHistory();\n      } else {\n        addNotification({\n          type: 'error',\n          message: payment.failureReason || 'Payment failed. Please try again.'\n        });\n      }\n      return payment;\n    } catch (error) {\n      addNotification({\n        type: 'error',\n        message: 'Payment processing failed. Please try again.'\n      });\n      throw error;\n    }\n  };\n  const loadBookingHistory = async () => {\n    if (!state.currentUser) {\n      console.log('No current user, skipping booking history load');\n      return;\n    }\n    try {\n      const token = localStorage.getItem('accessToken');\n      console.log('Loading booking history for user:', state.currentUser.id);\n      console.log('Token exists:', !!token);\n      if (!token) {\n        console.log('No access token found');\n        return;\n      }\n      const response = await fetch(`http://localhost:5001/api/bookings/user/${state.currentUser.id}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        var _errorData$error8;\n        console.log('Booking history request failed:', response.status, response.statusText);\n        const errorData = await response.json();\n        throw new Error(((_errorData$error8 = errorData.error) === null || _errorData$error8 === void 0 ? void 0 : _errorData$error8.message) || 'Failed to load booking history');\n      }\n      const data = await response.json();\n      const bookings = data.data || [];\n      console.log('Loaded bookings:', bookings.length);\n      dispatch({\n        type: ACTIONS.LOAD_BOOKING_HISTORY,\n        payload: bookings\n      });\n    } catch (error) {\n      console.error('Failed to load booking history:', error);\n    }\n  };\n  const addNotification = notification => {\n    const notificationWithId = {\n      id: Date.now(),\n      ...notification\n    };\n    dispatch({\n      type: ACTIONS.ADD_NOTIFICATION,\n      payload: notificationWithId\n    });\n\n    // Auto-remove notification after 5 seconds\n    setTimeout(() => {\n      dispatch({\n        type: ACTIONS.REMOVE_NOTIFICATION,\n        payload: notificationWithId.id\n      });\n    }, 5000);\n  };\n  const removeNotification = id => {\n    dispatch({\n      type: ACTIONS.REMOVE_NOTIFICATION,\n      payload: id\n    });\n  };\n  const clearError = () => {\n    dispatch({\n      type: ACTIONS.CLEAR_ERROR\n    });\n  };\n  const toggleSidebar = () => {\n    dispatch({\n      type: ACTIONS.TOGGLE_SIDEBAR\n    });\n  };\n\n  // Context value\n  const contextValue = {\n    // State\n    ...state,\n    // Actions\n    login,\n    logout,\n    setSystemDate,\n    searchTrips,\n    loadAllTrips,\n    loadLocations,\n    selectTrip,\n    selectSeat,\n    createBooking,\n    processPayment,\n    loadBookingHistory,\n    addNotification,\n    removeNotification,\n    clearError,\n    toggleSidebar\n  };\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 614,\n    columnNumber: 5\n  }, this);\n};\n\n// Custom hook to use context\n_s(AppProvider, \"s3jE+e7wLGXN/2uWqdAG2uRSMfA=\");\n_c = AppProvider;\nexport const useApp = () => {\n  _s2();\n  const context = useContext(AppContext);\n  if (!context) {\n    throw new Error('useApp must be used within an AppProvider');\n  }\n  return context;\n};\n_s2(useApp, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport default AppContext;\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","jsxDEV","_jsxDEV","initialState","systemDate","currentUser","isAuthenticated","isLoading","searchParams","origin","destination","date","searchResults","selectedTrip","selectedSeat","locations","locationsLoading","bookingInProgress","bookingHistory","sidebarOpen","notifications","error","ACTIONS","SET_SYSTEM_DATE","LOGIN_START","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT","SET_SEARCH_PARAMS","SEARCH_TRIPS_START","SEARCH_TRIPS_SUCCESS","SEARCH_TRIPS_FAILURE","LOAD_LOCATIONS_START","LOAD_LOCATIONS_SUCCESS","LOAD_LOCATIONS_FAILURE","SELECT_TRIP","SELECT_SEAT","CREATE_BOOKING_START","CREATE_BOOKING_SUCCESS","CREATE_BOOKING_FAILURE","LOAD_BOOKING_HISTORY","TOGGLE_SIDEBAR","ADD_NOTIFICATION","REMOVE_NOTIFICATION","CLEAR_ERROR","SET_ERROR","appReducer","state","action","type","payload","id","Date","now","filter","n","AppContext","AppProvider","children","_s","dispatch","savedUser","localStorage","getItem","user","JSON","parse","removeItem","loadInitialLocations","response","fetch","ok","data","json","console","loadBookingHistory","login","email","password","method","headers","body","stringify","_errorData$error","errorData","Error","message","token","tokens","accessToken","setItem","refreshToken","addNotification","firstName","logout","setSystemDate","searchTrips","query","URLSearchParams","toString","_errorData$error2","results","loadAllTrips","_errorData$error3","processedResults","map","trip","next_departure","departureDatetime","route","loadLocations","_errorData$error4","selectTrip","_errorData$error5","tripDetails","selectSeat","seat","createBooking","bookingData","_errorData$error6","booking","booking_reference","processPayment","paymentData","_errorData$error7","payment","status","failureReason","log","_errorData$error8","statusText","bookings","length","notification","notificationWithId","setTimeout","removeNotification","clearError","toggleSidebar","contextValue","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useApp","_s2","context","$RefreshReg$"],"sources":["/Users/gohshunda/TWT-Transport-Booking/src/context/AppContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\n// import { mockUsers, mockApi } from '../data/mockData';\n\n// Initial state\nconst initialState = {\n  // System Settings\n  systemDate: '2025-06-24', // Fixed project date instead of real-time\n  \n  // User & Auth\n  currentUser: null,\n  isAuthenticated: false,\n  isLoading: false,\n  \n  // Search & Booking\n  searchParams: {\n    origin: '',\n    destination: '',\n    date: '2025-06-24'\n  },\n  searchResults: [],\n  selectedTrip: null,\n  selectedSeat: null,\n  \n  // Locations\n  locations: [],\n  locationsLoading: false,\n  \n  // Booking Process\n  bookingInProgress: null,\n  bookingHistory: [],\n  \n  // UI State\n  sidebarOpen: false,\n  notifications: [],\n  \n  // Error handling\n  error: null\n};\n\n// Action types\nexport const ACTIONS = {\n  // System actions\n  SET_SYSTEM_DATE: 'SET_SYSTEM_DATE',\n  \n  // Auth actions\n  LOGIN_START: 'LOGIN_START',\n  LOGIN_SUCCESS: 'LOGIN_SUCCESS',\n  LOGIN_FAILURE: 'LOGIN_FAILURE',\n  LOGOUT: 'LOGOUT',\n  \n  // Search actions\n  SET_SEARCH_PARAMS: 'SET_SEARCH_PARAMS',\n  SEARCH_TRIPS_START: 'SEARCH_TRIPS_START',\n  SEARCH_TRIPS_SUCCESS: 'SEARCH_TRIPS_SUCCESS',\n  SEARCH_TRIPS_FAILURE: 'SEARCH_TRIPS_FAILURE',\n  \n  // Location actions\n  LOAD_LOCATIONS_START: 'LOAD_LOCATIONS_START',\n  LOAD_LOCATIONS_SUCCESS: 'LOAD_LOCATIONS_SUCCESS',\n  LOAD_LOCATIONS_FAILURE: 'LOAD_LOCATIONS_FAILURE',\n  \n  // Booking actions\n  SELECT_TRIP: 'SELECT_TRIP',\n  SELECT_SEAT: 'SELECT_SEAT',\n  CREATE_BOOKING_START: 'CREATE_BOOKING_START',\n  CREATE_BOOKING_SUCCESS: 'CREATE_BOOKING_SUCCESS',\n  CREATE_BOOKING_FAILURE: 'CREATE_BOOKING_FAILURE',\n  LOAD_BOOKING_HISTORY: 'LOAD_BOOKING_HISTORY',\n  \n  // UI actions\n  TOGGLE_SIDEBAR: 'TOGGLE_SIDEBAR',\n  ADD_NOTIFICATION: 'ADD_NOTIFICATION',\n  REMOVE_NOTIFICATION: 'REMOVE_NOTIFICATION',\n  CLEAR_ERROR: 'CLEAR_ERROR',\n  SET_ERROR: 'SET_ERROR'\n};\n\n// Reducer function\nconst appReducer = (state, action) => {\n  switch (action.type) {\n    case ACTIONS.SET_SYSTEM_DATE:\n      return {\n        ...state,\n        systemDate: action.payload\n      };\n      \n    case ACTIONS.LOGIN_START:\n      return {\n        ...state,\n        isLoading: true,\n        error: null\n      };\n      \n    case ACTIONS.LOGIN_SUCCESS:\n      return {\n        ...state,\n        currentUser: action.payload,\n        isAuthenticated: true,\n        isLoading: false,\n        error: null\n      };\n      \n    case ACTIONS.LOGIN_FAILURE:\n      return {\n        ...state,\n        currentUser: null,\n        isAuthenticated: false,\n        isLoading: false,\n        error: action.payload\n      };\n      \n    case ACTIONS.LOGOUT:\n      return {\n        ...state,\n        currentUser: null,\n        isAuthenticated: false,\n        bookingHistory: [],\n        bookingInProgress: null,\n        selectedTrip: null,\n        selectedSeat: null\n      };\n      \n    case ACTIONS.SET_SEARCH_PARAMS:\n      return {\n        ...state,\n        searchParams: { ...state.searchParams, ...action.payload }\n      };\n      \n    case ACTIONS.SEARCH_TRIPS_START:\n      return {\n        ...state,\n        isLoading: true,\n        error: null\n      };\n      \n    case ACTIONS.SEARCH_TRIPS_SUCCESS:\n      return {\n        ...state,\n        searchResults: action.payload,\n        isLoading: false,\n        error: null\n      };\n      \n    case ACTIONS.SEARCH_TRIPS_FAILURE:\n      return {\n        ...state,\n        searchResults: [],\n        isLoading: false,\n        error: action.payload\n      };\n      \n    case ACTIONS.LOAD_LOCATIONS_START:\n      return {\n        ...state,\n        locationsLoading: true,\n        error: null\n      };\n      \n    case ACTIONS.LOAD_LOCATIONS_SUCCESS:\n      return {\n        ...state,\n        locations: action.payload,\n        locationsLoading: false,\n        error: null\n      };\n      \n    case ACTIONS.LOAD_LOCATIONS_FAILURE:\n      return {\n        ...state,\n        locations: [],\n        locationsLoading: false,\n        error: action.payload\n      };\n      \n    case ACTIONS.SELECT_TRIP:\n      return {\n        ...state,\n        selectedTrip: action.payload,\n        selectedSeat: null // Reset seat selection when trip changes\n      };\n      \n    case ACTIONS.SELECT_SEAT:\n      return {\n        ...state,\n        selectedSeat: action.payload\n      };\n      \n    case ACTIONS.CREATE_BOOKING_START:\n      return {\n        ...state,\n        isLoading: true,\n        error: null\n      };\n      \n    case ACTIONS.CREATE_BOOKING_SUCCESS:\n      return {\n        ...state,\n        bookingInProgress: action.payload,\n        isLoading: false,\n        error: null\n      };\n      \n    case ACTIONS.CREATE_BOOKING_FAILURE:\n      return {\n        ...state,\n        bookingInProgress: null,\n        isLoading: false,\n        error: action.payload\n      };\n      \n    case ACTIONS.LOAD_BOOKING_HISTORY:\n      return {\n        ...state,\n        bookingHistory: action.payload\n      };\n      \n    case ACTIONS.TOGGLE_SIDEBAR:\n      return {\n        ...state,\n        sidebarOpen: !state.sidebarOpen\n      };\n      \n    case ACTIONS.ADD_NOTIFICATION:\n      return {\n        ...state,\n        notifications: [...state.notifications, { id: Date.now(), ...action.payload }]\n      };\n      \n    case ACTIONS.REMOVE_NOTIFICATION:\n      return {\n        ...state,\n        notifications: state.notifications.filter(n => n.id !== action.payload)\n      };\n      \n    case ACTIONS.CLEAR_ERROR:\n      return {\n        ...state,\n        error: null\n      };\n      \n    case ACTIONS.SET_ERROR:\n      return {\n        ...state,\n        error: action.payload\n      };\n      \n    default:\n      return state;\n  }\n};\n\n// Create context\nconst AppContext = createContext();\n\n// Provider component\nexport const AppProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(appReducer, initialState);\n  \n  // Auto-login from localStorage on app start\n  useEffect(() => {\n    const savedUser = localStorage.getItem('currentUser');\n    if (savedUser) {\n      try {\n        const user = JSON.parse(savedUser);\n        dispatch({ type: ACTIONS.LOGIN_SUCCESS, payload: user });\n      } catch (error) {\n        localStorage.removeItem('currentUser');\n      }\n    }\n  }, []);\n  \n  // Load locations on app start\n  useEffect(() => {\n    const loadInitialLocations = async () => {\n      try {\n        const response = await fetch('http://localhost:5001/api/locations');\n        if (response.ok) {\n          const data = await response.json();\n          dispatch({ type: ACTIONS.LOAD_LOCATIONS_SUCCESS, payload: data.data || [] });\n        }\n      } catch (error) {\n        console.error('Failed to load locations:', error);\n      }\n    };\n    \n    loadInitialLocations();\n  }, []);\n  \n  // Load user bookings when user logs in\n  useEffect(() => {\n    if (state.isAuthenticated && state.currentUser) {\n      loadBookingHistory();\n    }\n  }, [state.isAuthenticated, state.currentUser]);\n  \n  // Action creators\n  const login = async (email, password) => {\n    dispatch({ type: ACTIONS.LOGIN_START });\n    try {\n      const response = await fetch('http://localhost:5001/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password })\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error?.message || 'Login failed');\n      }\n      \n      const data = await response.json();\n      const user = data.data.user;\n      const token = data.data.tokens.accessToken;\n      \n      // Save user and token to localStorage\n      localStorage.setItem('currentUser', JSON.stringify(user));\n      localStorage.setItem('accessToken', token);\n      localStorage.setItem('refreshToken', data.data.tokens.refreshToken);\n      \n      dispatch({ type: ACTIONS.LOGIN_SUCCESS, payload: user });\n      addNotification({ type: 'success', message: `Welcome back, ${user.firstName || user.email}!` });\n      return user;\n    } catch (error) {\n      dispatch({ type: ACTIONS.LOGIN_FAILURE, payload: error.message });\n      addNotification({ type: 'error', message: error.message });\n      throw error;\n    }\n  };\n  \n  const logout = () => {\n    localStorage.removeItem('currentUser');\n    localStorage.removeItem('accessToken');\n    localStorage.removeItem('refreshToken');\n    dispatch({ type: ACTIONS.LOGOUT });\n    addNotification({\n      type: 'success',\n      message: 'You have been logged out successfully'\n    });\n  };\n\n  const setSystemDate = (date) => {\n    dispatch({ type: ACTIONS.SET_SYSTEM_DATE, payload: date });\n  };\n  \n  const searchTrips = async (searchParams) => {\n    dispatch({ type: ACTIONS.SEARCH_TRIPS_START });\n    try {\n      const token = localStorage.getItem('accessToken');\n      const query = new URLSearchParams(searchParams).toString();\n      const response = await fetch(`http://localhost:5001/api/trips?${query}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error?.message || 'Failed to search trips');\n      }\n      \n      const data = await response.json();\n      const results = data.data || [];\n      dispatch({ type: ACTIONS.SEARCH_TRIPS_SUCCESS, payload: results });\n      dispatch({ type: ACTIONS.SET_SEARCH_PARAMS, payload: searchParams });\n      return results;\n    } catch (error) {\n      dispatch({ type: ACTIONS.SEARCH_TRIPS_FAILURE, payload: error.message });\n      throw error;\n    }\n  };\n  \n  const loadAllTrips = async () => {\n    dispatch({ type: ACTIONS.SEARCH_TRIPS_START });\n    try {\n      const token = localStorage.getItem('accessToken');\n      const response = await fetch('http://localhost:5001/api/trips', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error?.message || 'Failed to load trips');\n      }\n      \n      const data = await response.json();\n      const results = data.data || [];\n      \n      // Process the trips to ensure next_departure is available\n      const processedResults = results.map(trip => {\n        return {\n          ...trip,\n          next_departure: trip.departureDatetime,\n          route: {\n            ...trip.route,\n            next_departure: trip.departureDatetime\n          }\n        };\n      });\n      \n      dispatch({ type: ACTIONS.SEARCH_TRIPS_SUCCESS, payload: processedResults });\n      dispatch({ type: ACTIONS.SET_SEARCH_PARAMS, payload: { origin: '', destination: '', date: '' } });\n      return processedResults;\n    } catch (error) {\n      dispatch({ type: ACTIONS.SEARCH_TRIPS_FAILURE, payload: error.message });\n      throw error;\n    }\n  };\n  \n  const loadLocations = async () => {\n    dispatch({ type: ACTIONS.LOAD_LOCATIONS_START });\n    try {\n      const token = localStorage.getItem('accessToken');\n      const response = await fetch('http://localhost:5001/api/locations', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error?.message || 'Failed to load locations');\n      }\n      \n      const data = await response.json();\n      const locations = data.data || [];\n      dispatch({ type: ACTIONS.LOAD_LOCATIONS_SUCCESS, payload: locations });\n      return locations;\n    } catch (error) {\n      dispatch({ type: ACTIONS.LOAD_LOCATIONS_FAILURE, payload: error.message });\n      throw error;\n    }\n  };\n  \n  const selectTrip = async (trip) => {\n    try {\n      const token = localStorage.getItem('accessToken');\n      const response = await fetch(`http://localhost:5001/api/trips/${trip.id}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error?.message || 'Failed to load trip details');\n      }\n      \n      const data = await response.json();\n      const tripDetails = data.data;\n      dispatch({ type: ACTIONS.SELECT_TRIP, payload: tripDetails });\n      return tripDetails;\n    } catch (error) {\n      addNotification({ type: 'error', message: 'Failed to load trip details' });\n      throw error;\n    }\n  };\n  \n  const selectSeat = (seat) => {\n    dispatch({ type: ACTIONS.SELECT_SEAT, payload: seat });\n  };\n  \n  const createBooking = async (bookingData) => {\n    dispatch({ type: ACTIONS.CREATE_BOOKING_START });\n    try {\n      const token = localStorage.getItem('accessToken');\n      const response = await fetch('http://localhost:5001/api/bookings', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(bookingData)\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error?.message || 'Failed to create booking');\n      }\n      \n      const data = await response.json();\n      const booking = data.data;\n      dispatch({ type: ACTIONS.CREATE_BOOKING_SUCCESS, payload: booking });\n      addNotification({ type: 'success', message: `Booking created successfully! Reference: ${booking.booking_reference || booking.id}` });\n      return booking;\n    } catch (error) {\n      dispatch({ type: ACTIONS.CREATE_BOOKING_FAILURE, payload: error.message });\n      addNotification({ type: 'error', message: 'Failed to create booking. Please try again.' });\n      throw error;\n    }\n  };\n  \n  const processPayment = async (paymentData) => {\n    try {\n      const token = localStorage.getItem('accessToken');\n      const response = await fetch('http://localhost:5001/api/payments', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(paymentData)\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error?.message || 'Payment failed');\n      }\n      \n      const data = await response.json();\n      const payment = data.data;\n      if (payment.status === 'completed') {\n        addNotification({ type: 'success', message: 'Payment completed successfully!' });\n        loadBookingHistory();\n      } else {\n        addNotification({ type: 'error', message: payment.failureReason || 'Payment failed. Please try again.' });\n      }\n      return payment;\n    } catch (error) {\n      addNotification({ type: 'error', message: 'Payment processing failed. Please try again.' });\n      throw error;\n    }\n  };\n  \n  const loadBookingHistory = async () => {\n    if (!state.currentUser) {\n      console.log('No current user, skipping booking history load');\n      return;\n    }\n    \n    try {\n      const token = localStorage.getItem('accessToken');\n      console.log('Loading booking history for user:', state.currentUser.id);\n      console.log('Token exists:', !!token);\n      \n      if (!token) {\n        console.log('No access token found');\n        return;\n      }\n      \n      const response = await fetch(`http://localhost:5001/api/bookings/user/${state.currentUser.id}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (!response.ok) {\n        console.log('Booking history request failed:', response.status, response.statusText);\n        const errorData = await response.json();\n        throw new Error(errorData.error?.message || 'Failed to load booking history');\n      }\n      \n      const data = await response.json();\n      const bookings = data.data || [];\n      console.log('Loaded bookings:', bookings.length);\n      dispatch({ type: ACTIONS.LOAD_BOOKING_HISTORY, payload: bookings });\n    } catch (error) {\n      console.error('Failed to load booking history:', error);\n    }\n  };\n  \n  const addNotification = (notification) => {\n    const notificationWithId = { id: Date.now(), ...notification };\n    dispatch({ type: ACTIONS.ADD_NOTIFICATION, payload: notificationWithId });\n    \n    // Auto-remove notification after 5 seconds\n    setTimeout(() => {\n      dispatch({ type: ACTIONS.REMOVE_NOTIFICATION, payload: notificationWithId.id });\n    }, 5000);\n  };\n  \n  const removeNotification = (id) => {\n    dispatch({ type: ACTIONS.REMOVE_NOTIFICATION, payload: id });\n  };\n  \n  const clearError = () => {\n    dispatch({ type: ACTIONS.CLEAR_ERROR });\n  };\n  \n  const toggleSidebar = () => {\n    dispatch({ type: ACTIONS.TOGGLE_SIDEBAR });\n  };\n  \n  // Context value\n  const contextValue = {\n    // State\n    ...state,\n    \n    // Actions\n    login,\n    logout,\n    setSystemDate,\n    searchTrips,\n    loadAllTrips,\n    loadLocations,\n    selectTrip,\n    selectSeat,\n    createBooking,\n    processPayment,\n    loadBookingHistory,\n    addNotification,\n    removeNotification,\n    clearError,\n    toggleSidebar\n  };\n  \n  return (\n    <AppContext.Provider value={contextValue}>\n      {children}\n    </AppContext.Provider>\n  );\n};\n\n// Custom hook to use context\nexport const useApp = () => {\n  const context = useContext(AppContext);\n  if (!context) {\n    throw new Error('useApp must be used within an AppProvider');\n  }\n  return context;\n};\n\nexport default AppContext; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}