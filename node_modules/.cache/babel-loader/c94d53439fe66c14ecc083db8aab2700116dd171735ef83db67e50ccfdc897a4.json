{"ast":null,"code":"var _jsxFileName = \"/Users/gohshunda/TWT-Transport-Booking/src/components/admin/RouteSelector.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { MapPin, Plus, X, ArrowRight, Save, Edit, Trash } from 'lucide-react';\nimport { getAllLocations, createRoute, getAllRoutes, createLocation } from '../../services/adminApi';\nimport { useApp } from '../../context/AppContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst RouteSelector = ({\n  value,\n  onChange,\n  className\n}) => {\n  _s();\n  const {\n    addNotification\n  } = useApp();\n  const [routes, setRoutes] = useState([]);\n  const [locations, setLocations] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [formData, setFormData] = useState({\n    name: '',\n    basePrice: '',\n    routeType: 'standard',\n    stops: [{\n      locationId: '',\n      isOrigin: true,\n      isDestination: false,\n      arrivalOffsetMinutes: 0,\n      departureOffsetMinutes: 10,\n      priceFromOrigin: 0\n    }, {\n      locationId: '',\n      isOrigin: false,\n      isDestination: true,\n      arrivalOffsetMinutes: 120,\n      departureOffsetMinutes: 0,\n      priceFromOrigin: 0\n    }]\n  });\n\n  // Add New Location Modal State\n  const [showLocationModal, setShowLocationModal] = useState(false);\n  const [currentStopIndex, setCurrentStopIndex] = useState(null);\n  const [locationForm, setLocationForm] = useState({\n    name: '',\n    code: '',\n    city: '',\n    state: '',\n    country: 'Malaysia',\n    address: '',\n    postalCode: '',\n    latitude: '',\n    longitude: '',\n    timezone: 'Asia/Kuala_Lumpur',\n    contactPhone: '',\n    contactEmail: '',\n    terminalType: 'bus_terminal',\n    isActive: true\n  });\n\n  // 加载所有路线和站点\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      const [routesResponse, locationsResponse] = await Promise.all([getAllRoutes(), getAllLocations()]);\n      if (routesResponse.success) {\n        setRoutes(routesResponse.data);\n      }\n      if (locationsResponse.success) {\n        setLocations(locationsResponse.data);\n      }\n    } catch (error) {\n      console.error('Error loading data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 初始化加载\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  // 处理站点变更\n  const handleStopChange = (index, field, value) => {\n    setFormData(prev => {\n      const newStops = [...prev.stops];\n      newStops[index] = {\n        ...newStops[index],\n        [field]: value\n      };\n\n      // 如果设置为起点，其他站点不能是起点\n      if (field === 'isOrigin' && value === true) {\n        newStops.forEach((stop, i) => {\n          if (i !== index) {\n            newStops[i] = {\n              ...newStops[i],\n              isOrigin: false\n            };\n          }\n        });\n      }\n\n      // 如果设置为终点，其他站点不能是终点\n      if (field === 'isDestination' && value === true) {\n        newStops.forEach((stop, i) => {\n          if (i !== index) {\n            newStops[i] = {\n              ...newStops[i],\n              isDestination: false\n            };\n          }\n        });\n      }\n      return {\n        ...prev,\n        stops: newStops\n      };\n    });\n  };\n\n  // 添加新站点\n  const addStop = () => {\n    setFormData(prev => {\n      const newStops = [...prev.stops];\n      // 在倒数第二个位置添加新站点（在终点站之前）\n      const lastIndex = newStops.length - 1;\n      const newStop = {\n        locationId: '',\n        isOrigin: false,\n        isDestination: false,\n        arrivalOffsetMinutes: newStops[lastIndex].arrivalOffsetMinutes - 30,\n        departureOffsetMinutes: newStops[lastIndex].arrivalOffsetMinutes - 20,\n        priceFromOrigin: 0\n      };\n      newStops.splice(lastIndex, 0, newStop);\n      return {\n        ...prev,\n        stops: newStops\n      };\n    });\n  };\n\n  // 删除站点\n  const removeStop = index => {\n    setFormData(prev => {\n      const newStops = [...prev.stops];\n      // 不能删除起点或终点\n      if (newStops[index].isOrigin || newStops[index].isDestination) {\n        addNotification({\n          type: 'warning',\n          message: 'Cannot remove origin or destination stops'\n        });\n        return prev;\n      }\n\n      // 需要至少保留两个站点（起点和终点）\n      if (newStops.length <= 2) {\n        addNotification({\n          type: 'warning',\n          message: 'Route must have at least two stops'\n        });\n        return prev;\n      }\n      newStops.splice(index, 1);\n      return {\n        ...prev,\n        stops: newStops\n      };\n    });\n  };\n\n  // 生成路线名称\n  const generateRouteName = () => {\n    const originStop = formData.stops.find(stop => stop.isOrigin);\n    const destinationStop = formData.stops.find(stop => stop.isDestination);\n    if (!originStop || !destinationStop || !originStop.locationId || !destinationStop.locationId) {\n      return '';\n    }\n    const originLocation = locations.find(loc => loc.id === originStop.locationId);\n    const destinationLocation = locations.find(loc => loc.id === destinationStop.locationId);\n    if (!originLocation || !destinationLocation) {\n      return '';\n    }\n    return `${originLocation.name} to ${destinationLocation.name}`;\n  };\n\n  // Auto-generate location code based on city name\n  const generateLocationCode = (city, name) => {\n    // Try to create a code from city name first\n    let baseCode = city.replace(/\\s+/g, '').substring(0, 4).toUpperCase();\n\n    // If city is too short, use location name\n    if (baseCode.length < 3) {\n      baseCode = name.replace(/\\s+/g, '').substring(0, 4).toUpperCase();\n    }\n\n    // Check if code exists, if so add numbers\n    let finalCode = baseCode;\n    let counter = 1;\n    while (locations.find(loc => loc.code && loc.code.toLowerCase() === finalCode.toLowerCase())) {\n      finalCode = baseCode + counter.toString().padStart(2, '0');\n      counter++;\n    }\n    return finalCode;\n  };\n\n  // Auto-assign coordinates based on city (common Malaysian cities)\n  const getCoordinatesForCity = (city, state) => {\n    const cityCoords = {\n      'Kuala Lumpur': {\n        lat: 3.1390,\n        lng: 101.6869\n      },\n      'Johor Bahru': {\n        lat: 1.4927,\n        lng: 103.7414\n      },\n      'George Town': {\n        lat: 5.4164,\n        lng: 100.3327\n      },\n      'Penang': {\n        lat: 5.4164,\n        lng: 100.3327\n      },\n      'Ipoh': {\n        lat: 4.5975,\n        lng: 101.0901\n      },\n      'Shah Alam': {\n        lat: 3.0733,\n        lng: 101.5185\n      },\n      'Petaling Jaya': {\n        lat: 3.1073,\n        lng: 101.6067\n      },\n      'Malacca': {\n        lat: 2.1896,\n        lng: 102.2501\n      },\n      'Melaka': {\n        lat: 2.1896,\n        lng: 102.2501\n      },\n      'Seremban': {\n        lat: 2.7297,\n        lng: 101.9381\n      },\n      'Kuantan': {\n        lat: 3.8077,\n        lng: 103.3260\n      },\n      'Kota Bharu': {\n        lat: 6.1248,\n        lng: 102.2386\n      },\n      'Alor Setar': {\n        lat: 6.1248,\n        lng: 100.3678\n      },\n      'Kuching': {\n        lat: 1.5533,\n        lng: 110.3592\n      },\n      'Kota Kinabalu': {\n        lat: 5.9804,\n        lng: 116.0735\n      },\n      'Genting Highlands': {\n        lat: 3.4213,\n        lng: 101.7936\n      }\n    };\n    const cityKey = Object.keys(cityCoords).find(key => key.toLowerCase().includes(city.toLowerCase()) || city.toLowerCase().includes(key.toLowerCase()));\n    return cityKey ? cityCoords[cityKey] : null;\n  };\n\n  // Handle opening location modal\n  const handleAddNewLocation = stopIndex => {\n    setCurrentStopIndex(stopIndex);\n    setLocationForm({\n      name: '',\n      code: '',\n      city: '',\n      state: '',\n      country: 'Malaysia',\n      address: '',\n      postalCode: '',\n      latitude: '',\n      longitude: '',\n      timezone: 'Asia/Kuala_Lumpur',\n      contactPhone: '',\n      contactEmail: '',\n      terminalType: 'bus_terminal',\n      isActive: true\n    });\n    setShowLocationModal(true);\n  };\n\n  // Handle creating new location\n  const handleCreateLocation = async () => {\n    // Validate required fields\n    if (!locationForm.name || !locationForm.city || !locationForm.state) {\n      alert('Please fill in required fields: Name, City, and State');\n      return;\n    }\n\n    // Check for duplicate location code if provided\n    if (locationForm.code) {\n      const existingLocation = locations.find(loc => loc.code && loc.code.toLowerCase() === locationForm.code.toLowerCase());\n      if (existingLocation) {\n        alert(`Location code \"${locationForm.code}\" already exists. Please use a different code or leave it blank for auto-generation.`);\n        return;\n      }\n    }\n\n    // Validate coordinates if provided (both must be provided together or both empty)\n    if (locationForm.latitude || locationForm.longitude) {\n      if (!locationForm.latitude || !locationForm.longitude) {\n        alert('Please provide both latitude and longitude, or leave both empty');\n        return;\n      }\n      const lat = parseFloat(locationForm.latitude);\n      const lng = parseFloat(locationForm.longitude);\n      if (isNaN(lat) || lat < -90 || lat > 90) {\n        alert('Latitude must be a valid number between -90 and 90 degrees');\n        return;\n      }\n      if (isNaN(lng) || lng < -180 || lng > 180) {\n        alert('Longitude must be a valid number between -180 and 180 degrees');\n        return;\n      }\n    }\n    try {\n      setLoading(true);\n\n      // Auto-assign coordinates if empty but city is recognized\n      let finalLatitude = locationForm.latitude;\n      let finalLongitude = locationForm.longitude;\n      if (!finalLatitude && !finalLongitude && locationForm.city) {\n        const coords = getCoordinatesForCity(locationForm.city, locationForm.state);\n        if (coords) {\n          finalLatitude = coords.lat.toString();\n          finalLongitude = coords.lng.toString();\n        }\n      }\n\n      // Auto-generate location code if empty\n      let finalCode = locationForm.code;\n      if (!finalCode) {\n        finalCode = generateLocationCode(locationForm.city, locationForm.name);\n      }\n      const response = await createLocation({\n        name: locationForm.name,\n        code: finalCode,\n        city: locationForm.city,\n        state: locationForm.state,\n        country: locationForm.country || 'Malaysia',\n        address: locationForm.address || null,\n        postalCode: locationForm.postalCode || null,\n        latitude: finalLatitude ? parseFloat(finalLatitude) : null,\n        longitude: finalLongitude ? parseFloat(finalLongitude) : null,\n        timezone: locationForm.timezone || 'Asia/Kuala_Lumpur',\n        contactPhone: locationForm.contactPhone || null,\n        contactEmail: locationForm.contactEmail || null,\n        terminalType: locationForm.terminalType || 'bus_terminal',\n        isActive: locationForm.isActive !== undefined ? locationForm.isActive : true\n      });\n      if (response.success) {\n        // Reload locations\n        await loadData();\n\n        // Set the newly created location for the current stop\n        if (currentStopIndex !== null && response.data && response.data.id) {\n          handleStopChange(currentStopIndex, 'locationId', response.data.id);\n        }\n\n        // Close modal\n        setShowLocationModal(false);\n        setCurrentStopIndex(null);\n        alert('Location created successfully!');\n      } else {\n        // Handle specific error messages\n        let errorMessage = response.message || response.error || 'Unknown error';\n        if (errorMessage.includes('Duplicate entry')) {\n          if (errorMessage.includes('code')) {\n            errorMessage = `Location code \"${finalCode}\" already exists. Please try a different code.`;\n          } else {\n            errorMessage = 'A location with similar details already exists.';\n          }\n        }\n        alert('Failed to create location: ' + errorMessage);\n      }\n    } catch (error) {\n      console.error('Error creating location:', error);\n\n      // Handle network/server errors\n      let errorMessage = 'An error occurred while creating the location';\n      if (error.response && error.response.data && error.response.data.message) {\n        errorMessage = error.response.data.message;\n        if (errorMessage.includes('Duplicate entry')) {\n          if (errorMessage.includes('code')) {\n            errorMessage = `Location code already exists. Please try a different code.`;\n          } else {\n            errorMessage = 'A location with similar details already exists.';\n          }\n        }\n      }\n      alert(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 创建路线\n  const handleCreateRoute = async () => {\n    // 基本验证\n    if (!formData.basePrice) {\n      alert('Please enter a base price');\n      return;\n    }\n    const originStop = formData.stops.find(stop => stop.isOrigin);\n    const destinationStop = formData.stops.find(stop => stop.isDestination);\n    if (!originStop || !destinationStop || !originStop.locationId || !destinationStop.locationId) {\n      alert('Please select origin and destination locations');\n      return;\n    }\n\n    // 自动生成路线名称\n    if (!formData.name) {\n      setFormData(prev => ({\n        ...prev,\n        name: generateRouteName()\n      }));\n    }\n\n    // 准备API数据\n    const routeData = {\n      name: formData.name || generateRouteName(),\n      basePrice: parseFloat(formData.basePrice),\n      routeType: formData.routeType,\n      originId: originStop.locationId,\n      destinationId: destinationStop.locationId,\n      intermediateStops: formData.stops.filter(stop => !stop.isOrigin && !stop.isDestination).map((stop, index) => ({\n        locationId: stop.locationId,\n        stopOrder: index + 1,\n        arrivalOffsetMinutes: stop.arrivalOffsetMinutes,\n        departureOffsetMinutes: stop.departureOffsetMinutes,\n        priceFromOrigin: parseFloat(stop.priceFromOrigin || 0),\n        boardingAllowed: true,\n        alightingAllowed: true\n      }))\n    };\n    setLoading(true);\n    try {\n      const response = await createRoute(routeData);\n      if (response.success) {\n        alert('Route created successfully');\n        setShowCreateModal(false);\n        await loadData();\n\n        // 选择新创建的路线\n        if (response.data && response.data.id) {\n          onChange(response.data.id);\n        }\n      } else {\n        alert('Failed to create route: ' + (response.error || 'Unknown error'));\n      }\n    } catch (error) {\n      console.error('Error creating route:', error);\n      alert('An error occurred while creating the route');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: className,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        value: value || '',\n        onChange: e => onChange(e.target.value),\n        className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n        disabled: loading,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Select a route\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 11\n        }, this), routes.filter(route => route && route.id).map(route => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: route.id,\n          children: route.name\n        }, route.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => setShowCreateModal(true),\n        className: \"ml-2 p-2 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 focus:outline-none\",\n        title: \"Create new route\",\n        children: /*#__PURE__*/_jsxDEV(Plus, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 7\n    }, this), showCreateModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold\",\n            children: \"Create New Route\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowCreateModal(false),\n            className: \"text-gray-400 hover:text-gray-600\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Route Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formData.name,\n                onChange: e => setFormData(prev => ({\n                  ...prev,\n                  name: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                placeholder: generateRouteName() || \"Enter route name or leave blank for auto-generation\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Base Price (RM) *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: formData.basePrice,\n                onChange: e => setFormData(prev => ({\n                  ...prev,\n                  basePrice: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                placeholder: \"e.g. 45.00\",\n                required: true,\n                min: \"0\",\n                step: \"0.01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Route Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: formData.routeType,\n              onChange: e => setFormData(prev => ({\n                ...prev,\n                routeType: e.target.value\n              })),\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"standard\",\n                children: \"Standard\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 540,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"express\",\n                children: \"Express\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"shuttle\",\n                children: \"Shuttle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 542,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"premium\",\n                children: \"Premium\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 543,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700\",\n                children: \"Stops\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: addStop,\n                className: \"text-blue-600 hover:text-blue-800 text-sm flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(Plus, {\n                  size: 16,\n                  className: \"mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 21\n                }, this), \" Add Intermediate Stop\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 553,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3 max-h-[40vh] overflow-y-auto p-2 border border-gray-200 rounded-md\",\n              children: formData.stops.map((stop, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-3 bg-gray-50 rounded-md border border-gray-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between items-center mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [stop.isOrigin && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-md mr-2\",\n                      children: \"Origin\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 568,\n                      columnNumber: 29\n                    }, this), stop.isDestination && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-md mr-2\",\n                      children: \"Destination\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 571,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-medium\",\n                      children: [\"Stop \", index + 1]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 573,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 566,\n                    columnNumber: 25\n                  }, this), !stop.isOrigin && !stop.isDestination && /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => removeStop(index),\n                    className: \"text-red-500 hover:text-red-700\",\n                    children: /*#__PURE__*/_jsxDEV(Trash, {\n                      size: 16\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 581,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 576,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 565,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 md:grid-cols-2 gap-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between items-center mb-1\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"block text-xs font-medium text-gray-700\",\n                        children: \"Location *\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 589,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        onClick: () => handleAddNewLocation(index),\n                        className: \"px-2 py-1 bg-blue-50 text-blue-600 border border-blue-200 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs flex items-center\",\n                        title: \"Add new location\",\n                        children: [/*#__PURE__*/_jsxDEV(Plus, {\n                          size: 12,\n                          className: \"mr-1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 598,\n                          columnNumber: 31\n                        }, this), \"Add New\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 592,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 588,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      value: stop.locationId,\n                      onChange: e => handleStopChange(index, 'locationId', e.target.value),\n                      className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\",\n                      required: true,\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"Select location\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 608,\n                        columnNumber: 29\n                      }, this), locations.map(location => /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: location.id,\n                        children: [location.name, \", \", location.city]\n                      }, location.id, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 610,\n                        columnNumber: 31\n                      }, this))]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 602,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 587,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"grid grid-cols-2 gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"block text-xs font-medium text-gray-700 mb-1\",\n                        children: \"Arrival (minutes)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 619,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        value: stop.arrivalOffsetMinutes,\n                        onChange: e => handleStopChange(index, 'arrivalOffsetMinutes', parseInt(e.target.value, 10)),\n                        className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\",\n                        min: \"0\",\n                        disabled: stop.isOrigin\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 622,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 618,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"block text-xs font-medium text-gray-700 mb-1\",\n                        children: \"Departure (minutes)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 632,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        value: stop.departureOffsetMinutes,\n                        onChange: e => handleStopChange(index, 'departureOffsetMinutes', parseInt(e.target.value, 10)),\n                        className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\",\n                        min: \"0\",\n                        disabled: stop.isDestination\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 635,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 631,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 617,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 586,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-xs font-medium text-gray-700 mb-1\",\n                    children: \"Price from Origin (RM)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 648,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    value: stop.priceFromOrigin,\n                    onChange: e => handleStopChange(index, 'priceFromOrigin', e.target.value),\n                    className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\",\n                    min: \"0\",\n                    step: \"0.01\",\n                    disabled: stop.isOrigin\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 651,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 647,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2 flex items-center space-x-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      id: `origin-${index}`,\n                      checked: stop.isOrigin,\n                      onChange: e => handleStopChange(index, 'isOrigin', e.target.checked),\n                      className: \"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 664,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: `origin-${index}`,\n                      className: \"ml-2 text-xs text-gray-700\",\n                      children: \"Is Origin\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 671,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 663,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      id: `destination-${index}`,\n                      checked: stop.isDestination,\n                      onChange: e => handleStopChange(index, 'isDestination', e.target.checked),\n                      className: \"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 676,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: `destination-${index}`,\n                      className: \"ml-2 text-xs text-gray-700\",\n                      children: \"Is Destination\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 683,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 675,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 662,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 564,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end space-x-3 pt-4 border-t\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setShowCreateModal(false),\n              className: \"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none\",\n              disabled: loading,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 695,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleCreateRoute,\n              className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none flex items-center\",\n              disabled: loading,\n              children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 711,\n                  columnNumber: 23\n                }, this), \"Creating...\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  size: 18,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 716,\n                  columnNumber: 23\n                }, this), \"Create Route\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 703,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 694,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 9\n    }, this), showLocationModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold\",\n            children: \"Add New Location\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 732,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowLocationModal(false),\n            className: \"text-gray-400 hover:text-gray-600\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 737,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 733,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 731,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Location Name *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 744,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: locationForm.name,\n                onChange: e => setLocationForm(prev => ({\n                  ...prev,\n                  name: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                placeholder: \"e.g. KL Sentral Terminal\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 747,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 743,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: [\"Location Code (Optional)\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500 ml-1\",\n                  children: \"- Auto-generated if empty\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 760,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 758,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: locationForm.code,\n                  onChange: e => setLocationForm(prev => ({\n                    ...prev,\n                    code: e.target.value.toUpperCase()\n                  })),\n                  className: \"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                  placeholder: \"Leave blank for auto-generation\",\n                  maxLength: \"10\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 763,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => {\n                    if (locationForm.city || locationForm.name) {\n                      const autoCode = generateLocationCode(locationForm.city || locationForm.name, locationForm.name);\n                      setLocationForm(prev => ({\n                        ...prev,\n                        code: autoCode\n                      }));\n                    } else {\n                      alert('Please enter location name or city first');\n                    }\n                  },\n                  className: \"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md hover:bg-gray-200 text-xs\",\n                  title: \"Generate code automatically\",\n                  children: \"Auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 771,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 762,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 757,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 742,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"City *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 792,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: locationForm.city,\n                onChange: e => setLocationForm(prev => ({\n                  ...prev,\n                  city: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                placeholder: \"e.g. Kuala Lumpur\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 795,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 791,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"State *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 806,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: locationForm.state,\n                onChange: e => setLocationForm(prev => ({\n                  ...prev,\n                  state: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                required: true,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select state\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 815,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Johor\",\n                  children: \"Johor\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 816,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Kedah\",\n                  children: \"Kedah\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 817,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Kelantan\",\n                  children: \"Kelantan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 818,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Federal Territory\",\n                  children: \"Federal Territory\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 819,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Labuan\",\n                  children: \"Labuan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 820,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Malacca\",\n                  children: \"Malacca\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 821,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Negeri Sembilan\",\n                  children: \"Negeri Sembilan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 822,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Pahang\",\n                  children: \"Pahang\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 823,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Penang\",\n                  children: \"Penang\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 824,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Perak\",\n                  children: \"Perak\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 825,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Perlis\",\n                  children: \"Perlis\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 826,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Putrajaya\",\n                  children: \"Putrajaya\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 827,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Sabah\",\n                  children: \"Sabah\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 828,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Sarawak\",\n                  children: \"Sarawak\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 829,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Selangor\",\n                  children: \"Selangor\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 830,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Terengganu\",\n                  children: \"Terengganu\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 831,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 809,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 805,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 790,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 838,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: locationForm.address,\n                onChange: e => setLocationForm(prev => ({\n                  ...prev,\n                  address: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                placeholder: \"Full address (optional)\",\n                rows: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 841,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 837,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Postal Code\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 851,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: locationForm.postalCode,\n                onChange: e => setLocationForm(prev => ({\n                  ...prev,\n                  postalCode: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                placeholder: \"e.g. 50470\",\n                maxLength: \"10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 854,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 850,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 836,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Contact Phone\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 867,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"tel\",\n                value: locationForm.contactPhone,\n                onChange: e => setLocationForm(prev => ({\n                  ...prev,\n                  contactPhone: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                placeholder: \"e.g. +603-2274-3333\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 870,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 866,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Contact Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 880,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                value: locationForm.contactEmail,\n                onChange: e => setLocationForm(prev => ({\n                  ...prev,\n                  contactEmail: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                placeholder: \"e.g. info@terminal.com\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 883,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 879,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 865,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Terminal Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 895,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: locationForm.terminalType,\n                onChange: e => setLocationForm(prev => ({\n                  ...prev,\n                  terminalType: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"bus_terminal\",\n                  children: \"Bus Terminal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 903,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"bus_stop\",\n                  children: \"Bus Stop\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 904,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"interchange\",\n                  children: \"Interchange\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 905,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"station\",\n                  children: \"Station\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 906,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 898,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 894,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Country\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 911,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: locationForm.country,\n                onChange: e => setLocationForm(prev => ({\n                  ...prev,\n                  country: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                placeholder: \"Malaysia\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 914,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 910,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 893,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700\",\n                children: \"GPS Coordinates (Optional)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 926,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  if (locationForm.city) {\n                    const coords = getCoordinatesForCity(locationForm.city, locationForm.state);\n                    if (coords) {\n                      setLocationForm(prev => ({\n                        ...prev,\n                        latitude: coords.lat.toString(),\n                        longitude: coords.lng.toString()\n                      }));\n                    } else {\n                      alert('No coordinates available for this city. You can leave them blank or enter manually.');\n                    }\n                  } else {\n                    alert('Please enter the city name first');\n                  }\n                },\n                className: \"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100\",\n                children: \"Auto-assign\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 929,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 925,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: locationForm.latitude,\n                  onChange: e => setLocationForm(prev => ({\n                    ...prev,\n                    latitude: e.target.value\n                  })),\n                  className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                  placeholder: \"Latitude (optional)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 955,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 954,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: locationForm.longitude,\n                  onChange: e => setLocationForm(prev => ({\n                    ...prev,\n                    longitude: e.target.value\n                  })),\n                  className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                  placeholder: \"Longitude (optional)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 965,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 964,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 953,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500\",\n              children: \"Leave blank if you don't know the coordinates. System will work without them.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 975,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 924,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-500\",\n            children: \"* Required fields. All other fields are optional but recommended for complete location information.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 980,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end space-x-3 pt-4 border-t\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setShowLocationModal(false),\n              className: \"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none\",\n              disabled: loading,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 985,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleCreateLocation,\n              className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none flex items-center\",\n              disabled: loading,\n              children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1001,\n                  columnNumber: 23\n                }, this), \"Creating...\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  size: 18,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1006,\n                  columnNumber: 23\n                }, this), \"Add Location\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 993,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 984,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 741,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 730,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 729,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 458,\n    columnNumber: 5\n  }, this);\n};\n_s(RouteSelector, \"lDMWsopc4J98FE2dCDV13cJmg5s=\", false, function () {\n  return [useApp];\n});\n_c = RouteSelector;\nexport default RouteSelector;\nvar _c;\n$RefreshReg$(_c, \"RouteSelector\");","map":{"version":3,"names":["React","useState","useEffect","MapPin","Plus","X","ArrowRight","Save","Edit","Trash","getAllLocations","createRoute","getAllRoutes","createLocation","useApp","jsxDEV","_jsxDEV","Fragment","_Fragment","RouteSelector","value","onChange","className","_s","addNotification","routes","setRoutes","locations","setLocations","loading","setLoading","showCreateModal","setShowCreateModal","formData","setFormData","name","basePrice","routeType","stops","locationId","isOrigin","isDestination","arrivalOffsetMinutes","departureOffsetMinutes","priceFromOrigin","showLocationModal","setShowLocationModal","currentStopIndex","setCurrentStopIndex","locationForm","setLocationForm","code","city","state","country","address","postalCode","latitude","longitude","timezone","contactPhone","contactEmail","terminalType","isActive","loadData","routesResponse","locationsResponse","Promise","all","success","data","error","console","handleStopChange","index","field","prev","newStops","forEach","stop","i","addStop","lastIndex","length","newStop","splice","removeStop","type","message","generateRouteName","originStop","find","destinationStop","originLocation","loc","id","destinationLocation","generateLocationCode","baseCode","replace","substring","toUpperCase","finalCode","counter","toLowerCase","toString","padStart","getCoordinatesForCity","cityCoords","lat","lng","cityKey","Object","keys","key","includes","handleAddNewLocation","stopIndex","handleCreateLocation","alert","existingLocation","parseFloat","isNaN","finalLatitude","finalLongitude","coords","response","undefined","errorMessage","handleCreateRoute","routeData","originId","destinationId","intermediateStops","filter","map","stopOrder","boardingAllowed","alightingAllowed","children","e","target","disabled","fileName","_jsxFileName","lineNumber","columnNumber","route","onClick","title","size","placeholder","required","min","step","location","parseInt","checked","htmlFor","maxLength","autoCode","rows","_c","$RefreshReg$"],"sources":["/Users/gohshunda/TWT-Transport-Booking/src/components/admin/RouteSelector.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  MapPin, \n  Plus, \n  X, \n  ArrowRight,\n  Save,\n  Edit,\n  Trash\n} from 'lucide-react';\nimport { \n  getAllLocations, \n  createRoute,\n  getAllRoutes,\n  createLocation\n} from '../../services/adminApi';\nimport { useApp } from '../../context/AppContext';\n\nconst RouteSelector = ({ value, onChange, className }) => {\n  const { addNotification } = useApp();\n  const [routes, setRoutes] = useState([]);\n  const [locations, setLocations] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [formData, setFormData] = useState({\n    name: '',\n    basePrice: '',\n    routeType: 'standard',\n    stops: [\n      {\n        locationId: '',\n        isOrigin: true,\n        isDestination: false,\n        arrivalOffsetMinutes: 0,\n        departureOffsetMinutes: 10,\n        priceFromOrigin: 0\n      },\n      {\n        locationId: '',\n        isOrigin: false,\n        isDestination: true,\n        arrivalOffsetMinutes: 120,\n        departureOffsetMinutes: 0,\n        priceFromOrigin: 0\n      }\n    ]\n  });\n\n  // Add New Location Modal State\n  const [showLocationModal, setShowLocationModal] = useState(false);\n  const [currentStopIndex, setCurrentStopIndex] = useState(null);\n  const [locationForm, setLocationForm] = useState({\n    name: '',\n    code: '',\n    city: '',\n    state: '',\n    country: 'Malaysia',\n    address: '',\n    postalCode: '',\n    latitude: '',\n    longitude: '',\n    timezone: 'Asia/Kuala_Lumpur',\n    contactPhone: '',\n    contactEmail: '',\n    terminalType: 'bus_terminal',\n    isActive: true\n  });\n\n  // 加载所有路线和站点\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      const [routesResponse, locationsResponse] = await Promise.all([\n        getAllRoutes(),\n        getAllLocations()\n      ]);\n      \n      if (routesResponse.success) {\n        setRoutes(routesResponse.data);\n      }\n      \n      if (locationsResponse.success) {\n        setLocations(locationsResponse.data);\n      }\n    } catch (error) {\n      console.error('Error loading data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 初始化加载\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  // 处理站点变更\n  const handleStopChange = (index, field, value) => {\n    setFormData(prev => {\n      const newStops = [...prev.stops];\n      newStops[index] = { ...newStops[index], [field]: value };\n      \n      // 如果设置为起点，其他站点不能是起点\n      if (field === 'isOrigin' && value === true) {\n        newStops.forEach((stop, i) => {\n          if (i !== index) {\n            newStops[i] = { ...newStops[i], isOrigin: false };\n          }\n        });\n      }\n      \n      // 如果设置为终点，其他站点不能是终点\n      if (field === 'isDestination' && value === true) {\n        newStops.forEach((stop, i) => {\n          if (i !== index) {\n            newStops[i] = { ...newStops[i], isDestination: false };\n          }\n        });\n      }\n      \n      return { ...prev, stops: newStops };\n    });\n  };\n\n  // 添加新站点\n  const addStop = () => {\n    setFormData(prev => {\n      const newStops = [...prev.stops];\n      // 在倒数第二个位置添加新站点（在终点站之前）\n      const lastIndex = newStops.length - 1;\n      const newStop = {\n        locationId: '',\n        isOrigin: false,\n        isDestination: false,\n        arrivalOffsetMinutes: newStops[lastIndex].arrivalOffsetMinutes - 30,\n        departureOffsetMinutes: newStops[lastIndex].arrivalOffsetMinutes - 20,\n        priceFromOrigin: 0\n      };\n      \n      newStops.splice(lastIndex, 0, newStop);\n      return { ...prev, stops: newStops };\n    });\n  };\n\n  // 删除站点\n  const removeStop = (index) => {\n    setFormData(prev => {\n      const newStops = [...prev.stops];\n      // 不能删除起点或终点\n      if (newStops[index].isOrigin || newStops[index].isDestination) {\n        addNotification({\n          type: 'warning',\n          message: 'Cannot remove origin or destination stops'\n        });\n        return prev;\n      }\n      \n      // 需要至少保留两个站点（起点和终点）\n      if (newStops.length <= 2) {\n        addNotification({\n          type: 'warning',\n          message: 'Route must have at least two stops'\n        });\n        return prev;\n      }\n      \n      newStops.splice(index, 1);\n      return { ...prev, stops: newStops };\n    });\n  };\n\n  // 生成路线名称\n  const generateRouteName = () => {\n    const originStop = formData.stops.find(stop => stop.isOrigin);\n    const destinationStop = formData.stops.find(stop => stop.isDestination);\n    \n    if (!originStop || !destinationStop || !originStop.locationId || !destinationStop.locationId) {\n      return '';\n    }\n    \n    const originLocation = locations.find(loc => loc.id === originStop.locationId);\n    const destinationLocation = locations.find(loc => loc.id === destinationStop.locationId);\n    \n    if (!originLocation || !destinationLocation) {\n      return '';\n    }\n    \n    return `${originLocation.name} to ${destinationLocation.name}`;\n  };\n\n  // Auto-generate location code based on city name\n  const generateLocationCode = (city, name) => {\n    // Try to create a code from city name first\n    let baseCode = city.replace(/\\s+/g, '').substring(0, 4).toUpperCase();\n    \n    // If city is too short, use location name\n    if (baseCode.length < 3) {\n      baseCode = name.replace(/\\s+/g, '').substring(0, 4).toUpperCase();\n    }\n    \n    // Check if code exists, if so add numbers\n    let finalCode = baseCode;\n    let counter = 1;\n    \n    while (locations.find(loc => loc.code && loc.code.toLowerCase() === finalCode.toLowerCase())) {\n      finalCode = baseCode + counter.toString().padStart(2, '0');\n      counter++;\n    }\n    \n    return finalCode;\n  };\n\n  // Auto-assign coordinates based on city (common Malaysian cities)\n  const getCoordinatesForCity = (city, state) => {\n    const cityCoords = {\n      'Kuala Lumpur': { lat: 3.1390, lng: 101.6869 },\n      'Johor Bahru': { lat: 1.4927, lng: 103.7414 },\n      'George Town': { lat: 5.4164, lng: 100.3327 },\n      'Penang': { lat: 5.4164, lng: 100.3327 },\n      'Ipoh': { lat: 4.5975, lng: 101.0901 },\n      'Shah Alam': { lat: 3.0733, lng: 101.5185 },\n      'Petaling Jaya': { lat: 3.1073, lng: 101.6067 },\n      'Malacca': { lat: 2.1896, lng: 102.2501 },\n      'Melaka': { lat: 2.1896, lng: 102.2501 },\n      'Seremban': { lat: 2.7297, lng: 101.9381 },\n      'Kuantan': { lat: 3.8077, lng: 103.3260 },\n      'Kota Bharu': { lat: 6.1248, lng: 102.2386 },\n      'Alor Setar': { lat: 6.1248, lng: 100.3678 },\n      'Kuching': { lat: 1.5533, lng: 110.3592 },\n      'Kota Kinabalu': { lat: 5.9804, lng: 116.0735 },\n      'Genting Highlands': { lat: 3.4213, lng: 101.7936 }\n    };\n\n    const cityKey = Object.keys(cityCoords).find(key => \n      key.toLowerCase().includes(city.toLowerCase()) || \n      city.toLowerCase().includes(key.toLowerCase())\n    );\n\n    return cityKey ? cityCoords[cityKey] : null;\n  };\n\n  // Handle opening location modal\n  const handleAddNewLocation = (stopIndex) => {\n    setCurrentStopIndex(stopIndex);\n    setLocationForm({\n      name: '',\n      code: '',\n      city: '',\n      state: '',\n      country: 'Malaysia',\n      address: '',\n      postalCode: '',\n      latitude: '',\n      longitude: '',\n      timezone: 'Asia/Kuala_Lumpur',\n      contactPhone: '',\n      contactEmail: '',\n      terminalType: 'bus_terminal',\n      isActive: true\n    });\n    setShowLocationModal(true);\n  };\n\n  // Handle creating new location\n  const handleCreateLocation = async () => {\n    // Validate required fields\n    if (!locationForm.name || !locationForm.city || !locationForm.state) {\n      alert('Please fill in required fields: Name, City, and State');\n      return;\n    }\n\n    // Check for duplicate location code if provided\n    if (locationForm.code) {\n      const existingLocation = locations.find(loc => \n        loc.code && loc.code.toLowerCase() === locationForm.code.toLowerCase()\n      );\n      if (existingLocation) {\n        alert(`Location code \"${locationForm.code}\" already exists. Please use a different code or leave it blank for auto-generation.`);\n        return;\n      }\n    }\n\n    // Validate coordinates if provided (both must be provided together or both empty)\n    if (locationForm.latitude || locationForm.longitude) {\n      if (!locationForm.latitude || !locationForm.longitude) {\n        alert('Please provide both latitude and longitude, or leave both empty');\n        return;\n      }\n      \n      const lat = parseFloat(locationForm.latitude);\n      const lng = parseFloat(locationForm.longitude);\n      \n      if (isNaN(lat) || lat < -90 || lat > 90) {\n        alert('Latitude must be a valid number between -90 and 90 degrees');\n        return;\n      }\n      \n      if (isNaN(lng) || lng < -180 || lng > 180) {\n        alert('Longitude must be a valid number between -180 and 180 degrees');\n        return;\n      }\n    }\n\n    try {\n      setLoading(true);\n      \n      // Auto-assign coordinates if empty but city is recognized\n      let finalLatitude = locationForm.latitude;\n      let finalLongitude = locationForm.longitude;\n      \n      if (!finalLatitude && !finalLongitude && locationForm.city) {\n        const coords = getCoordinatesForCity(locationForm.city, locationForm.state);\n        if (coords) {\n          finalLatitude = coords.lat.toString();\n          finalLongitude = coords.lng.toString();\n        }\n      }\n\n      // Auto-generate location code if empty\n      let finalCode = locationForm.code;\n      if (!finalCode) {\n        finalCode = generateLocationCode(locationForm.city, locationForm.name);\n      }\n      \n      const response = await createLocation({\n        name: locationForm.name,\n        code: finalCode,\n        city: locationForm.city,\n        state: locationForm.state,\n        country: locationForm.country || 'Malaysia',\n        address: locationForm.address || null,\n        postalCode: locationForm.postalCode || null,\n        latitude: finalLatitude ? parseFloat(finalLatitude) : null,\n        longitude: finalLongitude ? parseFloat(finalLongitude) : null,\n        timezone: locationForm.timezone || 'Asia/Kuala_Lumpur',\n        contactPhone: locationForm.contactPhone || null,\n        contactEmail: locationForm.contactEmail || null,\n        terminalType: locationForm.terminalType || 'bus_terminal',\n        isActive: locationForm.isActive !== undefined ? locationForm.isActive : true\n      });\n\n      if (response.success) {\n        // Reload locations\n        await loadData();\n        \n        // Set the newly created location for the current stop\n        if (currentStopIndex !== null && response.data && response.data.id) {\n          handleStopChange(currentStopIndex, 'locationId', response.data.id);\n        }\n        \n        // Close modal\n        setShowLocationModal(false);\n        setCurrentStopIndex(null);\n        \n        alert('Location created successfully!');\n      } else {\n        // Handle specific error messages\n        let errorMessage = response.message || response.error || 'Unknown error';\n        \n        if (errorMessage.includes('Duplicate entry')) {\n          if (errorMessage.includes('code')) {\n            errorMessage = `Location code \"${finalCode}\" already exists. Please try a different code.`;\n          } else {\n            errorMessage = 'A location with similar details already exists.';\n          }\n        }\n        \n        alert('Failed to create location: ' + errorMessage);\n      }\n    } catch (error) {\n      console.error('Error creating location:', error);\n      \n      // Handle network/server errors\n      let errorMessage = 'An error occurred while creating the location';\n      if (error.response && error.response.data && error.response.data.message) {\n        errorMessage = error.response.data.message;\n        \n        if (errorMessage.includes('Duplicate entry')) {\n          if (errorMessage.includes('code')) {\n            errorMessage = `Location code already exists. Please try a different code.`;\n          } else {\n            errorMessage = 'A location with similar details already exists.';\n          }\n        }\n      }\n      \n      alert(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 创建路线\n  const handleCreateRoute = async () => {\n    // 基本验证\n    if (!formData.basePrice) {\n      alert('Please enter a base price');\n      return;\n    }\n    \n    const originStop = formData.stops.find(stop => stop.isOrigin);\n    const destinationStop = formData.stops.find(stop => stop.isDestination);\n    \n    if (!originStop || !destinationStop || !originStop.locationId || !destinationStop.locationId) {\n      alert('Please select origin and destination locations');\n      return;\n    }\n    \n    // 自动生成路线名称\n    if (!formData.name) {\n      setFormData(prev => ({ ...prev, name: generateRouteName() }));\n    }\n    \n    // 准备API数据\n    const routeData = {\n      name: formData.name || generateRouteName(),\n      basePrice: parseFloat(formData.basePrice),\n      routeType: formData.routeType,\n      originId: originStop.locationId,\n      destinationId: destinationStop.locationId,\n      intermediateStops: formData.stops\n        .filter(stop => !stop.isOrigin && !stop.isDestination)\n        .map((stop, index) => ({\n          locationId: stop.locationId,\n          stopOrder: index + 1,\n          arrivalOffsetMinutes: stop.arrivalOffsetMinutes,\n          departureOffsetMinutes: stop.departureOffsetMinutes,\n          priceFromOrigin: parseFloat(stop.priceFromOrigin || 0),\n          boardingAllowed: true,\n          alightingAllowed: true\n        }))\n    };\n    \n    setLoading(true);\n    try {\n      const response = await createRoute(routeData);\n      if (response.success) {\n        alert('Route created successfully');\n        setShowCreateModal(false);\n        await loadData();\n        \n        // 选择新创建的路线\n        if (response.data && response.data.id) {\n          onChange(response.data.id);\n        }\n      } else {\n        alert('Failed to create route: ' + (response.error || 'Unknown error'));\n      }\n    } catch (error) {\n      console.error('Error creating route:', error);\n      alert('An error occurred while creating the route');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className={className}>\n      <div className=\"flex items-center\">\n        <select\n          value={value || ''}\n          onChange={(e) => onChange(e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          disabled={loading}\n        >\n          <option value=\"\">Select a route</option>\n          {routes.filter(route => route && route.id).map(route => (\n            <option key={route.id} value={route.id}>\n              {route.name}\n            </option>\n          ))}\n        </select>\n        \n        <button\n          type=\"button\"\n          onClick={() => setShowCreateModal(true)}\n          className=\"ml-2 p-2 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 focus:outline-none\"\n          title=\"Create new route\"\n        >\n          <Plus size={20} />\n        </button>\n      </div>\n\n      {/* Create Route Modal */}\n      {showCreateModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold\">Create New Route</h3>\n              <button \n                onClick={() => setShowCreateModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X size={20} />\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              {/* Route Name and Price */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Route Name\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={formData.name}\n                    onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder={generateRouteName() || \"Enter route name or leave blank for auto-generation\"}\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Base Price (RM) *\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={formData.basePrice}\n                    onChange={(e) => setFormData(prev => ({ ...prev, basePrice: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"e.g. 45.00\"\n                    required\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n              </div>\n\n              {/* Route Type */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Route Type\n                </label>\n                <select\n                  value={formData.routeType}\n                  onChange={(e) => setFormData(prev => ({ ...prev, routeType: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"standard\">Standard</option>\n                  <option value=\"express\">Express</option>\n                  <option value=\"shuttle\">Shuttle</option>\n                  <option value=\"premium\">Premium</option>\n                </select>\n              </div>\n\n              {/* Stops */}\n              <div>\n                <div className=\"flex justify-between items-center mb-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Stops\n                  </label>\n                  <button\n                    type=\"button\"\n                    onClick={addStop}\n                    className=\"text-blue-600 hover:text-blue-800 text-sm flex items-center\"\n                  >\n                    <Plus size={16} className=\"mr-1\" /> Add Intermediate Stop\n                  </button>\n                </div>\n\n                <div className=\"space-y-3 max-h-[40vh] overflow-y-auto p-2 border border-gray-200 rounded-md\">\n                  {formData.stops.map((stop, index) => (\n                    <div key={index} className=\"p-3 bg-gray-50 rounded-md border border-gray-200\">\n                      <div className=\"flex justify-between items-center mb-2\">\n                        <div className=\"flex items-center\">\n                          {stop.isOrigin && (\n                            <span className=\"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-md mr-2\">Origin</span>\n                          )}\n                          {stop.isDestination && (\n                            <span className=\"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-md mr-2\">Destination</span>\n                          )}\n                          <span className=\"font-medium\">Stop {index + 1}</span>\n                        </div>\n                        {!stop.isOrigin && !stop.isDestination && (\n                          <button\n                            type=\"button\"\n                            onClick={() => removeStop(index)}\n                            className=\"text-red-500 hover:text-red-700\"\n                          >\n                            <Trash size={16} />\n                          </button>\n                        )}\n                      </div>\n\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                        <div>\n                          <div className=\"flex justify-between items-center mb-1\">\n                            <label className=\"block text-xs font-medium text-gray-700\">\n                              Location *\n                            </label>\n                            <button\n                              type=\"button\"\n                              onClick={() => handleAddNewLocation(index)}\n                              className=\"px-2 py-1 bg-blue-50 text-blue-600 border border-blue-200 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs flex items-center\"\n                              title=\"Add new location\"\n                            >\n                              <Plus size={12} className=\"mr-1\" />\n                              Add New\n                            </button>\n                          </div>\n                          <select\n                            value={stop.locationId}\n                            onChange={(e) => handleStopChange(index, 'locationId', e.target.value)}\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                            required\n                          >\n                            <option value=\"\">Select location</option>\n                            {locations.map(location => (\n                              <option key={location.id} value={location.id}>\n                                {location.name}, {location.city}\n                              </option>\n                            ))}\n                          </select>\n                        </div>\n\n                        <div className=\"grid grid-cols-2 gap-2\">\n                          <div>\n                            <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                              Arrival (minutes)\n                            </label>\n                            <input\n                              type=\"number\"\n                              value={stop.arrivalOffsetMinutes}\n                              onChange={(e) => handleStopChange(index, 'arrivalOffsetMinutes', parseInt(e.target.value, 10))}\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                              min=\"0\"\n                              disabled={stop.isOrigin}\n                            />\n                          </div>\n                          <div>\n                            <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                              Departure (minutes)\n                            </label>\n                            <input\n                              type=\"number\"\n                              value={stop.departureOffsetMinutes}\n                              onChange={(e) => handleStopChange(index, 'departureOffsetMinutes', parseInt(e.target.value, 10))}\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                              min=\"0\"\n                              disabled={stop.isDestination}\n                            />\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"mt-2\">\n                        <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                          Price from Origin (RM)\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={stop.priceFromOrigin}\n                          onChange={(e) => handleStopChange(index, 'priceFromOrigin', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                          min=\"0\"\n                          step=\"0.01\"\n                          disabled={stop.isOrigin}\n                        />\n                      </div>\n\n                      <div className=\"mt-2 flex items-center space-x-4\">\n                        <div className=\"flex items-center\">\n                          <input\n                            type=\"checkbox\"\n                            id={`origin-${index}`}\n                            checked={stop.isOrigin}\n                            onChange={(e) => handleStopChange(index, 'isOrigin', e.target.checked)}\n                            className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                          />\n                          <label htmlFor={`origin-${index}`} className=\"ml-2 text-xs text-gray-700\">\n                            Is Origin\n                          </label>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <input\n                            type=\"checkbox\"\n                            id={`destination-${index}`}\n                            checked={stop.isDestination}\n                            onChange={(e) => handleStopChange(index, 'isDestination', e.target.checked)}\n                            className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                          />\n                          <label htmlFor={`destination-${index}`} className=\"ml-2 text-xs text-gray-700\">\n                            Is Destination\n                          </label>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowCreateModal(false)}\n                  className=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none\"\n                  disabled={loading}\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleCreateRoute}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none flex items-center\"\n                  disabled={loading}\n                >\n                  {loading ? (\n                    <>\n                      <span className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></span>\n                      Creating...\n                    </>\n                  ) : (\n                    <>\n                      <Save size={18} className=\"mr-2\" />\n                      Create Route\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Add New Location Modal */}\n      {showLocationModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold\">Add New Location</h3>\n              <button \n                onClick={() => setShowLocationModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X size={20} />\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Location Name *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={locationForm.name}\n                    onChange={(e) => setLocationForm(prev => ({ ...prev, name: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"e.g. KL Sentral Terminal\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Location Code (Optional)\n                    <span className=\"text-xs text-gray-500 ml-1\">- Auto-generated if empty</span>\n                  </label>\n                  <div className=\"flex\">\n                    <input\n                      type=\"text\"\n                      value={locationForm.code}\n                      onChange={(e) => setLocationForm(prev => ({ ...prev, code: e.target.value.toUpperCase() }))}\n                      className=\"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"Leave blank for auto-generation\"\n                      maxLength=\"10\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        if (locationForm.city || locationForm.name) {\n                          const autoCode = generateLocationCode(locationForm.city || locationForm.name, locationForm.name);\n                          setLocationForm(prev => ({ ...prev, code: autoCode }));\n                        } else {\n                          alert('Please enter location name or city first');\n                        }\n                      }}\n                      className=\"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md hover:bg-gray-200 text-xs\"\n                      title=\"Generate code automatically\"\n                    >\n                      Auto\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    City *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={locationForm.city}\n                    onChange={(e) => setLocationForm(prev => ({ ...prev, city: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"e.g. Kuala Lumpur\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    State *\n                  </label>\n                  <select\n                    value={locationForm.state}\n                    onChange={(e) => setLocationForm(prev => ({ ...prev, state: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    required\n                  >\n                    <option value=\"\">Select state</option>\n                    <option value=\"Johor\">Johor</option>\n                    <option value=\"Kedah\">Kedah</option>\n                    <option value=\"Kelantan\">Kelantan</option>\n                    <option value=\"Federal Territory\">Federal Territory</option>\n                    <option value=\"Labuan\">Labuan</option>\n                    <option value=\"Malacca\">Malacca</option>\n                    <option value=\"Negeri Sembilan\">Negeri Sembilan</option>\n                    <option value=\"Pahang\">Pahang</option>\n                    <option value=\"Penang\">Penang</option>\n                    <option value=\"Perak\">Perak</option>\n                    <option value=\"Perlis\">Perlis</option>\n                    <option value=\"Putrajaya\">Putrajaya</option>\n                    <option value=\"Sabah\">Sabah</option>\n                    <option value=\"Sarawak\">Sarawak</option>\n                    <option value=\"Selangor\">Selangor</option>\n                    <option value=\"Terengganu\">Terengganu</option>\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Address\n                  </label>\n                  <textarea\n                    value={locationForm.address}\n                    onChange={(e) => setLocationForm(prev => ({ ...prev, address: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"Full address (optional)\"\n                    rows=\"2\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Postal Code\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={locationForm.postalCode}\n                    onChange={(e) => setLocationForm(prev => ({ ...prev, postalCode: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"e.g. 50470\"\n                    maxLength=\"10\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Contact Phone\n                  </label>\n                  <input\n                    type=\"tel\"\n                    value={locationForm.contactPhone}\n                    onChange={(e) => setLocationForm(prev => ({ ...prev, contactPhone: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"e.g. +603-2274-3333\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Contact Email\n                  </label>\n                  <input\n                    type=\"email\"\n                    value={locationForm.contactEmail}\n                    onChange={(e) => setLocationForm(prev => ({ ...prev, contactEmail: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"e.g. info@terminal.com\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Terminal Type\n                  </label>\n                  <select\n                    value={locationForm.terminalType}\n                    onChange={(e) => setLocationForm(prev => ({ ...prev, terminalType: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"bus_terminal\">Bus Terminal</option>\n                    <option value=\"bus_stop\">Bus Stop</option>\n                    <option value=\"interchange\">Interchange</option>\n                    <option value=\"station\">Station</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Country\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={locationForm.country}\n                    onChange={(e) => setLocationForm(prev => ({ ...prev, country: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"Malaysia\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    GPS Coordinates (Optional)\n                  </label>\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      if (locationForm.city) {\n                        const coords = getCoordinatesForCity(locationForm.city, locationForm.state);\n                        if (coords) {\n                          setLocationForm(prev => ({\n                            ...prev,\n                            latitude: coords.lat.toString(),\n                            longitude: coords.lng.toString()\n                          }));\n                        } else {\n                          alert('No coordinates available for this city. You can leave them blank or enter manually.');\n                        }\n                      } else {\n                        alert('Please enter the city name first');\n                      }\n                    }}\n                    className=\"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100\"\n                  >\n                    Auto-assign\n                  </button>\n                </div>\n                \n                <div className=\"grid grid-cols-2 gap-3\">\n                  <div>\n                    <input\n                      type=\"text\"\n                      value={locationForm.latitude}\n                      onChange={(e) => setLocationForm(prev => ({ ...prev, latitude: e.target.value }))}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"Latitude (optional)\"\n                    />\n                  </div>\n\n                  <div>\n                    <input\n                      type=\"text\"\n                      value={locationForm.longitude}\n                      onChange={(e) => setLocationForm(prev => ({ ...prev, longitude: e.target.value }))}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"Longitude (optional)\"\n                    />\n                  </div>\n                </div>\n                \n                <div className=\"text-xs text-gray-500\">\n                  Leave blank if you don't know the coordinates. System will work without them.\n                </div>\n              </div>\n\n              <div className=\"text-xs text-gray-500\">\n                * Required fields. All other fields are optional but recommended for complete location information.\n              </div>\n\n              <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowLocationModal(false)}\n                  className=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none\"\n                  disabled={loading}\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleCreateLocation}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none flex items-center\"\n                  disabled={loading}\n                >\n                  {loading ? (\n                    <>\n                      <span className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></span>\n                      Creating...\n                    </>\n                  ) : (\n                    <>\n                      <Save size={18} className=\"mr-2\" />\n                      Add Location\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default RouteSelector; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}