{"ast":null,"code":"var _jsxFileName = \"/Users/gohshunda/TWT-Transport-Booking/src/pages/admin/AdminDashboard.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AdminLayout from '../../layouts/AdminLayout';\nimport { useApp } from '../../context/AppContext';\nimport AdminCustomerServicePortal from './AdminCustomerServicePortal';\nimport { format, addDays } from 'date-fns';\nimport { Calendar, Clock, MapPin, Bus, Users, Package, TrendingUp, DollarSign, BarChart2, BarChart3, Search, Plus, Edit, Trash, Trash2, Check, X, ChevronRight, ChevronDown, AlertTriangle, AlertCircle, Info, User, Phone, Mail, CreditCard, Printer, Save, Download, ArrowRight, FileText, MessageSquare, Send, Activity, Route, Settings, Map } from 'lucide-react';\nimport { getDashboardStats, getAnalyticsData, getVehicles, addVehicle, updateVehicle, getRoutes, getLocationsForRoutes, getTodaysSchedule, getRouteStops, createSchedule, getTripDetails, getPopularTrips, searchTrips, createBooking, formatCurrency, formatDate, formatTime, calculateOccupancy, getOccupancyColorClass, handleApiError, getRouteAnalytics, getSchedules, createRoute, updateTrip, deleteTrip } from '../../services/adminApi';\nimport RouteMap from '../../components/admin/RouteMap';\nimport PopularTrips from '../../components/admin/PopularTrips';\nimport PopularTrip from '../../components/admin/PopularTrip';\nimport RouteDetails from '../../components/admin/RouteDetails';\nimport RouteSelector from '../../components/admin/RouteSelector';\nimport LocationSelector from '../../components/admin/LocationSelector';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AdminDashboard = ({\n  activeTab = 'customer-service',\n  setActiveTab\n}) => {\n  _s();\n  const {\n    locations,\n    systemDate,\n    addNotification\n  } = useApp();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [stats, setStats] = useState({\n    activeRoutes: 0,\n    activeTrips: 0,\n    fleetSize: 0,\n    scheduledTrips: 0\n  });\n  const [routes, setRoutes] = useState([]);\n  const [vehicles, setVehicles] = useState([]);\n  const [todaysSchedule, setTodaysSchedule] = useState([]);\n  const [selectedRoute, setSelectedRoute] = useState(null);\n  const [showRouteDetails, setShowRouteDetails] = useState(false);\n  const [detailRoute, setDetailRoute] = useState(null);\n  const [popularTrips, setPopularTrips] = useState([{\n    id: '1',\n    route: {\n      id: '1',\n      name: 'KL - Johor Bahru Express'\n    },\n    origin: 'Kuala Lumpur',\n    destination: 'Johor Bahru',\n    departureTime: '08:00 AM',\n    date: '2023-06-25'\n  }, {\n    id: '2',\n    route: {\n      id: '2',\n      name: 'KL - Penang Highway'\n    },\n    origin: 'Kuala Lumpur',\n    destination: 'Penang',\n    departureTime: '09:30 AM',\n    date: '2023-06-25'\n  }, {\n    id: '3',\n    route: {\n      id: '3',\n      name: 'KL - Malacca Direct'\n    },\n    origin: 'Kuala Lumpur',\n    destination: 'Malacca',\n    departureTime: '10:15 AM',\n    date: '2023-06-25'\n  }]);\n  const handlePopularTripSelect = trip => {\n    // 显示行程详情\n    setDetailRoute(trip.route);\n    setShowRouteDetails(true);\n  };\n  useEffect(() => {\n    loadDashboardData();\n  }, []);\n  const loadDashboardData = async () => {\n    setLoading(true);\n    try {\n      // Load all dashboard data in parallel\n      const [statsResponse, routesResponse, vehiclesResponse, scheduleResponse] = await Promise.all([getDashboardStats(), getRoutes(), getVehicles(), getTodaysSchedule()]);\n      if (statsResponse.success) {\n        setStats(statsResponse.data);\n      }\n      if (routesResponse.success) {\n        setRoutes(routesResponse.data);\n      }\n      if (vehiclesResponse.success) {\n        setVehicles(vehiclesResponse.data);\n      }\n      if (scheduleResponse.success) {\n        setTodaysSchedule(scheduleResponse.data);\n      }\n      setError(null);\n    } catch (err) {\n      console.error('Error loading dashboard data:', err);\n      setError(handleApiError(err));\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleRouteClick = route => {\n    setSelectedRoute(route);\n  };\n  const handleViewRoute = route => {\n    setDetailRoute(route);\n    setShowRouteDetails(true);\n  };\n  const clearSelection = () => {\n    setSelectedRoute(null);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-64\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ml-2 text-gray-600\",\n          children: \"Loading dashboard data...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-50 border border-red-200 rounded-lg p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-5 w-5 text-red-400\",\n              viewBox: \"0 0 20 20\",\n              fill: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                fillRule: \"evenodd\",\n                d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n                clipRule: \"evenodd\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-sm font-medium text-red-800\",\n              children: \"Error loading dashboard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-sm text-red-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: loadDashboardData,\n                className: \"mt-2 text-red-800 underline hover:text-red-900\",\n                children: \"Try again\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n    children: [activeTab === 'customer-service' && /*#__PURE__*/_jsxDEV(AdminCustomerServicePortal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 9\n    }, this), activeTab === 'overview' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveTab('analytics'),\n            className: \"btn-secondary flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n              className: \"w-4 h-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 17\n            }, this), \"Analytics\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveTab('schedule'),\n            className: \"btn-primary flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(Plus, {\n              className: \"w-4 h-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this), \"Add Route\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600\",\n                children: \"Active Routes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-3xl font-bold text-primary-600\",\n                children: stats.activeRoutes\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(Route, {\n                className: \"w-6 h-6 text-primary-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600\",\n                children: \"Active Trips\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-3xl font-bold text-success-600\",\n                children: stats.activeTrips\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-12 h-12 bg-success-100 rounded-full flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(Bus, {\n                className: \"w-6 h-6 text-success-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600\",\n                children: \"Fleet Size\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-3xl font-bold text-warning-600\",\n                children: stats.fleetSize\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-12 h-12 bg-warning-100 rounded-full flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(Settings, {\n                className: \"w-6 h-6 text-warning-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600\",\n                children: \"Scheduled Trips\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-3xl font-bold text-purple-600\",\n                children: stats.scheduledTrips\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(Calendar, {\n                className: \"w-6 h-6 text-purple-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card hover:shadow-lg transition-shadow cursor-pointer\",\n          onClick: () => setActiveTab('vehicles'),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(Bus, {\n                className: \"w-6 h-6 text-blue-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ArrowRight, {\n              className: \"w-5 h-5 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-lg text-gray-900 mb-2\",\n            children: \"Manage Vehicles\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 text-sm\",\n            children: \"Add, edit, or maintain vehicles\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card hover:shadow-lg transition-shadow cursor-pointer\",\n          onClick: () => setActiveTab('schedule'),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(MapPin, {\n                className: \"w-6 h-6 text-green-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ArrowRight, {\n              className: \"w-5 h-5 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-lg text-gray-900 mb-2\",\n            children: \"Route Planning\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 text-sm\",\n            children: \"Create and optimize routes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card hover:shadow-lg transition-shadow cursor-pointer\",\n          onClick: () => setActiveTab('schedule'),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(Calendar, {\n                className: \"w-6 h-6 text-yellow-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ArrowRight, {\n              className: \"w-5 h-5 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-lg text-gray-900 mb-2\",\n            children: \"Schedule Trips\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 text-sm\",\n            children: \"Plan daily operations\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card hover:shadow-lg transition-shadow cursor-pointer\",\n          onClick: () => setActiveTab('analytics'),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(Activity, {\n                className: \"w-6 h-6 text-blue-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(ArrowRight, {\n              className: \"w-5 h-5 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-lg text-gray-900 mb-2\",\n            children: \"Recent Activity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 text-sm\",\n            children: \"View recent system activities\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold\",\n              children: \"Active Routes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: clearSelection,\n              className: \"btn-secondary text-sm\",\n              children: \"Clear Selection\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3 max-h-96 overflow-y-auto\",\n            children: routes.map(route => {\n              var _locations$find, _locations$find2;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `p-4 border rounded-lg cursor-pointer transition-colors ${(selectedRoute === null || selectedRoute === void 0 ? void 0 : selectedRoute.id) === route.id ? 'border-primary-500 bg-primary-50' : 'border-gray-200 hover:border-gray-300'}`,\n                onClick: () => handleRouteClick(route),\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center justify-between mb-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                        className: \"font-medium text-gray-900\",\n                        children: route.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 381,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex space-x-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: e => {\n                            e.stopPropagation();\n                            handleViewRoute(route);\n                          },\n                          className: \"text-primary-600 hover:text-primary-700\",\n                          title: \"View Details\",\n                          children: /*#__PURE__*/_jsxDEV(BarChart3, {\n                            className: \"w-4 h-4\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 391,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 383,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"text-gray-400 hover:text-gray-600\",\n                          title: \"Edit\",\n                          children: /*#__PURE__*/_jsxDEV(Edit, {\n                            className: \"w-4 h-4\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 394,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 393,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"text-red-400 hover:text-red-600\",\n                          title: \"Delete\",\n                          children: /*#__PURE__*/_jsxDEV(Trash2, {\n                            className: \"w-4 h-4\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 397,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 396,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 382,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 380,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-sm text-gray-600 space-y-1\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center\",\n                        children: [/*#__PURE__*/_jsxDEV(MapPin, {\n                          className: \"w-4 h-4 mr-2\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 403,\n                          columnNumber: 29\n                        }, this), (_locations$find = locations.find(l => l.id === route.originId)) === null || _locations$find === void 0 ? void 0 : _locations$find.city, \" \\u2192 \", (_locations$find2 = locations.find(l => l.id === route.destinationId)) === null || _locations$find2 === void 0 ? void 0 : _locations$find2.city]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 402,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center justify-between\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          children: [\"Distance: \", route.distanceKm, \" km\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 407,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: [\"Duration: \", Math.floor(route.durationHours), \"h \", Math.round(route.durationHours % 1 * 60), \"m\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 408,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-primary-600 font-medium\",\n                          children: [\"Price: RM \", route.basePrice]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 409,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 406,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"mt-2\",\n                        children: (() => {\n                          const routeTrips = todaysSchedule.filter(trip => trip.routeId === route.id);\n                          const avgOccupation = routeTrips.length > 0 ? routeTrips.reduce((sum, trip) => sum + calculateOccupancy(trip), 0) / routeTrips.length : 0;\n                          return avgOccupation > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flex items-center justify-between text-xs\",\n                            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \"text-gray-500\",\n                              children: \"Avg. Occupation:\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 422,\n                              columnNumber: 35\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"flex items-center space-x-2\",\n                              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"w-16 bg-gray-200 rounded-full h-2\",\n                                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                                  className: \"h-2 rounded-full transition-all\",\n                                  style: {\n                                    width: `${Math.min(avgOccupation, 100)}%`,\n                                    backgroundColor: avgOccupation > 80 ? '#EF4444' : avgOccupation > 60 ? '#F59E0B' : '#10B981'\n                                  }\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 425,\n                                  columnNumber: 39\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 424,\n                                columnNumber: 37\n                              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                                className: `font-medium ${avgOccupation > 80 ? 'text-red-600' : avgOccupation > 60 ? 'text-yellow-600' : 'text-green-600'}`,\n                                children: [typeof avgOccupation === 'number' ? avgOccupation.toFixed(0) : '0', \"%\"]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 433,\n                                columnNumber: 37\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 423,\n                              columnNumber: 35\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 421,\n                            columnNumber: 33\n                          }, this);\n                        })()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 413,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 401,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 379,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 21\n                }, this)\n              }, route.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold\",\n              children: \"Route Visualization\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-secondary text-sm\",\n              children: \"Clear Selection\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-96 bg-gray-100 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(RouteMap, {\n              routes: selectedRoute ? [selectedRoute] : routes,\n              locations: locations,\n              selectedTrips: todaysSchedule\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), activeTab === 'vehicles' && /*#__PURE__*/_jsxDEV(VehicleManagement, {\n      vehicles: vehicles,\n      onRefresh: loadDashboardData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 9\n    }, this), activeTab === 'schedule' && /*#__PURE__*/_jsxDEV(ScheduleManagement, {\n      todaysSchedule: todaysSchedule,\n      routes: routes,\n      vehicles: vehicles,\n      onRefresh: loadDashboardData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 9\n    }, this), activeTab === 'analytics' && /*#__PURE__*/_jsxDEV(Analytics, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 9\n    }, this), activeTab === 'routes' && /*#__PURE__*/_jsxDEV(RouteManagement, {\n      routes: routes,\n      onRefresh: loadDashboardData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 10\n    }, this), showRouteDetails && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        zIndex: 9999\n      },\n      children: /*#__PURE__*/_jsxDEV(RouteDetails, {\n        route: detailRoute,\n        locations: locations,\n        onClose: () => {\n          setShowRouteDetails(false);\n          setDetailRoute(null);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 232,\n    columnNumber: 5\n  }, this);\n};\n\n// Vehicle Management Component\n_s(AdminDashboard, \"4d4W50O+mwKQOT5uJY1ydDvPJ4Y=\", false, function () {\n  return [useApp];\n});\n_c = AdminDashboard;\nconst VehicleManagement = ({\n  vehicles = [],\n  onRefresh\n}) => {\n  _s2();\n  const [showAddVehicle, setShowAddVehicle] = useState(false);\n  const [editingVehicle, setEditingVehicle] = useState(null);\n  const [showServiceModal, setShowServiceModal] = useState(null);\n  const handleAddVehicle = () => {\n    setShowAddVehicle(true);\n  };\n  const handleEditVehicle = vehicle => {\n    setEditingVehicle({\n      ...vehicle,\n      editCapacity: vehicle.vehicle_capacity || vehicle.capacity || 0,\n      editMileage: vehicle.current_mileage || 0,\n      editLastService: vehicle.last_service_date || ''\n    });\n  };\n  const handleServiceVehicle = async vehicle => {\n    try {\n      // Toggle between active and maintenance status\n      const newStatus = vehicle.status === 'active' ? 'maintenance' : 'active';\n      const response = await fetch(`http://localhost:5001/api/admin/vehicles/${vehicle.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          status: newStatus\n        })\n      });\n      if (response.ok) {\n        setShowServiceModal({\n          ...vehicle,\n          newStatus,\n          message: newStatus === 'maintenance' ? 'Vehicle has been marked for maintenance' : 'Vehicle has been returned to active service'\n        });\n        // Refresh data after a short delay\n        setTimeout(() => {\n          onRefresh();\n        }, 1500);\n      } else {\n        addNotification({\n          type: 'error',\n          message: 'Failed to update vehicle status'\n        });\n      }\n    } catch (error) {\n      console.error('Error updating vehicle status:', error);\n      addNotification({\n        type: 'error',\n        message: 'Error updating vehicle status'\n      });\n    }\n  };\n  const handleSaveEdit = async () => {\n    try {\n      const updateData = {\n        current_mileage: editingVehicle.editMileage,\n        last_service_date: editingVehicle.editLastService || null\n      };\n\n      // Update capacity through vehicle_types if needed\n      if (editingVehicle.editCapacity !== editingVehicle.vehicle_capacity) {\n        // For now, we'll skip capacity update as it's tied to vehicle_type\n        // In a real scenario, you'd either update vehicle_type or create new type\n      }\n      const response = await fetch(`http://localhost:5001/api/admin/vehicles/${editingVehicle.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(updateData)\n      });\n      if (response.ok) {\n        setEditingVehicle(null);\n        onRefresh();\n        addNotification({\n          type: 'success',\n          message: 'Vehicle updated successfully!'\n        });\n      } else {\n        addNotification({\n          type: 'error',\n          message: 'Failed to update vehicle'\n        });\n      }\n    } catch (error) {\n      console.error('Error updating vehicle:', error);\n      addNotification({\n        type: 'error',\n        message: 'Error updating vehicle'\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-gray-900\",\n        children: \"Vehicle Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 613,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-primary flex items-center\",\n        onClick: handleAddVehicle,\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          className: \"w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 11\n        }, this), \"Add Vehicle\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 614,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 612,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n      children: vehicles.map(vehicle => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(Bus, {\n                className: \"w-5 h-5 text-blue-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 629,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 628,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold text-gray-900\",\n                children: vehicle.license_plate || vehicle.plateNumber || vehicle.vehicle_number\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 632,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600\",\n                children: vehicle.model || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 627,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `px-2 py-1 rounded-full text-xs font-medium ${vehicle.status === 'active' ? 'bg-green-100 text-green-800' : vehicle.status === 'maintenance' ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'}`,\n            children: vehicle.status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 636,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2 text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600\",\n              children: \"Capacity:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 647,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: [vehicle.vehicle_capacity || vehicle.capacity || 'N/A', \" seats\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 648,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 646,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600\",\n              children: \"Mileage:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: [vehicle.current_mileage ? vehicle.current_mileage.toLocaleString() : 'N/A', \" km\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 652,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 650,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600\",\n              children: \"Last Service:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 655,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: vehicle.last_service_date ? new Date(vehicle.last_service_date).toLocaleDateString('en-GB') : vehicle.lastService || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 656,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 654,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 flex space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-secondary text-xs flex-1\",\n            onClick: () => handleEditVehicle(vehicle),\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 665,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-secondary text-xs flex-1\",\n            onClick: () => handleServiceVehicle(vehicle),\n            children: \"Service\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 671,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 13\n        }, this)]\n      }, vehicle.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 623,\n      columnNumber: 7\n    }, this), showAddVehicle && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 w-full max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold mb-4\",\n          children: \"Add New Vehicle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 686,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mb-4\",\n          children: \"Add vehicle functionality coming soon...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 687,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-secondary w-full\",\n          onClick: () => setShowAddVehicle(false),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 688,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 685,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 684,\n      columnNumber: 9\n    }, this), editingVehicle && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 w-full max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold mb-4\",\n          children: [\"Edit Vehicle: \", editingVehicle.license_plate]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 702,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Capacity (seats)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 706,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: editingVehicle.editCapacity,\n              onChange: e => setEditingVehicle(prev => ({\n                ...prev,\n                editCapacity: parseInt(e.target.value)\n              })),\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              min: \"1\",\n              max: \"100\",\n              disabled: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 709,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 mt-1\",\n              children: \"Capacity is determined by vehicle type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 721,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 705,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Current Mileage (km)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 725,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: editingVehicle.editMileage,\n              onChange: e => setEditingVehicle(prev => ({\n                ...prev,\n                editMileage: parseInt(e.target.value)\n              })),\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              min: \"0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 728,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 724,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Last Service Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: editingVehicle.editLastService,\n              onChange: e => setEditingVehicle(prev => ({\n                ...prev,\n                editLastService: e.target.value\n              })),\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 744,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 740,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 704,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-3 mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary flex-1\",\n            onClick: handleSaveEdit,\n            children: \"Save Changes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 757,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-secondary flex-1\",\n            onClick: () => setEditingVehicle(null),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 763,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 756,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 701,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 700,\n      columnNumber: 9\n    }, this), showServiceModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 w-full max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold mb-4\",\n          children: [\"Service Status: \", showServiceModal.license_plate]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 778,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `inline-flex items-center px-4 py-2 rounded-full text-sm font-medium ${showServiceModal.newStatus === 'maintenance' ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'}`,\n            children: [\"Status: \", showServiceModal.newStatus === 'maintenance' ? 'Under Maintenance' : 'Active Service']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 781,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mt-4\",\n            children: showServiceModal.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 789,\n            columnNumber: 15\n          }, this), showServiceModal.newStatus === 'maintenance' && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-yellow-600 mt-2\",\n            children: \"Vehicle is now out of service. Click Service button again to return to active status.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 792,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 780,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-secondary w-full\",\n          onClick: () => setShowServiceModal(null),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 798,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 777,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 776,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 611,\n    columnNumber: 5\n  }, this);\n};\n\n// Schedule Management Component\n_s2(VehicleManagement, \"bIJyx4SFl9GinI3QQSlTFZ/fjJU=\");\n_c2 = VehicleManagement;\nconst ScheduleManagement = ({\n  todaysSchedule = [],\n  routes = [],\n  vehicles = [],\n  onRefresh\n}) => {\n  _s3();\n  const {\n    systemDate\n  } = useApp();\n  const [selectedDate, setSelectedDate] = useState(systemDate);\n  const [filteredSchedule, setFilteredSchedule] = useState([]);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [createForm, setCreateForm] = useState({\n    route_id: '',\n    vehicle_id: '',\n    departure_date: systemDate,\n    departure_time: '08:00',\n    base_price: 0,\n    seat_types: [{\n      id: 'regular',\n      name: 'Regular Seats',\n      multiplier: 1.0,\n      enabled: true\n    }, {\n      id: 'premium',\n      name: 'Premium Seats',\n      multiplier: 1.5,\n      enabled: true\n    }, {\n      id: 'vip',\n      name: 'VIP Seats',\n      multiplier: 2.0,\n      enabled: true\n    }],\n    pricing_rules: [{\n      id: 'weekend',\n      name: 'Weekend Pricing',\n      type: 'surcharge',\n      value: 15,\n      enabled: false\n    }, {\n      id: 'holiday',\n      name: 'Holiday Pricing',\n      type: 'surcharge',\n      value: 25,\n      enabled: false\n    }, {\n      id: 'early_booking',\n      name: 'Early Booking Discount',\n      type: 'discount',\n      value: 10,\n      enabled: false\n    }]\n  });\n\n  // State for route stops\n  const [routeStops, setRouteStops] = useState([]);\n  const [loadingStops, setLoadingStops] = useState(false);\n  const [dateRange, setDateRange] = useState({\n    startDate: selectedDate,\n    endDate: selectedDate\n  });\n  const [loadingSchedule, setLoadingSchedule] = useState(false);\n  const [viewMode, setViewMode] = useState('day'); // 'day', 'week', 'month'\n\n  // State for loading and form submission\n  const [loading, setLoading] = useState(false);\n  const [creatingTrip, setCreatingTrip] = useState(false);\n\n  // Add state for trip details modal\n  const [showTripDetailsModal, setShowTripDetailsModal] = useState(false);\n  const [selectedTrip, setSelectedTrip] = useState(null);\n  const [loadingTripDetails, setLoadingTripDetails] = useState(false);\n\n  // Add state for edit trip modal\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editingTrip, setEditingTrip] = useState(null);\n  const [editForm, setEditForm] = useState({\n    departure_datetime: '',\n    estimated_arrival_datetime: '',\n    base_price: '',\n    status: '',\n    special_notes: ''\n  });\n  const [updatingTrip, setUpdatingTrip] = useState(false);\n\n  // Filter schedule by selected date or date range\n  // Load schedule data based on selected date and view mode\n  useEffect(() => {\n    const loadScheduleForDate = async () => {\n      setLoadingSchedule(true);\n      try {\n        // Use date range if in week or month view mode\n        const startDate = viewMode === 'day' ? selectedDate : dateRange.startDate;\n        const endDate = viewMode === 'day' ? selectedDate : dateRange.endDate;\n        const response = await fetch(`http://localhost:5001/api/admin/schedules?startDate=${startDate}&endDate=${endDate}`);\n        if (response.ok) {\n          const data = await response.json();\n          if (data.success) {\n            // Sort by date then by departure time\n            const sortedSchedule = data.data.sort((a, b) => {\n              const dateA = new Date(a.departure_datetime);\n              const dateB = new Date(b.departure_datetime);\n              if (dateA.toDateString() === dateB.toDateString()) {\n                return dateA.getTime() - dateB.getTime(); // Sort by time if same day\n              }\n              return dateA.getTime() - dateB.getTime(); // Sort by date\n            });\n            setFilteredSchedule(sortedSchedule);\n          }\n        }\n      } catch (error) {\n        console.error('Error loading schedule for date:', error);\n        setFilteredSchedule([]);\n      } finally {\n        setLoadingSchedule(false);\n      }\n    };\n    loadScheduleForDate();\n  }, [selectedDate, dateRange, viewMode]);\n\n  // Load route stops when a route is selected\n  useEffect(() => {\n    if (createForm.route_id) {\n      loadRouteStops();\n    }\n  }, [createForm.route_id]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const loadRouteStops = async () => {\n    if (!createForm.route_id) {\n      setRouteStops([]);\n      return;\n    }\n    try {\n      setLoadingStops(true);\n      const response = await getRouteStops(createForm.route_id);\n      if (response.success) {\n        setRouteStops(response.data);\n      } else {\n        setRouteStops([]);\n      }\n    } catch (error) {\n      console.error('Error loading route stops:', error);\n      setRouteStops([]);\n    } finally {\n      setLoadingStops(false);\n    }\n  };\n  const formatTime = datetime => {\n    try {\n      return new Date(datetime).toLocaleTimeString([], {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch (error) {\n      return 'Invalid time';\n    }\n  };\n  const formatDate = datetime => {\n    try {\n      return new Date(datetime).toLocaleDateString('en-GB');\n    } catch (error) {\n      return 'Invalid date';\n    }\n  };\n  const getStatusColor = status => {\n    switch (status) {\n      case 'scheduled':\n        return 'bg-blue-100 text-blue-800';\n      case 'boarding':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'in_transit':\n        return 'bg-green-100 text-green-800';\n      case 'arrived':\n        return 'bg-gray-100 text-gray-800';\n      case 'cancelled':\n        return 'bg-red-100 text-red-800';\n      case 'delayed':\n        return 'bg-orange-100 text-orange-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  // Handle seat type multiplier change\n  const handleSeatTypeChange = (id, value) => {\n    setCreateForm(prev => {\n      const updatedSeatTypes = prev.seat_types.map(type => type.id === id ? {\n        ...type,\n        multiplier: parseFloat(value)\n      } : type);\n      return {\n        ...prev,\n        seat_types: updatedSeatTypes\n      };\n    });\n  };\n\n  // Handle pricing rule toggle\n  const handlePricingRuleToggle = (id, enabled) => {\n    setCreateForm(prev => {\n      const updatedRules = prev.pricing_rules.map(rule => rule.id === id ? {\n        ...rule,\n        enabled\n      } : rule);\n      return {\n        ...prev,\n        pricing_rules: updatedRules\n      };\n    });\n  };\n\n  // Handle pricing rule value change\n  const handlePricingRuleValueChange = (id, value) => {\n    setCreateForm(prev => {\n      const updatedRules = prev.pricing_rules.map(rule => rule.id === id ? {\n        ...rule,\n        value: parseInt(value, 10)\n      } : rule);\n      return {\n        ...prev,\n        pricing_rules: updatedRules\n      };\n    });\n  };\n\n  // Create trip schedule with enhanced options\n  const handleCreateTrip = async () => {\n    // Validate form\n    if (!createForm.route_id || !createForm.vehicle_id || !createForm.departure_date || !createForm.departure_time || !createForm.base_price) {\n      addNotification({\n        type: 'warning',\n        message: 'Please fill in all required fields'\n      });\n      return;\n    }\n    try {\n      setCreatingTrip(true);\n\n      // Get route stops to calculate estimated arrival time\n      let estimatedArrivalDatetime;\n      if (routeStops.length > 0) {\n        // If we have route stops, use the last stop's arrival offset\n        const lastStop = routeStops[routeStops.length - 1];\n        const arrivalOffsetMinutes = lastStop.arrival_offset_minutes || 0;\n\n        // Calculate estimated arrival time\n        const departureDatetime = new Date(`${createForm.departure_date}T${createForm.departure_time}:00`);\n        estimatedArrivalDatetime = new Date(departureDatetime.getTime() + arrivalOffsetMinutes * 60000);\n      } else {\n        // Fallback: Add 4 hours if no route stops data\n        const departureDatetime = new Date(`${createForm.departure_date}T${createForm.departure_time}:00`);\n        estimatedArrivalDatetime = new Date(departureDatetime.getTime() + 4 * 60 * 60000);\n      }\n\n      // Format dates for API with proper timezone handling\n      const departureDatetime = new Date(`${createForm.departure_date}T${createForm.departure_time}:00`);\n\n      // Validate datetime\n      if (isNaN(departureDatetime.getTime())) {\n        addNotification({\n          type: 'error',\n          message: 'Invalid departure date or time. Please check your inputs.'\n        });\n        return;\n      }\n\n      // Prepare seat type pricing data\n      const seatTypePricing = createForm.seat_types.filter(type => type.enabled).map(type => ({\n        seat_type_id: type.id,\n        name: type.name,\n        price_multiplier: parseFloat(type.multiplier)\n      }));\n\n      // Prepare pricing rules data\n      const pricingRules = createForm.pricing_rules.filter(rule => rule.enabled).map(rule => ({\n        rule_name: rule.name,\n        rule_type: rule.type,\n        rule_value: parseInt(rule.value, 10)\n      }));\n\n      // Create schedule\n      const response = await createSchedule({\n        route_id: createForm.route_id,\n        vehicle_id: createForm.vehicle_id,\n        departure_datetime: departureDatetime.toISOString(),\n        estimated_arrival_datetime: estimatedArrivalDatetime.toISOString(),\n        base_price: parseFloat(createForm.base_price),\n        seat_type_pricing: seatTypePricing,\n        pricing_rules: pricingRules\n      });\n      if (response.success) {\n        setShowCreateModal(false);\n        resetCreateForm();\n        onRefresh();\n        addNotification({\n          type: 'success',\n          message: 'Trip scheduled successfully!'\n        });\n      } else {\n        addNotification({\n          type: 'error',\n          message: 'Failed to schedule trip: ' + (response.message || 'Unknown error')\n        });\n      }\n    } catch (error) {\n      console.error('Error creating trip:', error);\n      addNotification({\n        type: 'error',\n        message: 'Error scheduling trip: ' + (error.message || 'Unknown error')\n      });\n    } finally {\n      setCreatingTrip(false);\n    }\n  };\n\n  // Function to group trips by date\n  const getTripsByDate = () => {\n    const groupedTrips = {};\n    filteredSchedule.forEach(trip => {\n      const date = new Date(trip.departure_datetime).toDateString();\n      if (!groupedTrips[date]) {\n        groupedTrips[date] = [];\n      }\n      groupedTrips[date].push(trip);\n    });\n    return groupedTrips;\n  };\n\n  // Set week view dates\n  const setWeekView = () => {\n    const currentDate = new Date(selectedDate);\n    const startOfWeek = new Date(currentDate);\n    startOfWeek.setDate(currentDate.getDate() - currentDate.getDay());\n    const endOfWeek = new Date(startOfWeek);\n    endOfWeek.setDate(startOfWeek.getDate() + 6);\n    setDateRange({\n      startDate: startOfWeek.toISOString().split('T')[0],\n      endDate: endOfWeek.toISOString().split('T')[0]\n    });\n    setViewMode('week');\n  };\n\n  // Set month view dates\n  const setMonthView = () => {\n    const currentDate = new Date(selectedDate);\n    const startOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);\n    const endOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);\n    setDateRange({\n      startDate: startOfMonth.toISOString().split('T')[0],\n      endDate: endOfMonth.toISOString().split('T')[0]\n    });\n    setViewMode('month');\n  };\n\n  // Switch back to day view\n  const setDayView = () => {\n    setViewMode('day');\n  };\n\n  // Get formatted date range text based on view mode\n  const getDateRangeText = () => {\n    if (viewMode === 'day') {\n      return `Schedule for ${formatDate(selectedDate)}`;\n    } else if (viewMode === 'week') {\n      return `Week of ${formatDate(dateRange.startDate)} - ${formatDate(dateRange.endDate)}`;\n    } else {\n      return `Month of ${new Date(dateRange.startDate).toLocaleString('en-US', {\n        month: 'long',\n        year: 'numeric'\n      })}`;\n    }\n  };\n\n  // Reset create form to initial state\n  const resetCreateForm = () => {\n    setCreateForm({\n      route_id: '',\n      vehicle_id: '',\n      departure_date: systemDate,\n      departure_time: '08:00',\n      base_price: 0,\n      seat_types: [{\n        id: 'regular',\n        name: 'Regular Seats',\n        multiplier: 1.0,\n        enabled: true\n      }, {\n        id: 'premium',\n        name: 'Premium Seats',\n        multiplier: 1.5,\n        enabled: true\n      }, {\n        id: 'vip',\n        name: 'VIP Seats',\n        multiplier: 2.0,\n        enabled: true\n      }],\n      pricing_rules: [{\n        id: 'weekend',\n        name: 'Weekend Pricing',\n        type: 'surcharge',\n        value: 15,\n        enabled: false\n      }, {\n        id: 'holiday',\n        name: 'Holiday Pricing',\n        type: 'surcharge',\n        value: 25,\n        enabled: false\n      }, {\n        id: 'early_booking',\n        name: 'Early Booking Discount',\n        type: 'discount',\n        value: 10,\n        enabled: false\n      }]\n    });\n    setRouteStops([]);\n  };\n\n  // Handle trip click\n  const handleTripClick = async tripId => {\n    setLoadingTripDetails(true);\n    try {\n      const response = await getTripDetails(tripId);\n      if (response.success) {\n        setSelectedTrip(response.data);\n        setShowTripDetailsModal(true);\n      } else {\n        alert('Failed to load trip details');\n      }\n    } catch (error) {\n      console.error('Error loading trip details:', error);\n      alert('Error loading trip details');\n    } finally {\n      setLoadingTripDetails(false);\n    }\n  };\n\n  // Handle edit trip\n  const handleEditTrip = async trip => {\n    setEditingTrip(trip);\n\n    // Format datetime for input fields\n    const formatDateTimeForInput = dateTimeString => {\n      try {\n        const date = new Date(dateTimeString);\n        return date.toISOString().slice(0, 16); // YYYY-MM-DDTHH:mm format\n      } catch (error) {\n        return '';\n      }\n    };\n    setEditForm({\n      departure_datetime: formatDateTimeForInput(trip.departure_datetime),\n      estimated_arrival_datetime: formatDateTimeForInput(trip.estimated_arrival_datetime),\n      base_price: trip.base_price.toString(),\n      status: trip.status,\n      special_notes: trip.special_notes || ''\n    });\n    setShowEditModal(true);\n  };\n\n  // Handle update trip\n  const handleUpdateTrip = async () => {\n    if (!editingTrip) return;\n    try {\n      setUpdatingTrip(true);\n\n      // Prepare update data\n      const updateData = {};\n      if (editForm.departure_datetime) {\n        updateData.departure_datetime = new Date(editForm.departure_datetime).toISOString();\n      }\n      if (editForm.estimated_arrival_datetime) {\n        updateData.estimated_arrival_datetime = new Date(editForm.estimated_arrival_datetime).toISOString();\n      }\n      if (editForm.base_price) {\n        updateData.base_price = parseFloat(editForm.base_price);\n      }\n      if (editForm.status) {\n        updateData.status = editForm.status;\n      }\n      if (editForm.special_notes) {\n        updateData.special_notes = editForm.special_notes;\n      }\n      const response = await updateTrip(editingTrip.id, updateData);\n      if (response.success) {\n        addNotification({\n          type: 'success',\n          message: 'Trip updated successfully!'\n        });\n        setShowEditModal(false);\n        setEditingTrip(null);\n        onRefresh(); // Refresh the schedule data\n      } else {\n        addNotification({\n          type: 'error',\n          message: 'Failed to update trip: ' + (response.message || 'Unknown error')\n        });\n      }\n    } catch (error) {\n      console.error('Error updating trip:', error);\n      alert('Error updating trip: ' + (error.message || 'Unknown error'));\n    } finally {\n      setUpdatingTrip(false);\n    }\n  };\n\n  // Handle delete trip\n  const handleDeleteTrip = async trip => {\n    if (!window.confirm(`Are you sure you want to delete the trip \"${trip.route_name}\" scheduled for ${formatDate(trip.departure_datetime)} at ${formatTime(trip.departure_datetime)}?`)) {\n      return;\n    }\n    try {\n      const response = await deleteTrip(trip.id);\n      if (response.success) {\n        alert('Trip deleted successfully!');\n        onRefresh(); // Refresh the schedule data\n      } else {\n        alert('Failed to delete trip: ' + (response.message || 'Unknown error'));\n      }\n    } catch (error) {\n      console.error('Error deleting trip:', error);\n      alert('Error deleting trip: ' + (error.message || 'Unknown error'));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap justify-between items-center gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-gray-900\",\n        children: \"Schedule Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1295,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-flex rounded-md shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `px-4 py-2 text-sm font-medium ${viewMode === 'day' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-50'} border border-gray-300 rounded-l-md focus:z-10`,\n            onClick: setDayView,\n            children: \"Day\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1299,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `px-4 py-2 text-sm font-medium ${viewMode === 'week' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-50'} border-t border-b border-r border-gray-300 focus:z-10`,\n            onClick: setWeekView,\n            children: \"Week\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1305,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `px-4 py-2 text-sm font-medium ${viewMode === 'month' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-50'} border-t border-b border-r border-gray-300 rounded-r-md focus:z-10`,\n            onClick: setMonthView,\n            children: \"Month\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1311,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1298,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: selectedDate,\n          onChange: e => setSelectedDate(e.target.value),\n          className: \"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n          min: systemDate,\n          max: \"2025-07-31\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1320,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary flex items-center\",\n          onClick: () => setShowCreateModal(true),\n          children: [/*#__PURE__*/_jsxDEV(Calendar, {\n            className: \"w-4 h-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1333,\n            columnNumber: 11\n          }, this), \"Create Schedule\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1329,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1296,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1294,\n      columnNumber: 7\n    }, this), loadingSchedule ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card py-16\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col items-center justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-12 h-12 border-4 border-t-4 border-primary-600 border-t-transparent rounded-full animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1342,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-4 text-gray-600\",\n          children: \"Loading schedule data...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1343,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1341,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1340,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold mb-4\",\n        children: [getDateRangeText(), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ml-2 text-sm font-normal text-gray-600\",\n          children: [\"(\", filteredSchedule.length, \" trips)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1350,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1348,\n        columnNumber: 11\n      }, this), filteredSchedule.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8 text-gray-500\",\n        children: [/*#__PURE__*/_jsxDEV(Calendar, {\n          className: \"w-12 h-12 mx-auto mb-3 text-gray-300\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1357,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No trips scheduled for this period\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1358,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1356,\n        columnNumber: 13\n      }, this) : viewMode === 'day' ?\n      /*#__PURE__*/\n      // Day view - simple list\n      _jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: filteredSchedule.map(trip => {\n          const occupiedSeats = trip.occupied_seats || trip.total_seats - trip.available_seats;\n          const occupancyPercentage = trip.occupancy_percentage || Math.round(occupiedSeats / trip.total_seats * 100);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer\",\n            onClick: () => handleTripClick(trip.id),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"font-medium text-gray-900\",\n                    children: trip.route_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1377,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: e => {\n                        e.stopPropagation();\n                        handleTripClick(trip.id);\n                      },\n                      className: \"text-primary-600 hover:text-primary-700\",\n                      title: \"View Details\",\n                      children: /*#__PURE__*/_jsxDEV(BarChart3, {\n                        className: \"w-4 h-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1387,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1379,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: e => {\n                        e.stopPropagation();\n                        handleEditTrip(trip);\n                      },\n                      className: \"text-gray-400 hover:text-gray-600\",\n                      title: \"Edit\",\n                      children: /*#__PURE__*/_jsxDEV(Edit, {\n                        className: \"w-4 h-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1397,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1389,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: e => {\n                        e.stopPropagation();\n                        handleDeleteTrip(trip);\n                      },\n                      className: \"text-red-400 hover:text-red-600\",\n                      title: \"Delete\",\n                      children: /*#__PURE__*/_jsxDEV(Trash2, {\n                        className: \"w-4 h-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1407,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1399,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1378,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1376,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-600 space-y-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(MapPin, {\n                      className: \"w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1413,\n                      columnNumber: 29\n                    }, this), trip.origin_name, \" \\u2192 \", trip.destination_name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1412,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"Departure: \", formatTime(trip.departure_datetime)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1417,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"Arrival: \", formatTime(trip.estimated_arrival_datetime)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1418,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1416,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"Vehicle: \", trip.vehicle_number || trip.license_plate]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1421,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-primary-600 font-medium\",\n                      children: [\"Price: RM \", trip.base_price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1422,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1420,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1411,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1375,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1374,\n              columnNumber: 17\n            }, this)\n          }, trip.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1369,\n            columnNumber: 19\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1362,\n        columnNumber: 9\n      }, this) :\n      /*#__PURE__*/\n      // Week/Month view - grouped by date\n      _jsxDEV(\"div\", {\n        className: \"space-y-6\",\n        children: Object.entries(getTripsByDate()).length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-10 text-center text-gray-500\",\n          children: \"No trips scheduled for this period\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1435,\n          columnNumber: 17\n        }, this) : Object.entries(getTripsByDate()).map(([date, trips]) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 py-2 bg-gray-50 font-medium\",\n            children: new Date(date).toLocaleDateString('en-US', {\n              weekday: 'long',\n              month: 'long',\n              day: 'numeric',\n              year: 'numeric'\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1441,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"divide-y divide-gray-100\",\n            children: trips.map(trip => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 hover:bg-gray-50 cursor-pointer transition-colors\",\n              onClick: () => handleTripClick(trip.id),\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-lg font-medium w-20 text-gray-900\",\n                    children: formatTime(trip.departure_datetime)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1454,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-medium text-gray-900\",\n                      children: trip.route_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1458,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-sm text-gray-600\",\n                      children: [trip.origin_name, \" \\u2192 \", trip.destination_name]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1459,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1457,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1453,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm text-gray-600\",\n                    children: trip.vehicle_number || trip.license_plate\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1466,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(trip.status)}`,\n                      children: trip.status.replace('_', ' ').toUpperCase()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1471,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1470,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1465,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1452,\n                columnNumber: 27\n              }, this)\n            }, trip.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1447,\n              columnNumber: 25\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1445,\n            columnNumber: 21\n          }, this)]\n        }, date, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1440,\n          columnNumber: 19\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1433,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1347,\n      columnNumber: 7\n    }, this), showCreateModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold\",\n            children: \"Create New Trip Schedule\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1493,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowCreateModal(false),\n            className: \"text-gray-400 hover:text-gray-600\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1498,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1494,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1492,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium text-gray-700\",\n              children: \"Basic Trip Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1505,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Route\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1508,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(RouteSelector, {\n                value: createForm.route_id,\n                onChange: value => {\n                  setCreateForm(prev => ({\n                    ...prev,\n                    route_id: value\n                  }));\n                  if (value) {\n                    // When route changes, load route stops\n                    getRouteStops(value).then(response => {\n                      if (response.success) {\n                        setRouteStops(response.data || []);\n                      } else {\n                        setRouteStops([]);\n                      }\n                    }).catch(err => {\n                      console.error('Error loading route stops:', err);\n                      setRouteStops([]);\n                    });\n                  } else {\n                    setRouteStops([]);\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1511,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1507,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Vehicle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1535,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: createForm.vehicle_id,\n                onChange: e => setCreateForm(prev => ({\n                  ...prev,\n                  vehicle_id: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select a vehicle\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1543,\n                  columnNumber: 21\n                }, this), vehicles.map(vehicle => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: vehicle.id,\n                  children: [vehicle.vehicle_number, \" - \", vehicle.license_plate, \" (\", vehicle.vehicle_type_name, \")\"]\n                }, vehicle.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1545,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1538,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1534,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-1\",\n                  children: \"Departure Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1554,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  value: createForm.departure_date,\n                  onChange: e => setCreateForm(prev => ({\n                    ...prev,\n                    departure_date: e.target.value\n                  })),\n                  className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                  min: systemDate\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1557,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1553,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-1\",\n                  children: \"Departure Time\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1567,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"time\",\n                  value: createForm.departure_time,\n                  onChange: e => setCreateForm(prev => ({\n                    ...prev,\n                    departure_time: e.target.value\n                  })),\n                  className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1570,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1566,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1552,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1504,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium text-gray-700\",\n              children: \"Pricing Configuration\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1582,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Base Price (RM)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1585,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                step: \"0.50\",\n                min: \"0\",\n                value: createForm.base_price,\n                onChange: e => setCreateForm(prev => ({\n                  ...prev,\n                  base_price: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                placeholder: \"e.g. 45.00\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1588,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1584,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-50 p-3 rounded-lg border border-gray-200\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"text-sm font-medium text-gray-700 mb-2\",\n                children: \"Seat Type Pricing\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1601,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-3 mt-3\",\n                children: createForm.seat_types.map(seatType => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      id: `${seatType.id}-seats`,\n                      className: \"mr-2\",\n                      checked: seatType.enabled,\n                      onChange: e => {\n                        const updatedSeatTypes = createForm.seat_types.map(type => type.id === seatType.id ? {\n                          ...type,\n                          enabled: e.target.checked\n                        } : type);\n                        setCreateForm(prev => ({\n                          ...prev,\n                          seat_types: updatedSeatTypes\n                        }));\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1606,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: `${seatType.id}-seats`,\n                      className: \"text-sm\",\n                      children: seatType.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1618,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1605,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-500 mr-2\",\n                      children: \"Multiplier:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1621,\n                      columnNumber: 27\n                    }, this), seatType.id === 'regular' ? /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-medium\",\n                      children: \"1.0x\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1623,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      step: \"0.1\",\n                      min: \"1\",\n                      className: \"w-16 px-2 py-1 border border-gray-300 rounded-md\",\n                      value: seatType.multiplier,\n                      onChange: e => handleSeatTypeChange(seatType.id, e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1625,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1620,\n                    columnNumber: 25\n                  }, this)]\n                }, seatType.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1604,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1602,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1600,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-50 p-3 rounded-lg border border-gray-200\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"text-sm font-medium text-gray-700 mb-2\",\n                children: \"Dynamic Pricing Rules\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1642,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-3 mt-3\",\n                children: createForm.pricing_rules.map(rule => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      id: rule.id,\n                      className: \"mr-2\",\n                      checked: rule.enabled,\n                      onChange: e => handlePricingRuleToggle(rule.id, e.target.checked)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1647,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: rule.id,\n                      className: \"text-sm\",\n                      children: rule.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1654,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1646,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-500 mr-2\",\n                      children: rule.id === 'early_booking' ? '-' : '+'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1657,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      step: \"1\",\n                      min: \"0\",\n                      className: \"w-16 px-2 py-1 border border-gray-300 rounded-md\",\n                      value: rule.value,\n                      disabled: !rule.enabled,\n                      onChange: e => handlePricingRuleValueChange(rule.id, e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1658,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-500 ml-1\",\n                      children: \"%\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1667,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1656,\n                    columnNumber: 25\n                  }, this)]\n                }, rule.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1645,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1643,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1641,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1581,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1502,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-3 mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary flex-1\",\n            onClick: handleCreateTrip,\n            disabled: creatingTrip || !createForm.route_id || !createForm.vehicle_id || !createForm.departure_date || !createForm.departure_time || !createForm.base_price,\n            children: creatingTrip ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1684,\n                columnNumber: 21\n              }, this), \"Creating...\"]\n            }, void 0, true) : 'Schedule Trip'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1677,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-secondary flex-1\",\n            onClick: () => setShowCreateModal(false),\n            disabled: creatingTrip,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1689,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1676,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1491,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1490,\n      columnNumber: 9\n    }, this), showTripDetailsModal && selectedTrip && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold\",\n            children: selectedTrip.trips_scheduled ? 'Route Details' : 'Trip Details'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1706,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowTripDetailsModal(false),\n            className: \"text-gray-400 hover:text-gray-600\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1713,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1709,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1705,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-4 rounded-lg mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-lg\",\n                children: selectedTrip.route_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1721,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: selectedTrip.trip_number\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1722,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1720,\n              columnNumber: 17\n            }, this), selectedTrip.trips_scheduled ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800\",\n              children: \"ROUTE OVERVIEW\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1725,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(selectedTrip.status)}`,\n              children: selectedTrip.status.replace('_', ' ').toUpperCase()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1729,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1719,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1718,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium text-gray-700 border-b pb-2\",\n              children: selectedTrip.trips_scheduled ? 'Route Information' : 'Trip Information'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1740,\n              columnNumber: 17\n            }, this), selectedTrip.trips_scheduled ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"Route\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1747,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium\",\n                  children: [selectedTrip.origin_name, \" \\u2192 \", selectedTrip.destination_name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1748,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1746,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"Scheduled Trips\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1752,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium\",\n                  children: [selectedTrip.trips_scheduled, \" trips\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1753,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1751,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"Total Passengers\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1757,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium\",\n                  children: [selectedTrip.total_passengers || 0, \" passengers\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1758,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1756,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-2 gap-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: \"Departure\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1765,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-medium\",\n                    children: formatDate(selectedTrip.departure_datetime)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1766,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm\",\n                    children: formatTime(selectedTrip.departure_datetime)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1767,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1764,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: \"Arrival (Est.)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1771,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-medium\",\n                    children: formatDate(selectedTrip.estimated_arrival_datetime)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1772,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm\",\n                    children: formatTime(selectedTrip.estimated_arrival_datetime)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1773,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1770,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1763,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"Route\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1778,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium\",\n                  children: [selectedTrip.origin_name, \" \\u2192 \", selectedTrip.destination_name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1779,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-600\",\n                  children: [selectedTrip.origin_city, \" to \", selectedTrip.destination_city]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1780,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1777,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"Vehicle\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1784,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium\",\n                  children: selectedTrip.vehicle_model\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1785,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-600\",\n                  children: [selectedTrip.vehicle_number, \" | \", selectedTrip.license_plate, \" | \", selectedTrip.vehicle_type]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1786,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1783,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1739,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium text-gray-700 border-b pb-2\",\n              children: \"Occupancy & Pricing\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1796,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: selectedTrip.trips_scheduled ? 'Average Occupancy' : 'Seats'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1800,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium\",\n                  children: selectedTrip.trips_scheduled ? `${selectedTrip.avg_occupancy || 0}%` : `${selectedTrip.occupied_seats} / ${selectedTrip.total_seats} occupied`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1803,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1799,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-20 bg-gray-200 rounded-full h-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"h-2 rounded-full transition-all\",\n                    style: {\n                      width: `${Math.min(selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0, 100)}%`,\n                      backgroundColor: (selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0) > 80 ? '#EF4444' : (selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0) > 60 ? '#F59E0B' : '#10B981'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1813,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1812,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm font-medium\",\n                  children: [selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1822,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1811,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1798,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: selectedTrip.trips_scheduled ? 'Total Revenue' : 'Base Price'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1829,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-medium\",\n                children: [\"RM \", selectedTrip.trips_scheduled ? selectedTrip.total_revenue || 0 : selectedTrip.base_price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1832,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1828,\n              columnNumber: 17\n            }, this), !selectedTrip.trips_scheduled && selectedTrip.seat_pricing && selectedTrip.seat_pricing.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: \"Seat Type Pricing\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1841,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-1 mt-1\",\n                children: selectedTrip.seat_pricing.map((pricing, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: pricing.seat_type_id.charAt(0).toUpperCase() + pricing.seat_type_id.slice(1)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1845,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: [pricing.price_multiplier, \"x\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1846,\n                    columnNumber: 27\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1844,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1842,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1840,\n              columnNumber: 19\n            }, this), !selectedTrip.trips_scheduled && selectedTrip.pricing_rules && selectedTrip.pricing_rules.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: \"Pricing Rules\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1855,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-1 mt-1\",\n                children: selectedTrip.pricing_rules.map((rule, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: rule.rule_name.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1859,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: [rule.rule_type === 'discount' ? '-' : '+', rule.rule_value, \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1860,\n                    columnNumber: 27\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1858,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1856,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1854,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1795,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1737,\n          columnNumber: 13\n        }, this), !selectedTrip.trips_scheduled && selectedTrip.stops && selectedTrip.stops.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium text-gray-700 border-b pb-2 mb-4\",\n            children: \"Route Stops\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1874,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: selectedTrip.stops.map((stop, index) => {\n              const isOrigin = index === 0;\n              const isDestination = index === selectedTrip.stops.length - 1;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"relative\",\n                  children: [!isDestination && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"h-full w-0.5 bg-blue-500 absolute left-2 top-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1885,\n                    columnNumber: 29\n                  }, this), isOrigin || isDestination ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"h-4 w-4 rounded-full bg-blue-500 mt-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1888,\n                    columnNumber: 29\n                  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"h-4 w-4 rounded-full border-2 border-blue-500 bg-white mt-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1890,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1883,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ml-4 flex-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex justify-between\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"font-medium\",\n                        children: [stop.location_name, isOrigin && ' (Origin)', isDestination && ' (Destination)']\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1897,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-sm text-gray-600\",\n                        children: stop.location_city\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1902,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1896,\n                      columnNumber: 29\n                    }, this), !isOrigin && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-right\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-sm text-gray-500\",\n                        children: [\"+\", Math.floor(stop.arrival_offset_minutes / 60), \" hrs\", stop.arrival_offset_minutes % 60 > 0 ? ` ${stop.arrival_offset_minutes % 60} mins` : '']\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1907,\n                        columnNumber: 33\n                      }, this), stop.price_from_origin > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-sm font-medium\",\n                        children: [\"RM \", stop.price_from_origin]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1912,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1906,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1895,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1894,\n                  columnNumber: 25\n                }, this)]\n              }, stop.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1882,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1876,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1873,\n          columnNumber: 15\n        }, this), selectedTrip.trips_scheduled && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium text-gray-700 border-b pb-2 mb-4\",\n            children: \"Performance Data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1928,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 bg-gray-50 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-500 mb-1\",\n                children: \"Average Occupancy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1932,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xl font-semibold\",\n                  children: [selectedTrip.avg_occupancy || 0, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1934,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full bg-gray-200 rounded-full h-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"h-2 rounded-full transition-all\",\n                    style: {\n                      width: `${Math.min(selectedTrip.avg_occupancy || 0, 100)}%`,\n                      backgroundColor: (selectedTrip.avg_occupancy || 0) > 80 ? '#10B981' : (selectedTrip.avg_occupancy || 0) > 60 ? '#F59E0B' : '#EF4444'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1936,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1935,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1933,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1931,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 bg-gray-50 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-500 mb-1\",\n                children: \"Total Revenue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1949,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xl font-semibold text-green-600\",\n                children: [\"RM \", selectedTrip.total_revenue || 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1950,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1948,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 bg-gray-50 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-500 mb-1\",\n                children: \"Total Passengers\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1954,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xl font-semibold\",\n                children: selectedTrip.total_passengers || 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1955,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1953,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 bg-gray-50 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-500 mb-1\",\n                children: \"Average Price Per Trip\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1959,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xl font-semibold\",\n                children: [\"RM \", selectedTrip.trips_scheduled ? (selectedTrip.total_revenue / selectedTrip.trips_scheduled).toFixed(2) : 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1960,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1958,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1930,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1927,\n          columnNumber: 15\n        }, this), selectedTrip.trips_scheduled && selectedTrip.trips && selectedTrip.trips.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium text-gray-700 border-b pb-2 mb-4\",\n            children: \"Scheduled Trips\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1972,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overflow-hidden border border-gray-200 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"min-w-full divide-y divide-gray-200\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                className: \"bg-gray-50\",\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                    children: \"Trip Number\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1978,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                    children: \"Departure\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1981,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                    children: \"Vehicle\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1984,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                    children: \"Occupancy\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1987,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1990,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                    children: \"Actions\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1993,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1977,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1976,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                className: \"bg-white divide-y divide-gray-200\",\n                children: selectedTrip.trips.map(trip => {\n                  var _trip$status;\n                  const occupiedSeats = trip.occupied_seats || trip.total_seats - trip.available_seats || 0;\n                  const occupancyPercentage = trip.occupancy_percentage || (trip.total_seats ? Math.round(occupiedSeats / trip.total_seats * 100) : 0);\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"hover:bg-gray-50\",\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900\",\n                      children: trip.trip_number\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2006,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 whitespace-nowrap text-sm text-gray-500\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        children: formatDate(trip.departure_datetime)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2010,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs\",\n                        children: formatTime(trip.departure_datetime)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2011,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2009,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 whitespace-nowrap text-sm text-gray-500\",\n                      children: trip.vehicle_number || trip.license_plate || 'N/A'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2013,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 whitespace-nowrap\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-16 bg-gray-200 rounded-full h-2 mr-2\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"h-2 rounded-full transition-all\",\n                            style: {\n                              width: `${Math.min(occupancyPercentage, 100)}%`,\n                              backgroundColor: occupancyPercentage > 80 ? '#EF4444' : occupancyPercentage > 60 ? '#F59E0B' : '#10B981'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2019,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2018,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-xs font-medium\",\n                          children: [occupancyPercentage, \"%\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2028,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2017,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2016,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 whitespace-nowrap\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: `px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(trip.status)}`,\n                        children: ((_trip$status = trip.status) === null || _trip$status === void 0 ? void 0 : _trip$status.replace('_', ' ').toUpperCase()) || 'N/A'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2034,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2033,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 whitespace-nowrap text-sm text-gray-500\",\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => handleTripClick(trip.id),\n                        className: \"text-blue-600 hover:text-blue-800\",\n                        children: \"View\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2039,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2038,\n                      columnNumber: 29\n                    }, this)]\n                  }, trip.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2005,\n                    columnNumber: 27\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1998,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1975,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1974,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1971,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3 pt-4 border-t\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-secondary\",\n            onClick: () => setShowTripDetailsModal(false),\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2057,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2056,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1704,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1703,\n      columnNumber: 9\n    }, this), showEditModal && editingTrip && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold\",\n            children: \"Edit Trip\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2073,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowEditModal(false),\n            className: \"text-gray-400 hover:text-gray-600\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2078,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2074,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2072,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 p-4 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium text-gray-900\",\n              children: editingTrip.route_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2085,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [editingTrip.origin_name, \" \\u2192 \", editingTrip.destination_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2086,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2084,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Departure DateTime\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2094,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"datetime-local\",\n                value: editForm.departure_datetime,\n                onChange: e => setEditForm(prev => ({\n                  ...prev,\n                  departure_datetime: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2097,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2093,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Estimated Arrival DateTime\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2106,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"datetime-local\",\n                value: editForm.estimated_arrival_datetime,\n                onChange: e => setEditForm(prev => ({\n                  ...prev,\n                  estimated_arrival_datetime: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2109,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2105,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Base Price (RM)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2118,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                step: \"0.01\",\n                min: \"0\",\n                value: editForm.base_price,\n                onChange: e => setEditForm(prev => ({\n                  ...prev,\n                  base_price: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2121,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2117,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2132,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: editForm.status,\n                onChange: e => setEditForm(prev => ({\n                  ...prev,\n                  status: e.target.value\n                })),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"scheduled\",\n                  children: \"Scheduled\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2140,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"boarding\",\n                  children: \"Boarding\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2141,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"in_transit\",\n                  children: \"In Transit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2142,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"arrived\",\n                  children: \"Arrived\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2143,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"cancelled\",\n                  children: \"Cancelled\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2144,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"delayed\",\n                  children: \"Delayed\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2145,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2135,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2131,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2092,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Special Notes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2151,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: editForm.special_notes,\n              onChange: e => setEditForm(prev => ({\n                ...prev,\n                special_notes: e.target.value\n              })),\n              rows: 3,\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              placeholder: \"Any special notes or instructions for this trip...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2154,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2150,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2082,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-3 mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary flex-1\",\n            onClick: handleUpdateTrip,\n            disabled: updatingTrip,\n            children: updatingTrip ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2173,\n                columnNumber: 21\n              }, this), \"Updating...\"]\n            }, void 0, true) : 'Update Trip'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2166,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-secondary flex-1\",\n            onClick: () => setShowEditModal(false),\n            disabled: updatingTrip,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2178,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2165,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2071,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2070,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1293,\n    columnNumber: 5\n  }, this);\n};\n\n// Analytics Component\n_s3(ScheduleManagement, \"CJ3OtjPMxyG2ZNUmN7YPPdsxobs=\", false, function () {\n  return [useApp];\n});\n_c3 = ScheduleManagement;\nconst Analytics = () => {\n  _s4();\n  var _analyticsData$totalR, _analyticsData$totalP;\n  const [analyticsData, setAnalyticsData] = useState(null);\n  const [routePerformance, setRoutePerformance] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Add state for trip details modal\n  const [showTripDetailsModal, setShowTripDetailsModal] = useState(false);\n  const [selectedTrip, setSelectedTrip] = useState(null);\n  const [loadingTripDetails, setLoadingTripDetails] = useState(false);\n\n  // Helper function to get status color\n  const getStatusColor = status => {\n    switch (status === null || status === void 0 ? void 0 : status.toLowerCase()) {\n      case 'scheduled':\n        return 'bg-blue-100 text-blue-800';\n      case 'boarding':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'in_transit':\n        return 'bg-green-100 text-green-800';\n      case 'arrived':\n        return 'bg-purple-100 text-purple-800';\n      case 'cancelled':\n        return 'bg-red-100 text-red-800';\n      case 'delayed':\n        return 'bg-orange-100 text-orange-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  // Helper functions for date formatting\n  const formatTime = datetime => {\n    if (!datetime) return '';\n    try {\n      return new Date(datetime).toLocaleTimeString('en-US', {\n        hour: '2-digit',\n        minute: '2-digit',\n        hour12: true\n      });\n    } catch (error) {\n      console.error('Error formatting time:', error);\n      return '';\n    }\n  };\n  const formatDate = datetime => {\n    if (!datetime) return '';\n    try {\n      return new Date(datetime).toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      });\n    } catch (error) {\n      console.error('Error formatting date:', error);\n      return '';\n    }\n  };\n  useEffect(() => {\n    const loadAnalyticsData = async () => {\n      setLoading(true);\n      try {\n        // 加载总体分析数据\n        const statsResponse = await getAnalyticsData();\n        if (statsResponse.success) {\n          setAnalyticsData(statsResponse.data);\n        } else {\n          setError('Failed to load analytics data');\n        }\n\n        // 加载路线表现数据\n        const routeResponse = await getRouteAnalytics();\n        if (routeResponse.success) {\n          setRoutePerformance(routeResponse.data);\n        } else {\n          setError('Failed to load route performance data');\n        }\n      } catch (err) {\n        console.error('Error loading analytics:', err);\n        setError(handleApiError(err));\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadAnalyticsData();\n  }, []);\n\n  // Handle route click to show details\n  const handleRouteClick = async route => {\n    console.log(\"Route clicked:\", route);\n    try {\n      // 创建一个包含路线数据的对象，模拟行程详情结构\n      const routeDetails = {\n        id: route.id || Math.random().toString(36).substr(2, 9),\n        route_name: route.route_name || 'Unknown Route',\n        trip_number: `Route-${(route.route_name || 'Unknown').replace(/\\s+/g, '-')}`,\n        status: 'active',\n        origin_name: route.route_name ? route.route_name.split(' - ')[0] : 'Unknown',\n        destination_name: route.route_name ? route.route_name.split(' - ')[1] || '' : '',\n        origin_city: route.route_name ? route.route_name.split(' - ')[0] : 'Unknown',\n        destination_city: route.route_name ? route.route_name.split(' - ')[1] || '' : '',\n        base_price: route.total_revenue && route.trips_scheduled ? route.total_revenue / route.trips_scheduled : 0,\n        total_seats: 0,\n        available_seats: 0,\n        occupied_seats: route.total_passengers || 0,\n        occupancy_percentage: route.avg_occupancy || 0,\n        departure_datetime: new Date().toISOString(),\n        estimated_arrival_datetime: new Date(new Date().getTime() + 3600000).toISOString(),\n        vehicle_model: 'Various',\n        vehicle_number: 'Multiple',\n        license_plate: '-',\n        vehicle_type: 'Various',\n        // 添加路线特有的数据\n        trips_scheduled: route.trips_scheduled || 0,\n        total_passengers: route.total_passengers || 0,\n        total_revenue: route.total_revenue || 0,\n        avg_occupancy: route.avg_occupancy || 0,\n        // 空数组，避免undefined错误\n        stops: [],\n        seat_pricing: [],\n        pricing_rules: [],\n        // 添加行程列表，初始为空\n        trips: []\n      };\n\n      // 获取该路线下的所有行程\n      try {\n        setLoadingTripDetails(true);\n\n        // 获取当前日期作为默认参数\n        const today = new Date();\n        // 获取30天前的日期作为开始日期\n        const startDate = new Date(today);\n        startDate.setDate(today.getDate() - 30);\n        // 获取30天后的日期作为结束日期\n        const endDate = new Date(today);\n        endDate.setDate(today.getDate() + 30);\n\n        // 格式化日期为ISO字符串\n        const startDateStr = startDate.toISOString().split('T')[0];\n        const endDateStr = endDate.toISOString().split('T')[0];\n        console.log(`Fetching trips from ${startDateStr} to ${endDateStr}`);\n        const response = await getSchedules(startDateStr, endDateStr);\n        if (response.success) {\n          // 过滤出与当前路线名称匹配的行程\n          const routeTrips = response.data.filter(trip => trip.route_name === route.route_name);\n\n          // 添加行程列表到路线详情\n          routeDetails.trips = routeTrips;\n          console.log(\"Found trips for route:\", routeTrips.length);\n        } else {\n          console.error(\"Failed to fetch trips:\", response.message);\n        }\n      } catch (error) {\n        console.error(\"Error fetching trips for route:\", error);\n        // 继续执行，即使获取行程失败\n      } finally {\n        setLoadingTripDetails(false);\n      }\n\n      // 设置选中的行程并显示模态框\n      setSelectedTrip(routeDetails);\n      setShowTripDetailsModal(true);\n    } catch (error) {\n      console.error(\"Error showing route details:\", error);\n      alert('Failed to show route details');\n    }\n  };\n\n  // Handle trip click\n  const handleTripClick = async tripId => {\n    setLoadingTripDetails(true);\n    try {\n      const response = await getTripDetails(tripId);\n      if (response.success) {\n        setSelectedTrip(response.data);\n        setShowTripDetailsModal(true);\n      } else {\n        alert('Failed to load trip details');\n      }\n    } catch (error) {\n      console.error('Error loading trip details:', error);\n      alert('Error loading trip details');\n    } finally {\n      setLoadingTripDetails(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center py-20\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2394,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-4 text-gray-600\",\n          children: \"Loading analytics data...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2395,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2393,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2392,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card bg-red-50 border-red-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center text-red-600 mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"w-5 h-5 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2405,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-medium\",\n          children: \"Error loading analytics\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2406,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2404,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-600\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2408,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"mt-4 px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-md\",\n        onClick: () => window.location.reload(),\n        children: \"Retry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2409,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2403,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold text-gray-900\",\n      children: \"Analytics & Reports\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2421,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-3 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Total Revenue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2427,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold text-green-600\",\n              children: [\"RM \", (analyticsData === null || analyticsData === void 0 ? void 0 : (_analyticsData$totalR = analyticsData.totalRevenue) === null || _analyticsData$totalR === void 0 ? void 0 : _analyticsData$totalR.toLocaleString()) || '0']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2428,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2426,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TrendingUp, {\n            className: \"w-8 h-8 text-green-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2432,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2425,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2424,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Average Occupancy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2439,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold text-blue-600\",\n              children: [typeof (analyticsData === null || analyticsData === void 0 ? void 0 : analyticsData.averageOccupancy) === 'number' ? analyticsData.averageOccupancy.toFixed(1) : '0', \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2440,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2438,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Users, {\n            className: \"w-8 h-8 text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2444,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2437,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2436,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Total Passengers\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2451,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold text-purple-600\",\n              children: (analyticsData === null || analyticsData === void 0 ? void 0 : (_analyticsData$totalP = analyticsData.totalPassengers) === null || _analyticsData$totalP === void 0 ? void 0 : _analyticsData$totalP.toLocaleString()) || '0'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2452,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2450,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Users, {\n            className: \"w-8 h-8 text-purple-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2456,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2449,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2448,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2423,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold mb-4\",\n        children: \"Route Performance\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2462,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: routePerformance.length > 0 ? routePerformance.map(route => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors\",\n          onClick: () => handleRouteClick(route),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-medium text-gray-900\",\n                children: route.route_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2472,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600\",\n                children: [route.trips_scheduled, \" trips scheduled\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2473,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2471,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-right space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm font-medium text-green-600\",\n                children: [\"RM \", parseFloat(route.total_revenue || 0).toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2476,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-20 bg-gray-200 rounded-full h-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"h-2 rounded-full transition-all\",\n                    style: {\n                      width: `${Math.min(route.avg_occupancy || 0, 100)}%`,\n                      backgroundColor: (route.avg_occupancy || 0) > 80 ? '#EF4444' : (route.avg_occupancy || 0) > 60 ? '#F59E0B' : '#10B981'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2481,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2480,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs font-medium\",\n                  children: [typeof route.avg_occupancy === 'number' ? route.avg_occupancy.toFixed(0) : '0', \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2489,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2479,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2475,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2470,\n            columnNumber: 17\n          }, this)\n        }, route.route_name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2465,\n          columnNumber: 13\n        }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-8 text-gray-500\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No route performance data available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2498,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2497,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2463,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2461,\n      columnNumber: 7\n    }, this), showTripDetailsModal && selectedTrip && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold\",\n            children: selectedTrip.trips_scheduled ? 'Route Details' : 'Trip Details'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2509,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowTripDetailsModal(false),\n            className: \"text-gray-400 hover:text-gray-600\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2516,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2512,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2508,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-4 rounded-lg mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-lg\",\n                children: selectedTrip.route_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2524,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: selectedTrip.trip_number\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2525,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2523,\n              columnNumber: 17\n            }, this), selectedTrip.trips_scheduled ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800\",\n              children: \"ROUTE OVERVIEW\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2528,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(selectedTrip.status)}`,\n              children: selectedTrip.status.replace('_', ' ').toUpperCase()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2532,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2522,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2521,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium text-gray-700 border-b pb-2\",\n              children: selectedTrip.trips_scheduled ? 'Route Information' : 'Trip Information'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2543,\n              columnNumber: 17\n            }, this), selectedTrip.trips_scheduled ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"Route\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2550,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium\",\n                  children: [selectedTrip.origin_name, \" \\u2192 \", selectedTrip.destination_name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2551,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2549,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"Scheduled Trips\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2555,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium\",\n                  children: [selectedTrip.trips_scheduled, \" trips\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2556,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2554,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"Total Passengers\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2560,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium\",\n                  children: [selectedTrip.total_passengers || 0, \" passengers\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2561,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2559,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-2 gap-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: \"Departure\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2568,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-medium\",\n                    children: formatDate(selectedTrip.departure_datetime)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2569,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm\",\n                    children: formatTime(selectedTrip.departure_datetime)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2570,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2567,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: \"Arrival (Est.)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2574,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-medium\",\n                    children: formatDate(selectedTrip.estimated_arrival_datetime)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2575,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm\",\n                    children: formatTime(selectedTrip.estimated_arrival_datetime)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2576,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2573,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2566,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"Route\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2581,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium\",\n                  children: [selectedTrip.origin_name, \" \\u2192 \", selectedTrip.destination_name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2582,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-600\",\n                  children: [selectedTrip.origin_city, \" to \", selectedTrip.destination_city]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2583,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2580,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"Vehicle\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2587,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium\",\n                  children: selectedTrip.vehicle_model\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2588,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-600\",\n                  children: [selectedTrip.vehicle_number, \" | \", selectedTrip.license_plate, \" | \", selectedTrip.vehicle_type]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2589,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2586,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2542,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium text-gray-700 border-b pb-2\",\n              children: \"Occupancy & Pricing\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2599,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: selectedTrip.trips_scheduled ? 'Average Occupancy' : 'Seats'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2603,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium\",\n                  children: selectedTrip.trips_scheduled ? `${selectedTrip.avg_occupancy || 0}%` : `${selectedTrip.occupied_seats} / ${selectedTrip.total_seats} occupied`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2606,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2602,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-20 bg-gray-200 rounded-full h-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"h-2 rounded-full transition-all\",\n                    style: {\n                      width: `${Math.min(selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0, 100)}%`,\n                      backgroundColor: (selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0) > 80 ? '#EF4444' : (selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0) > 60 ? '#F59E0B' : '#10B981'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2616,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2615,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm font-medium\",\n                  children: [selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2625,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2614,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2601,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: selectedTrip.trips_scheduled ? 'Total Revenue' : 'Base Price'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2632,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-medium\",\n                children: [\"RM \", selectedTrip.trips_scheduled ? selectedTrip.total_revenue || 0 : selectedTrip.base_price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2635,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2631,\n              columnNumber: 13\n            }, this), !selectedTrip.trips_scheduled && selectedTrip.seat_pricing && selectedTrip.seat_pricing.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: \"Seat Type Pricing\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2644,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-1 mt-1\",\n                children: selectedTrip.seat_pricing.map((pricing, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: pricing.seat_type_id.charAt(0).toUpperCase() + pricing.seat_type_id.slice(1)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2648,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: [pricing.price_multiplier, \"x\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2649,\n                    columnNumber: 27\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2647,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2645,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2643,\n              columnNumber: 13\n            }, this), !selectedTrip.trips_scheduled && selectedTrip.pricing_rules && selectedTrip.pricing_rules.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: \"Pricing Rules\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2658,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-1 mt-1\",\n                children: selectedTrip.pricing_rules.map((rule, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: rule.rule_name.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2662,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: [rule.rule_type === 'discount' ? '-' : '+', rule.rule_value, \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2663,\n                    columnNumber: 27\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2661,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2659,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2657,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2598,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2540,\n          columnNumber: 13\n        }, this), !selectedTrip.trips_scheduled && selectedTrip.stops && selectedTrip.stops.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium text-gray-700 border-b pb-2 mb-4\",\n            children: \"Route Stops\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2677,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: selectedTrip.stops.map((stop, index) => {\n              const isOrigin = index === 0;\n              const isDestination = index === selectedTrip.stops.length - 1;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"relative\",\n                  children: [!isDestination && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"h-full w-0.5 bg-blue-500 absolute left-2 top-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2688,\n                    columnNumber: 29\n                  }, this), isOrigin || isDestination ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"h-4 w-4 rounded-full bg-blue-500 mt-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2691,\n                    columnNumber: 29\n                  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"h-4 w-4 rounded-full border-2 border-blue-500 bg-white mt-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2693,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2686,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ml-4 flex-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex justify-between\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"font-medium\",\n                        children: [stop.location_name, isOrigin && ' (Origin)', isDestination && ' (Destination)']\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2700,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-sm text-gray-600\",\n                        children: stop.location_city\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2705,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2699,\n                      columnNumber: 29\n                    }, this), !isOrigin && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-right\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-sm text-gray-500\",\n                        children: [\"+\", Math.floor(stop.arrival_offset_minutes / 60), \" hrs\", stop.arrival_offset_minutes % 60 > 0 ? ` ${stop.arrival_offset_minutes % 60} mins` : '']\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2710,\n                        columnNumber: 33\n                      }, this), stop.price_from_origin > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-sm font-medium\",\n                        children: [\"RM \", stop.price_from_origin]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2715,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2709,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2698,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2697,\n                  columnNumber: 25\n                }, this)]\n              }, stop.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2685,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2679,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2676,\n          columnNumber: 15\n        }, this), selectedTrip.trips_scheduled && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium text-gray-700 border-b pb-2 mb-4\",\n            children: \"Performance Data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2731,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 bg-gray-50 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-500 mb-1\",\n                children: \"Average Occupancy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2735,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xl font-semibold\",\n                  children: [selectedTrip.avg_occupancy || 0, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2737,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full bg-gray-200 rounded-full h-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"h-2 rounded-full transition-all\",\n                    style: {\n                      width: `${Math.min(selectedTrip.avg_occupancy || 0, 100)}%`,\n                      backgroundColor: (selectedTrip.avg_occupancy || 0) > 80 ? '#10B981' : (selectedTrip.avg_occupancy || 0) > 60 ? '#F59E0B' : '#EF4444'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2739,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2738,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2736,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2734,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 bg-gray-50 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-500 mb-1\",\n                children: \"Total Revenue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2752,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xl font-semibold text-green-600\",\n                children: [\"RM \", selectedTrip.total_revenue || 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2753,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2751,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 bg-gray-50 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-500 mb-1\",\n                children: \"Total Passengers\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2757,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xl font-semibold\",\n                children: selectedTrip.total_passengers || 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2758,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2756,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 bg-gray-50 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-500 mb-1\",\n                children: \"Average Price Per Trip\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2762,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xl font-semibold\",\n                children: [\"RM \", selectedTrip.trips_scheduled ? (selectedTrip.total_revenue / selectedTrip.trips_scheduled).toFixed(2) : 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2763,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2761,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2733,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2730,\n          columnNumber: 15\n        }, this), selectedTrip.trips_scheduled && selectedTrip.trips && selectedTrip.trips.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium text-gray-700 border-b pb-2 mb-4\",\n            children: \"Scheduled Trips\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2775,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overflow-hidden border border-gray-200 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"min-w-full divide-y divide-gray-200\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                className: \"bg-gray-50\",\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                    children: \"Trip Number\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2781,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                    children: \"Departure\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2784,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                    children: \"Vehicle\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2787,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                    children: \"Occupancy\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2790,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2793,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                    children: \"Actions\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2796,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2780,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2779,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                className: \"bg-white divide-y divide-gray-200\",\n                children: selectedTrip.trips.map(trip => {\n                  var _trip$status2;\n                  const occupiedSeats = trip.occupied_seats || trip.total_seats - trip.available_seats || 0;\n                  const occupancyPercentage = trip.occupancy_percentage || (trip.total_seats ? Math.round(occupiedSeats / trip.total_seats * 100) : 0);\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"hover:bg-gray-50\",\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900\",\n                      children: trip.trip_number\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2809,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 whitespace-nowrap text-sm text-gray-500\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        children: formatDate(trip.departure_datetime)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2813,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs\",\n                        children: formatTime(trip.departure_datetime)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2814,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2812,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 whitespace-nowrap text-sm text-gray-500\",\n                      children: trip.vehicle_number || trip.license_plate || 'N/A'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2816,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 whitespace-nowrap\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-16 bg-gray-200 rounded-full h-2 mr-2\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"h-2 rounded-full transition-all\",\n                            style: {\n                              width: `${Math.min(occupancyPercentage, 100)}%`,\n                              backgroundColor: occupancyPercentage > 80 ? '#EF4444' : occupancyPercentage > 60 ? '#F59E0B' : '#10B981'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2822,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2821,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-xs font-medium\",\n                          children: [occupancyPercentage, \"%\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2831,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2820,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2819,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 whitespace-nowrap\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: `px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(trip.status)}`,\n                        children: ((_trip$status2 = trip.status) === null || _trip$status2 === void 0 ? void 0 : _trip$status2.replace('_', ' ').toUpperCase()) || 'N/A'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2837,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2836,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 whitespace-nowrap text-sm text-gray-500\",\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => handleTripClick(trip.id),\n                        className: \"text-blue-600 hover:text-blue-800\",\n                        children: \"View\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2842,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2841,\n                      columnNumber: 29\n                    }, this)]\n                  }, trip.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2808,\n                    columnNumber: 27\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2801,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2778,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2777,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2774,\n          columnNumber: 15\n        }, this), selectedTrip.trips_scheduled && selectedTrip.trips && selectedTrip.trips.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6 p-8 bg-gray-50 rounded-lg text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500\",\n            children: \"No trips found for this route\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2860,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2859,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3 pt-4 border-t\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-secondary\",\n            onClick: () => setShowTripDetailsModal(false),\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2866,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2865,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2507,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2506,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2420,\n    columnNumber: 5\n  }, this);\n};\n\n// System Settings Component has been removed\n\n// Customer Service Component for Walk-in Ticket Sales\n_s4(Analytics, \"UuAmlBKbMqWzweMnRLDkHSRdW5o=\");\n_c4 = Analytics;\nconst CustomerService = () => {\n  _s5();\n  const {\n    locations,\n    systemDate\n  } = useApp();\n  const [currentStep, setCurrentStep] = useState(1); // 1: Search, 2: Select Trip, 3: Customer Info, 4: Payment\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedTrip, setSelectedTrip] = useState(null);\n  const [customerInfo, setCustomerInfo] = useState({\n    fullName: '',\n    phone: '',\n    email: '',\n    icNumber: '',\n    passengerCount: 1\n  });\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [error, setError] = useState(null);\n\n  // 添加热门行程\n  const [popularTrip, setPopularTrip] = useState({\n    id: '1',\n    route: {\n      name: 'KL - Johor Bahru Express'\n    },\n    origin: 'Kuala Lumpur',\n    destination: 'Johor Bahru',\n    departureTime: '08:00 AM',\n    price: 'RM 45.00'\n  });\n  const [searchForm, setSearchForm] = useState({\n    origin: '',\n    destination: '',\n    date: systemDate,\n    isRoundTrip: false,\n    returnDate: format(addDays(new Date(systemDate), 1), 'yyyy-MM-dd')\n  });\n\n  // 添加处理热门行程选择的函数\n  const handlePopularTripSelect = trip => {\n    // 根据热门行程设置表单值\n    const fromLoc = locations.find(loc => loc.city === trip.origin);\n    const toLoc = locations.find(loc => loc.city === trip.destination);\n    if (fromLoc) setSearchForm(prev => ({\n      ...prev,\n      origin: fromLoc.id\n    }));\n    if (toLoc) setSearchForm(prev => ({\n      ...prev,\n      destination: toLoc.id\n    }));\n\n    // 自动搜索\n    handleSearch();\n  };\n  const handleSearch = async () => {\n    setIsProcessing(true);\n    try {\n      const searchParams = {\n        origin: searchForm.origin,\n        destination: searchForm.destination,\n        departureDate: searchForm.date,\n        passengers: customerInfo.passengerCount\n      };\n      const response = await searchTrips(searchParams);\n      if (response.success) {\n        setSearchResults(response.data);\n        setCurrentStep(2);\n      } else {\n        setError('Failed to search trips. Please try again.');\n      }\n    } catch (err) {\n      console.error('Search error:', err);\n      setError(handleApiError(err));\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n  const handleTripSelect = trip => {\n    setSelectedTrip(trip);\n    setCurrentStep(3);\n  };\n  const handleCustomerSubmit = () => {\n    if (customerInfo.fullName && customerInfo.phone) {\n      setCurrentStep(4);\n    }\n  };\n  const handlePaymentComplete = () => {\n    // Process booking\n    const bookingRef = `TBS${format(new Date(systemDate), 'yyyyMMddHHmm')}`;\n    alert(`Booking confirmed! Reference: ${bookingRef}`);\n\n    // Reset form\n    setCurrentStep(1);\n    setSearchResults([]);\n    setSelectedTrip(null);\n    setCustomerInfo({\n      fullName: '',\n      phone: '',\n      email: '',\n      icNumber: '',\n      passengerCount: 1\n    });\n  };\n  const resetSearch = () => {\n    setCurrentStep(1);\n    setSearchResults([]);\n    setSelectedTrip(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-red-50 border border-red-200 rounded-lg p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-shrink-0\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-5 w-5 text-red-400\",\n            viewBox: \"0 0 20 20\",\n            fill: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2993,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2992,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2991,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ml-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-red-700\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2997,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setError(null),\n            className: \"mt-2 text-red-800 underline hover:text-red-900 text-sm\",\n            children: \"Dismiss\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2998,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2996,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2990,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2989,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-900\",\n          children: \"Customer Service Portal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3012,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Help walk-in customers purchase tickets quickly and efficiently\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3013,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3011,\n        columnNumber: 9\n      }, this), currentStep > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: resetSearch,\n        className: \"btn-secondary\",\n        children: \"New Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3016,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3010,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: ['Search Trips', 'Select Trip', 'Customer Info', 'Payment'].map((step, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${currentStep > index + 1 ? 'bg-blue-500 text-white' : currentStep === index + 1 ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-600'}`,\n            children: currentStep > index + 1 ? '✓' : index + 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3027,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `ml-2 text-sm font-medium ${currentStep >= index + 1 ? 'text-gray-900' : 'text-gray-500'}`,\n            children: step\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3034,\n            columnNumber: 15\n          }, this), index < 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-8 h-0.5 mx-4 ${currentStep > index + 1 ? 'bg-blue-500' : 'bg-gray-200'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3040,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3026,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3024,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3023,\n      columnNumber: 7\n    }, this), currentStep === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-3 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:col-span-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold mb-4\",\n            children: \"Search Available Trips\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3054,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"From\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3058,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: searchForm.origin,\n                onChange: e => setSearchForm(prev => ({\n                  ...prev,\n                  origin: e.target.value\n                })),\n                className: \"input w-full\",\n                required: true,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select departure location\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3065,\n                  columnNumber: 21\n                }, this), locations.map(location => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: location.id,\n                  children: [location.name, \", \", location.city]\n                }, location.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3067,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3059,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3057,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"To\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3075,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: searchForm.destination,\n                onChange: e => setSearchForm(prev => ({\n                  ...prev,\n                  destination: e.target.value\n                })),\n                className: \"input w-full\",\n                required: true,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select arrival location\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3082,\n                  columnNumber: 21\n                }, this), locations.map(location => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: location.id,\n                  children: [location.name, \", \", location.city]\n                }, location.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3084,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3076,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3074,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3056,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3094,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: searchForm.date,\n                onChange: e => setSearchForm(prev => ({\n                  ...prev,\n                  date: e.target.value\n                })),\n                className: \"input w-full\",\n                min: format(new Date(), 'yyyy-MM-dd')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3095,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3093,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Passengers\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3105,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: customerInfo.passengerCount,\n                onChange: e => setCustomerInfo(prev => ({\n                  ...prev,\n                  passengerCount: parseInt(e.target.value)\n                })),\n                className: \"input w-full\",\n                children: [1, 2, 3, 4, 5, 6, 7, 8].map(num => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: num,\n                  children: [num, \" \", num === 1 ? 'passenger' : 'passengers']\n                }, num, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3112,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3106,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3104,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3092,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSearch,\n            disabled: isProcessing || !searchForm.origin || !searchForm.destination,\n            className: \"btn-primary w-full flex items-center justify-center\",\n            children: isProcessing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"spinner-sm mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3127,\n                columnNumber: 21\n              }, this), \"Searching...\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Search, {\n                className: \"w-4 h-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3132,\n                columnNumber: 21\n              }, this), \"Search Trips\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3120,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3053,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3052,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold mb-4\",\n            children: \"Popular Trip\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3143,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(PopularTrip, {\n            trip: popularTrip,\n            onSelect: handlePopularTripSelect\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3144,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3142,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3141,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3051,\n      columnNumber: 9\n    }, this), currentStep === 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold mb-4\",\n        children: [\"Available Trips (\", searchResults.length, \" found)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3156,\n        columnNumber: 11\n      }, this), searchResults.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8 text-gray-500\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No trips found for the selected route and date.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3160,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: resetSearch,\n          className: \"btn-primary mt-4\",\n          children: \"Try Another Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3161,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3159,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: searchResults.map(trip => {\n          var _locations$find3, _locations$find4;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border border-gray-200 rounded-lg p-4 hover:border-blue-300 cursor-pointer\",\n            onClick: () => handleTripSelect(trip),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-semibold text-lg\",\n                      children: trip.route.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3172,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-sm text-gray-600\",\n                      children: [(_locations$find3 = locations.find(l => l.id === trip.route.originId)) === null || _locations$find3 === void 0 ? void 0 : _locations$find3.city, \" \\u2192\", (_locations$find4 = locations.find(l => l.id === trip.route.destinationId)) === null || _locations$find4 === void 0 ? void 0 : _locations$find4.city]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3173,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3171,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-semibold\",\n                      children: trip.departureDatetime.toLocaleTimeString([], {\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3179,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-sm text-gray-600\",\n                      children: \"Departure\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3180,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3178,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-semibold\",\n                      children: trip.arrivalDatetime.toLocaleTimeString([], {\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3183,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-sm text-gray-600\",\n                      children: \"Arrival\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3184,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3182,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3170,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3169,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-right\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-blue-600\",\n                  children: [\"RM \", trip.route.basePrice]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3189,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-600\",\n                  children: [trip.availableSeats, \" seats available\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3190,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `text-xs px-2 py-1 rounded-full ${calculateOccupancy(trip) > 80 ? 'bg-red-100 text-red-600' : calculateOccupancy(trip) > 60 ? 'bg-yellow-100 text-yellow-600' : 'bg-green-100 text-green-600'}`,\n                  children: [calculateOccupancy(trip), \"% occupied\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3191,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3188,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3168,\n              columnNumber: 19\n            }, this)\n          }, trip.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3166,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3164,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3155,\n      columnNumber: 9\n    }, this), currentStep === 3 && selectedTrip && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold mb-4\",\n        children: \"Customer Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3210,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-50 rounded-lg p-4 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"font-semibold mb-2\",\n          children: \"Selected Trip\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3214,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-medium\",\n              children: selectedTrip.route.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3217,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600\",\n              children: [selectedTrip.departureDatetime.toLocaleDateString(), \" at \", selectedTrip.departureDatetime.toLocaleTimeString([], {\n                hour: '2-digit',\n                minute: '2-digit'\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3218,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3216,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-lg font-bold text-blue-600\",\n              children: [\"RM \", selectedTrip.route.basePrice * customerInfo.passengerCount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3223,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600\",\n              children: [customerInfo.passengerCount, \" passenger\", customerInfo.passengerCount > 1 ? 's' : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3224,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3222,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3215,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3213,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label\",\n            children: \"Full Name *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3232,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: customerInfo.fullName,\n            onChange: e => setCustomerInfo(prev => ({\n              ...prev,\n              fullName: e.target.value\n            })),\n            className: \"input w-full\",\n            placeholder: \"Enter customer's full name\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3233,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3231,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label\",\n            children: \"Phone Number *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3244,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"tel\",\n            value: customerInfo.phone,\n            onChange: e => setCustomerInfo(prev => ({\n              ...prev,\n              phone: e.target.value\n            })),\n            className: \"input w-full\",\n            placeholder: \"+60123456789\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3245,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3243,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label\",\n            children: \"Email Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3256,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            value: customerInfo.email,\n            onChange: e => setCustomerInfo(prev => ({\n              ...prev,\n              email: e.target.value\n            })),\n            className: \"input w-full\",\n            placeholder: \"customer@email.com\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3257,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3255,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label\",\n            children: \"IC Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3267,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: customerInfo.icNumber,\n            onChange: e => setCustomerInfo(prev => ({\n              ...prev,\n              icNumber: e.target.value\n            })),\n            className: \"input w-full\",\n            placeholder: \"123456-78-9012\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3268,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3266,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3230,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentStep(2),\n          className: \"btn-secondary\",\n          children: \"Back to Trip Selection\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3279,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCustomerSubmit,\n          disabled: !customerInfo.fullName || !customerInfo.phone,\n          className: \"btn-primary\",\n          children: \"Continue to Payment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3282,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3278,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3209,\n      columnNumber: 9\n    }, this), currentStep === 4 && selectedTrip && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold mb-4\",\n        children: \"Payment & Confirmation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3296,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-50 rounded-lg p-6 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"font-semibold mb-4\",\n          children: \"Booking Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3300,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Route:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3304,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: selectedTrip.route.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3305,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3303,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Date & Time:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3308,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: [selectedTrip.departureDatetime.toLocaleDateString(), \" at \", selectedTrip.departureDatetime.toLocaleTimeString([], {\n                hour: '2-digit',\n                minute: '2-digit'\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3309,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3307,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Passenger:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3314,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: customerInfo.fullName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3315,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3313,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Phone:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3318,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: customerInfo.phone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3319,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3317,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Passengers:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3322,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: customerInfo.passengerCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3323,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3321,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3325,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between text-lg font-bold\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Total Amount:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3327,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-blue-600\",\n              children: [\"RM \", selectedTrip.route.basePrice * customerInfo.passengerCount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3328,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3326,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3302,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3299,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"font-semibold mb-3\",\n          children: \"Payment Method\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3335,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"border-2 border-blue-500 bg-blue-50 text-blue-700 rounded-lg p-4 text-center\",\n            children: \"\\uD83D\\uDCB3 Card Payment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3337,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"border-2 border-gray-200 hover:border-gray-300 rounded-lg p-4 text-center\",\n            children: \"\\uD83D\\uDCB0 Cash Payment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3340,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"border-2 border-gray-200 hover:border-gray-300 rounded-lg p-4 text-center\",\n            children: \"\\uD83D\\uDCF1 E-Wallet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3343,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3336,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3334,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentStep(3),\n          className: \"btn-secondary\",\n          children: \"Back to Customer Info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3350,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handlePaymentComplete,\n          className: \"btn-primary\",\n          children: \"Confirm Payment & Issue Ticket\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3353,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3349,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3295,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2986,\n    columnNumber: 5\n  }, this);\n};\n\n// Route Management Component\n_s5(CustomerService, \"UPpPyemQo7YQUDa6y32QI5gIYP0=\", false, function () {\n  return [useApp];\n});\n_c5 = CustomerService;\nconst RouteManagement = ({\n  routes = [],\n  onRefresh\n}) => {\n  _s6();\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [locations, setLocations] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [createForm, setCreateForm] = useState({\n    name: '',\n    base_price: 0,\n    stops: []\n  });\n\n  // Load locations for route creation\n  useEffect(() => {\n    const loadLocations = async () => {\n      try {\n        const response = await getLocationsForRoutes();\n        if (response.success) {\n          setLocations(response.data);\n        }\n      } catch (error) {\n        console.error('Error loading locations:', error);\n      }\n    };\n    loadLocations();\n  }, []);\n  const handleAddStop = () => {\n    setCreateForm(prev => ({\n      ...prev,\n      stops: [...prev.stops, {\n        location_id: '',\n        is_origin: prev.stops.length === 0,\n        // 第一个站点默认为起点\n        is_destination: false,\n        arrival_offset_minutes: prev.stops.length === 0 ? 0 : 30,\n        // 起点的到达时间偏移为0\n        departure_offset_minutes: 5,\n        price_from_origin: 0\n      }]\n    }));\n  };\n  const handleRemoveStop = index => {\n    setCreateForm(prev => {\n      const newStops = prev.stops.filter((_, i) => i !== index);\n\n      // 如果删除了起点，将第一个站点设为新的起点\n      if (prev.stops[index].is_origin && newStops.length > 0) {\n        newStops[0].is_origin = true;\n        newStops[0].arrival_offset_minutes = 0;\n      }\n\n      // 如果删除了终点，将最后一个站点设为新的终点\n      if (prev.stops[index].is_destination && newStops.length > 0) {\n        newStops[newStops.length - 1].is_destination = true;\n      }\n      return {\n        ...prev,\n        stops: newStops\n      };\n    });\n  };\n  const handleStopChange = (index, field, value) => {\n    setCreateForm(prev => {\n      const newStops = [...prev.stops];\n\n      // 特殊处理起点和终点的设置\n      if (field === 'is_origin' && value === true) {\n        // 将其他站点的is_origin设为false\n        newStops.forEach((stop, i) => {\n          if (i !== index) stop.is_origin = false;\n        });\n        // 起点的到达时间偏移设为0\n        newStops[index].arrival_offset_minutes = 0;\n      } else if (field === 'is_destination' && value === true) {\n        // 将其他站点的is_destination设为false\n        newStops.forEach((stop, i) => {\n          if (i !== index) stop.is_destination = false;\n        });\n      }\n      newStops[index] = {\n        ...newStops[index],\n        [field]: value\n      };\n      return {\n        ...prev,\n        stops: newStops\n      };\n    });\n  };\n  const handleCreateRoute = async () => {\n    // 验证表单\n    if (createForm.name.trim() === '') {\n      alert('请输入路线名称');\n      return;\n    }\n    if (createForm.stops.length < 2) {\n      alert('路线至少需要两个站点');\n      return;\n    }\n\n    // 确保有起点和终点\n    const hasOrigin = createForm.stops.some(stop => stop.is_origin);\n    const hasDestination = createForm.stops.some(stop => stop.is_destination);\n    if (!hasOrigin) {\n      alert('请设置一个起点站');\n      return;\n    }\n    if (!hasDestination) {\n      alert('请设置一个终点站');\n      return;\n    }\n\n    // 确保所有站点都有选择位置\n    const allLocationsSelected = createForm.stops.every(stop => stop.location_id);\n    if (!allLocationsSelected) {\n      alert('请为所有站点选择位置');\n      return;\n    }\n\n    // 准备提交的数据\n    const routeData = {\n      name: createForm.name,\n      base_price: createForm.base_price,\n      stops: createForm.stops.map(stop => ({\n        ...stop,\n        arrival_offset_minutes: parseInt(stop.arrival_offset_minutes),\n        departure_offset_minutes: parseInt(stop.departure_offset_minutes),\n        price_from_origin: parseFloat(stop.price_from_origin)\n      }))\n    };\n\n    // 获取起点和终点ID，用于兼容旧的API\n    const originStop = routeData.stops.find(stop => stop.is_origin);\n    const destinationStop = routeData.stops.find(stop => stop.is_destination);\n    if (originStop && destinationStop) {\n      routeData.origin_id = originStop.location_id;\n      routeData.destination_id = destinationStop.location_id;\n    }\n    setLoading(true);\n    try {\n      const response = await createRoute(routeData);\n      if (response.success) {\n        setShowCreateModal(false);\n        setCreateForm({\n          name: '',\n          base_price: 0,\n          stops: []\n        });\n        onRefresh();\n        alert('路线创建成功！');\n      } else {\n        alert('创建路线失败: ' + (response.message || '未知错误'));\n      }\n    } catch (error) {\n      console.error('创建路线时出错:', error);\n      alert('创建路线时出错');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 自动生成路线名称\n  const generateRouteName = () => {\n    const originStop = createForm.stops.find(stop => stop.is_origin);\n    const destinationStop = createForm.stops.find(stop => stop.is_destination);\n    if (!originStop || !destinationStop) return;\n    const originLocation = locations.find(loc => loc.id === originStop.location_id);\n    const destinationLocation = locations.find(loc => loc.id === destinationStop.location_id);\n    if (originLocation && destinationLocation) {\n      const routeName = `${originLocation.city} - ${destinationLocation.city} Express`;\n      setCreateForm(prev => ({\n        ...prev,\n        name: routeName\n      }));\n    }\n  };\n\n  // Format duration from minutes to hours and minutes\n  const formatDuration = minutes => {\n    if (!minutes) return 'N/A';\n    const hours = Math.floor(minutes / 60);\n    const mins = minutes % 60;\n    return `${hours}h ${mins}m`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-gray-900\",\n        children: \"Route Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3562,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-primary flex items-center\",\n        onClick: () => setShowCreateModal(true),\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          className: \"w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3567,\n          columnNumber: 11\n        }, this), \"Create New Route\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3563,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3561,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-6\",\n      children: routes.map(route => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(Map, {\n                className: \"w-5 h-5 text-blue-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3579,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3578,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold text-gray-900\",\n                children: route.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3582,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600\",\n                children: route.route_code\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3583,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3581,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3577,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: [\"RM \", route.base_price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3586,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3576,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2 text-sm text-gray-600\",\n          children: [/*#__PURE__*/_jsxDEV(MapPin, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3592,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [route.origin_name, \" \\u2192 \", route.destination_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3593,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3591,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 grid grid-cols-3 gap-2 text-xs\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-500\",\n              children: \"Distance:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3599,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium ml-1\",\n              children: [route.distance_km || 'N/A', \" km\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3600,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3598,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-500\",\n              children: \"Duration:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3603,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium ml-1\",\n              children: formatDuration(route.estimated_duration_minutes)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3604,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3602,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-500\",\n              children: \"Price:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3607,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium ml-1\",\n              children: [\"RM \", route.base_price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3608,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3606,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3597,\n          columnNumber: 13\n        }, this), route.total_trips > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 flex items-center justify-between text-xs\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500\",\n            children: \"Trip Count:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3614,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium\",\n            children: [route.total_trips, \" trips\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3615,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3613,\n          columnNumber: 15\n        }, this), route.avg_occupancy > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between text-xs\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500\",\n            children: \"Avg. Occupation:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3621,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-16 bg-gray-200 rounded-full h-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-2 rounded-full transition-all\",\n                style: {\n                  width: `${Math.min(route.avg_occupancy || 0, 100)}%`,\n                  backgroundColor: (route.avg_occupancy || 0) > 80 ? '#EF4444' : (route.avg_occupancy || 0) > 60 ? '#F59E0B' : '#10B981'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3624,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3623,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: [typeof route.avg_occupancy === 'number' ? route.avg_occupancy.toFixed(0) : '0', \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3632,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3622,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3620,\n          columnNumber: 15\n        }, this)]\n      }, route.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3575,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3573,\n      columnNumber: 7\n    }, this), showCreateModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold mb-4\",\n          children: \"\\u521B\\u5EFA\\u65B0\\u8DEF\\u7EBF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3646,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"\\u8DEF\\u7EBF\\u540D\\u79F0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3650,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: createForm.name,\n                onChange: e => setCreateForm(prev => ({\n                  ...prev,\n                  name: e.target.value\n                })),\n                className: \"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                placeholder: \"\\u4F8B\\u5982\\uFF1A\\u5409\\u9686\\u5761 - \\u69DF\\u57CE\\u5FEB\\u8F66\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3654,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: generateRouteName,\n                className: \"px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200\",\n                title: \"\\u6839\\u636E\\u8D77\\u70B9\\u548C\\u7EC8\\u70B9\\u81EA\\u52A8\\u751F\\u6210\\u8DEF\\u7EBF\\u540D\\u79F0\",\n                children: \"\\u81EA\\u52A8\\u751F\\u6210\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3662,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3653,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3649,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"\\u57FA\\u672C\\u7968\\u4EF7 (RM)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3674,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              step: \"0.50\",\n              min: \"0\",\n              value: createForm.base_price,\n              onChange: e => setCreateForm(prev => ({\n                ...prev,\n                base_price: parseFloat(e.target.value)\n              })),\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              placeholder: \"\\u4F8B\\u5982\\uFF1A45.00\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3677,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 mt-1\",\n              children: \"\\u8FD9\\u662F\\u4ECE\\u8D77\\u70B9\\u5230\\u7EC8\\u70B9\\u7684\\u5168\\u7A0B\\u7968\\u4EF7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3687,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3673,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700\",\n                children: \"\\u8DEF\\u7EBF\\u7AD9\\u70B9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3693,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"text-sm text-blue-600 hover:text-blue-800 flex items-center\",\n                onClick: handleAddStop,\n                children: [/*#__PURE__*/_jsxDEV(Plus, {\n                  className: \"w-4 h-4 mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3701,\n                  columnNumber: 21\n                }, this), \"\\u6DFB\\u52A0\\u7AD9\\u70B9\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3696,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3692,\n              columnNumber: 17\n            }, this), createForm.stops.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-500 text-center py-8 border border-dashed border-gray-300 rounded-md\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-2\",\n                children: \"\\u8FD8\\u6CA1\\u6709\\u6DFB\\u52A0\\u4EFB\\u4F55\\u7AD9\\u70B9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3708,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn-primary text-sm px-4 py-2\",\n                onClick: handleAddStop,\n                children: \"\\u6DFB\\u52A0\\u7B2C\\u4E00\\u4E2A\\u7AD9\\u70B9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3709,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3707,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: createForm.stops.map((stop, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `p-4 border rounded-md ${stop.is_origin ? 'bg-blue-50 border-blue-200' : stop.is_destination ? 'bg-green-50 border-green-200' : 'bg-gray-50 border-gray-200'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between items-center mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                      className: \"text-sm font-medium text-gray-700\",\n                      children: [\"\\u7AD9\\u70B9 #\", index + 1]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3727,\n                      columnNumber: 29\n                    }, this), stop.is_origin && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded-full\",\n                      children: \"\\u8D77\\u70B9\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3729,\n                      columnNumber: 31\n                    }, this), stop.is_destination && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"px-2 py-0.5 bg-green-100 text-green-800 text-xs rounded-full\",\n                      children: \"\\u7EC8\\u70B9\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3732,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3726,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"text-sm text-red-600 hover:text-red-800\",\n                    onClick: () => handleRemoveStop(index),\n                    children: /*#__PURE__*/_jsxDEV(X, {\n                      className: \"w-4 h-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3740,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3735,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3725,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"block text-xs text-gray-700 mb-1\",\n                      children: \"\\u4F4D\\u7F6E\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3746,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      value: stop.location_id,\n                      onChange: e => handleStopChange(index, 'location_id', e.target.value),\n                      className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\",\n                      required: true,\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"\\u9009\\u62E9\\u4F4D\\u7F6E\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3755,\n                        columnNumber: 31\n                      }, this), locations.filter(loc => !createForm.stops.some((s, i) => i !== index && s.location_id === loc.id)).map(location => /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: location.id,\n                        children: [location.name, \", \", location.city]\n                      }, location.id, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3759,\n                        columnNumber: 33\n                      }, this))]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3749,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3745,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"block text-xs text-gray-700 mb-1\",\n                      children: \"\\u4ECE\\u8D77\\u70B9\\u7684\\u7968\\u4EF7 (RM)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3767,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      step: \"0.50\",\n                      min: \"0\",\n                      value: stop.price_from_origin,\n                      onChange: e => handleStopChange(index, 'price_from_origin', parseFloat(e.target.value)),\n                      className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3770,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3766,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3744,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-2 gap-3 mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"block text-xs text-gray-700 mb-1\",\n                      children: \"\\u5230\\u8FBE\\u65F6\\u95F4\\u504F\\u79FB\\uFF08\\u5206\\u949F\\uFF09\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3783,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      min: \"0\",\n                      value: stop.arrival_offset_minutes,\n                      onChange: e => handleStopChange(index, 'arrival_offset_minutes', parseInt(e.target.value)),\n                      className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\",\n                      disabled: stop.is_origin // 起点的到达时间偏移固定为0\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3786,\n                      columnNumber: 29\n                    }, this), stop.is_origin && /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-500 mt-1\",\n                      children: \"\\u8D77\\u70B9\\u7AD9\\u7684\\u5230\\u8FBE\\u65F6\\u95F4\\u504F\\u79FB\\u56FA\\u5B9A\\u4E3A0\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3795,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3782,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"block text-xs text-gray-700 mb-1\",\n                      children: \"\\u51FA\\u53D1\\u65F6\\u95F4\\u504F\\u79FB\\uFF08\\u5206\\u949F\\uFF09\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3800,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      min: \"0\",\n                      value: stop.departure_offset_minutes,\n                      onChange: e => handleStopChange(index, 'departure_offset_minutes', parseInt(e.target.value)),\n                      className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3803,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3799,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3781,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex space-x-4 mt-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      id: `is_origin_${index}`,\n                      checked: stop.is_origin,\n                      onChange: e => handleStopChange(index, 'is_origin', e.target.checked),\n                      className: \"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3815,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: `is_origin_${index}`,\n                      className: \"ml-2 block text-sm text-gray-700\",\n                      children: \"\\u8BBE\\u4E3A\\u8D77\\u70B9\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3822,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3814,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      id: `is_destination_${index}`,\n                      checked: stop.is_destination,\n                      onChange: e => handleStopChange(index, 'is_destination', e.target.checked),\n                      className: \"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3828,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: `is_destination_${index}`,\n                      className: \"ml-2 block text-sm text-gray-700\",\n                      children: \"\\u8BBE\\u4E3A\\u7EC8\\u70B9\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3835,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3827,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3813,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3720,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3718,\n              columnNumber: 19\n            }, this), createForm.stops.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-right\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"text-sm text-blue-600 hover:text-blue-800 flex items-center ml-auto\",\n                onClick: handleAddStop,\n                children: [/*#__PURE__*/_jsxDEV(Plus, {\n                  className: \"w-4 h-4 mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3852,\n                  columnNumber: 23\n                }, this), \"\\u6DFB\\u52A0\\u66F4\\u591A\\u7AD9\\u70B9\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3847,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3846,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3691,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3648,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-3 mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary flex-1\",\n            onClick: handleCreateRoute,\n            disabled: loading || createForm.stops.length < 2,\n            children: loading ? '创建中...' : '创建路线'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3861,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-secondary flex-1\",\n            onClick: () => setShowCreateModal(false),\n            disabled: loading,\n            children: \"\\u53D6\\u6D88\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3868,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3860,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3645,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3644,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 3560,\n    columnNumber: 5\n  }, this);\n};\n_s6(RouteManagement, \"IKdcExaZtThNB81euK52VrovhDI=\");\n_c6 = RouteManagement;\nexport default AdminDashboard;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"AdminDashboard\");\n$RefreshReg$(_c2, \"VehicleManagement\");\n$RefreshReg$(_c3, \"ScheduleManagement\");\n$RefreshReg$(_c4, \"Analytics\");\n$RefreshReg$(_c5, \"CustomerService\");\n$RefreshReg$(_c6, \"RouteManagement\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","AdminLayout","useApp","AdminCustomerServicePortal","format","addDays","Calendar","Clock","MapPin","Bus","Users","Package","TrendingUp","DollarSign","BarChart2","BarChart3","Search","Plus","Edit","Trash","Trash2","Check","X","ChevronRight","ChevronDown","AlertTriangle","AlertCircle","Info","User","Phone","Mail","CreditCard","Printer","Save","Download","ArrowRight","FileText","MessageSquare","Send","Activity","Route","Settings","Map","getDashboardStats","getAnalyticsData","getVehicles","addVehicle","updateVehicle","getRoutes","getLocationsForRoutes","getTodaysSchedule","getRouteStops","createSchedule","getTripDetails","getPopularTrips","searchTrips","createBooking","formatCurrency","formatDate","formatTime","calculateOccupancy","getOccupancyColorClass","handleApiError","getRouteAnalytics","getSchedules","createRoute","updateTrip","deleteTrip","RouteMap","PopularTrips","PopularTrip","RouteDetails","RouteSelector","LocationSelector","jsxDEV","_jsxDEV","Fragment","_Fragment","AdminDashboard","activeTab","setActiveTab","_s","locations","systemDate","addNotification","loading","setLoading","error","setError","stats","setStats","activeRoutes","activeTrips","fleetSize","scheduledTrips","routes","setRoutes","vehicles","setVehicles","todaysSchedule","setTodaysSchedule","selectedRoute","setSelectedRoute","showRouteDetails","setShowRouteDetails","detailRoute","setDetailRoute","popularTrips","setPopularTrips","id","route","name","origin","destination","departureTime","date","handlePopularTripSelect","trip","loadDashboardData","statsResponse","routesResponse","vehiclesResponse","scheduleResponse","Promise","all","success","data","err","console","handleRouteClick","handleViewRoute","clearSelection","className","children","fileName","_jsxFileName","lineNumber","columnNumber","viewBox","fill","fillRule","d","clipRule","onClick","map","_locations$find","_locations$find2","e","stopPropagation","title","find","l","originId","city","destinationId","distanceKm","Math","floor","durationHours","round","basePrice","routeTrips","filter","routeId","avgOccupation","length","reduce","sum","style","width","min","backgroundColor","toFixed","selectedTrips","VehicleManagement","onRefresh","ScheduleManagement","Analytics","RouteManagement","zIndex","onClose","_c","_s2","showAddVehicle","setShowAddVehicle","editingVehicle","setEditingVehicle","showServiceModal","setShowServiceModal","handleAddVehicle","handleEditVehicle","vehicle","editCapacity","vehicle_capacity","capacity","editMileage","current_mileage","editLastService","last_service_date","handleServiceVehicle","newStatus","status","response","fetch","method","headers","body","JSON","stringify","ok","message","setTimeout","type","handleSaveEdit","updateData","license_plate","plateNumber","vehicle_number","model","toLocaleString","Date","toLocaleDateString","lastService","value","onChange","prev","parseInt","target","max","disabled","_c2","_s3","selectedDate","setSelectedDate","filteredSchedule","setFilteredSchedule","showCreateModal","setShowCreateModal","createForm","setCreateForm","route_id","vehicle_id","departure_date","departure_time","base_price","seat_types","multiplier","enabled","pricing_rules","routeStops","setRouteStops","loadingStops","setLoadingStops","dateRange","setDateRange","startDate","endDate","loadingSchedule","setLoadingSchedule","viewMode","setViewMode","creatingTrip","setCreatingTrip","showTripDetailsModal","setShowTripDetailsModal","selectedTrip","setSelectedTrip","loadingTripDetails","setLoadingTripDetails","showEditModal","setShowEditModal","editingTrip","setEditingTrip","editForm","setEditForm","departure_datetime","estimated_arrival_datetime","special_notes","updatingTrip","setUpdatingTrip","loadScheduleForDate","json","sortedSchedule","sort","a","b","dateA","dateB","toDateString","getTime","loadRouteStops","datetime","toLocaleTimeString","hour","minute","getStatusColor","handleSeatTypeChange","updatedSeatTypes","parseFloat","handlePricingRuleToggle","updatedRules","rule","handlePricingRuleValueChange","handleCreateTrip","estimatedArrivalDatetime","lastStop","arrivalOffsetMinutes","arrival_offset_minutes","departureDatetime","isNaN","seatTypePricing","seat_type_id","price_multiplier","pricingRules","rule_name","rule_type","rule_value","toISOString","seat_type_pricing","resetCreateForm","getTripsByDate","groupedTrips","forEach","push","setWeekView","currentDate","startOfWeek","setDate","getDate","getDay","endOfWeek","split","setMonthView","startOfMonth","getFullYear","getMonth","endOfMonth","setDayView","getDateRangeText","month","year","handleTripClick","tripId","alert","handleEditTrip","formatDateTimeForInput","dateTimeString","slice","toString","handleUpdateTrip","handleDeleteTrip","window","confirm","route_name","occupiedSeats","occupied_seats","total_seats","available_seats","occupancyPercentage","occupancy_percentage","origin_name","destination_name","Object","entries","trips","weekday","day","replace","toUpperCase","size","then","catch","vehicle_type_name","step","placeholder","seatType","checked","htmlFor","trips_scheduled","trip_number","total_passengers","origin_city","destination_city","vehicle_model","vehicle_type","avg_occupancy","total_revenue","seat_pricing","pricing","index","charAt","stops","stop","isOrigin","isDestination","location_name","location_city","price_from_origin","scope","_trip$status","rows","_c3","_s4","_analyticsData$totalR","_analyticsData$totalP","analyticsData","setAnalyticsData","routePerformance","setRoutePerformance","toLowerCase","hour12","loadAnalyticsData","routeResponse","log","routeDetails","random","substr","today","startDateStr","endDateStr","location","reload","totalRevenue","averageOccupancy","totalPassengers","_trip$status2","_c4","CustomerService","_s5","currentStep","setCurrentStep","searchResults","setSearchResults","customerInfo","setCustomerInfo","fullName","phone","email","icNumber","passengerCount","isProcessing","setIsProcessing","popularTrip","setPopularTrip","price","searchForm","setSearchForm","isRoundTrip","returnDate","fromLoc","loc","toLoc","handleSearch","searchParams","departureDate","passengers","handleTripSelect","handleCustomerSubmit","handlePaymentComplete","bookingRef","resetSearch","required","num","onSelect","_locations$find3","_locations$find4","arrivalDatetime","availableSeats","_c5","_s6","setLocations","loadLocations","handleAddStop","location_id","is_origin","is_destination","departure_offset_minutes","handleRemoveStop","newStops","_","i","handleStopChange","field","handleCreateRoute","trim","hasOrigin","some","hasDestination","allLocationsSelected","every","routeData","originStop","destinationStop","origin_id","destination_id","generateRouteName","originLocation","destinationLocation","routeName","formatDuration","minutes","hours","mins","route_code","distance_km","estimated_duration_minutes","total_trips","s","_c6","$RefreshReg$"],"sources":["/Users/gohshunda/TWT-Transport-Booking/src/pages/admin/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AdminLayout from '../../layouts/AdminLayout';\nimport { useApp } from '../../context/AppContext';\nimport AdminCustomerServicePortal from './AdminCustomerServicePortal';\nimport { format, addDays } from 'date-fns';\nimport { \n  Calendar, \n  Clock, \n  MapPin, \n  Bus, \n  Users, \n  Package, \n  TrendingUp,\n  DollarSign,\n  BarChart2,\n  BarChart3,\n  Search,\n  Plus,\n  Edit,\n  Trash,\n  Trash2,\n  Check,\n  X,\n  ChevronRight,\n  ChevronDown,\n  AlertTriangle,\n  AlertCircle,\n  Info,\n  User,\n  Phone,\n  Mail,\n  CreditCard,\n  Printer,\n  Save,\n  Download,\n  ArrowRight,\n  FileText,\n  MessageSquare,\n  Send,\n  Activity,\n  Route,\n  Settings,\n  Map\n} from 'lucide-react';\nimport { \n  getDashboardStats, \n  getAnalyticsData, \n  getVehicles,\n  addVehicle,\n  updateVehicle,\n  getRoutes,\n  getLocationsForRoutes,\n  getTodaysSchedule,\n  getRouteStops,\n  createSchedule,\n  getTripDetails,\n  getPopularTrips,\n  searchTrips,\n  createBooking,\n  formatCurrency,\n  formatDate,\n  formatTime,\n  calculateOccupancy,\n  getOccupancyColorClass,\n  handleApiError,\n  getRouteAnalytics,\n  getSchedules,\n  createRoute,\n  updateTrip,\n  deleteTrip\n} from '../../services/adminApi';\nimport RouteMap from '../../components/admin/RouteMap';\nimport PopularTrips from '../../components/admin/PopularTrips';\nimport PopularTrip from '../../components/admin/PopularTrip';\nimport RouteDetails from '../../components/admin/RouteDetails';\nimport RouteSelector from '../../components/admin/RouteSelector';\nimport LocationSelector from '../../components/admin/LocationSelector';\n\nconst AdminDashboard = ({ activeTab = 'customer-service', setActiveTab }) => {\n  const { locations, systemDate, addNotification } = useApp();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  \n  const [stats, setStats] = useState({\n    activeRoutes: 0,\n    activeTrips: 0,\n    fleetSize: 0,\n    scheduledTrips: 0\n  });\n  \n\n  \n  const [routes, setRoutes] = useState([]);\n  const [vehicles, setVehicles] = useState([]);\n  const [todaysSchedule, setTodaysSchedule] = useState([]);\n  const [selectedRoute, setSelectedRoute] = useState(null);\n  const [showRouteDetails, setShowRouteDetails] = useState(false);\n  const [detailRoute, setDetailRoute] = useState(null);\n\n  const [popularTrips, setPopularTrips] = useState([\n    {\n      id: '1',\n      route: { id: '1', name: 'KL - Johor Bahru Express' },\n      origin: 'Kuala Lumpur',\n      destination: 'Johor Bahru',\n      departureTime: '08:00 AM',\n      date: '2023-06-25'\n    },\n    {\n      id: '2',\n      route: { id: '2', name: 'KL - Penang Highway' },\n      origin: 'Kuala Lumpur',\n      destination: 'Penang',\n      departureTime: '09:30 AM',\n      date: '2023-06-25'\n    },\n    {\n      id: '3',\n      route: { id: '3', name: 'KL - Malacca Direct' },\n      origin: 'Kuala Lumpur',\n      destination: 'Malacca',\n      departureTime: '10:15 AM',\n      date: '2023-06-25'\n    }\n  ]);\n\n  const handlePopularTripSelect = (trip) => {\n    // 显示行程详情\n    setDetailRoute(trip.route);\n    setShowRouteDetails(true);\n  };\n\n  useEffect(() => {\n    loadDashboardData();\n  }, []);\n\n  const loadDashboardData = async () => {\n    setLoading(true);\n    try {\n      // Load all dashboard data in parallel\n      const [\n        statsResponse,\n        routesResponse,\n        vehiclesResponse,\n        scheduleResponse\n      ] = await Promise.all([\n        getDashboardStats(),\n        getRoutes(),\n        getVehicles(),\n        getTodaysSchedule()\n      ]);\n\n      if (statsResponse.success) {\n        setStats(statsResponse.data);\n      }\n\n      if (routesResponse.success) {\n        setRoutes(routesResponse.data);\n      }\n\n      if (vehiclesResponse.success) {\n        setVehicles(vehiclesResponse.data);\n      }\n\n      if (scheduleResponse.success) {\n        setTodaysSchedule(scheduleResponse.data);\n      }\n\n      setError(null);\n    } catch (err) {\n      console.error('Error loading dashboard data:', err);\n      setError(handleApiError(err));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRouteClick = (route) => {\n    setSelectedRoute(route);\n  };\n\n  const handleViewRoute = (route) => {\n    setDetailRoute(route);\n    setShowRouteDetails(true);\n  };\n\n  const clearSelection = () => {\n    setSelectedRoute(null);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin\"></div>\n          <span className=\"ml-2 text-gray-600\">Loading dashboard data...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0\">\n              <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n              </svg>\n            </div>\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-red-800\">Error loading dashboard</h3>\n              <div className=\"mt-2 text-sm text-red-700\">\n                <p>{error}</p>\n                <button \n                  onClick={loadDashboardData}\n                  className=\"mt-2 text-red-800 underline hover:text-red-900\"\n                >\n                  Try again\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      {/* Tab Content */}\n      {activeTab === 'customer-service' && (\n        <AdminCustomerServicePortal />\n      )}\n\n      {activeTab === 'overview' && (\n        <>\n          {/* Action Buttons */}\n          <div className=\"flex justify-end mb-6\">\n            <div className=\"flex space-x-3\">\n              <button \n                onClick={() => setActiveTab('analytics')}\n                className=\"btn-secondary flex items-center\"\n              >\n                <BarChart3 className=\"w-4 h-4 mr-2\" />\n                Analytics\n              </button>\n              <button \n                onClick={() => setActiveTab('schedule')}\n                className=\"btn-primary flex items-center\"\n              >\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Add Route\n              </button>\n            </div>\n          </div>\n\n          {/* Stats Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n            <div className=\"card\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-gray-600\">Active Routes</p>\n                  <p className=\"text-3xl font-bold text-primary-600\">{stats.activeRoutes}</p>\n                </div>\n                <div className=\"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center\">\n                  <Route className=\"w-6 h-6 text-primary-600\" />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-gray-600\">Active Trips</p>\n                  <p className=\"text-3xl font-bold text-success-600\">{stats.activeTrips}</p>\n                </div>\n                <div className=\"w-12 h-12 bg-success-100 rounded-full flex items-center justify-center\">\n                  <Bus className=\"w-6 h-6 text-success-600\" />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-gray-600\">Fleet Size</p>\n                  <p className=\"text-3xl font-bold text-warning-600\">{stats.fleetSize}</p>\n                </div>\n                <div className=\"w-12 h-12 bg-warning-100 rounded-full flex items-center justify-center\">\n                  <Settings className=\"w-6 h-6 text-warning-600\" />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-gray-600\">Scheduled Trips</p>\n                  <p className=\"text-3xl font-bold text-purple-600\">{stats.scheduledTrips}</p>\n                </div>\n                <div className=\"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center\">\n                  <Calendar className=\"w-6 h-6 text-purple-600\" />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Management Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n            <div className=\"card hover:shadow-lg transition-shadow cursor-pointer\" onClick={() => setActiveTab('vehicles')}>\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center\">\n                  <Bus className=\"w-6 h-6 text-blue-600\" />\n                </div>\n                <ArrowRight className=\"w-5 h-5 text-gray-400\" />\n              </div>\n              <h3 className=\"font-semibold text-lg text-gray-900 mb-2\">Manage Vehicles</h3>\n              <p className=\"text-gray-600 text-sm\">Add, edit, or maintain vehicles</p>\n            </div>\n\n            <div className=\"card hover:shadow-lg transition-shadow cursor-pointer\" onClick={() => setActiveTab('schedule')}>\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center\">\n                  <MapPin className=\"w-6 h-6 text-green-600\" />\n                </div>\n                <ArrowRight className=\"w-5 h-5 text-gray-400\" />\n              </div>\n              <h3 className=\"font-semibold text-lg text-gray-900 mb-2\">Route Planning</h3>\n              <p className=\"text-gray-600 text-sm\">Create and optimize routes</p>\n            </div>\n\n            <div className=\"card hover:shadow-lg transition-shadow cursor-pointer\" onClick={() => setActiveTab('schedule')}>\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center\">\n                  <Calendar className=\"w-6 h-6 text-yellow-600\" />\n                </div>\n                <ArrowRight className=\"w-5 h-5 text-gray-400\" />\n              </div>\n              <h3 className=\"font-semibold text-lg text-gray-900 mb-2\">Schedule Trips</h3>\n              <p className=\"text-gray-600 text-sm\">Plan daily operations</p>\n            </div>\n\n            <div className=\"card hover:shadow-lg transition-shadow cursor-pointer\" onClick={() => setActiveTab('analytics')}>\n              <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center\">\n                    <Activity className=\"w-6 h-6 text-blue-600\" />\n                </div>\n                <ArrowRight className=\"w-5 h-5 text-gray-400\" />\n              </div>\n                <h3 className=\"font-semibold text-lg text-gray-900 mb-2\">Recent Activity</h3>\n                <p className=\"text-gray-600 text-sm\">View recent system activities</p>\n            </div>\n          </div>\n\n          {/* Active Routes and Map */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\">\n            {/* Active Routes */}\n            <div className=\"card\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold\">Active Routes</h3>\n                <button onClick={clearSelection} className=\"btn-secondary text-sm\">\n                  Clear Selection\n                </button>\n              </div>\n              \n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                {routes.map((route) => (\n                  <div \n                    key={route.id}\n                    className={`p-4 border rounded-lg cursor-pointer transition-colors ${\n                      selectedRoute?.id === route.id ? 'border-primary-500 bg-primary-50' : 'border-gray-200 hover:border-gray-300'\n                    }`}\n                    onClick={() => handleRouteClick(route)}\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <h4 className=\"font-medium text-gray-900\">{route.name}</h4>\n                          <div className=\"flex space-x-2\">\n                            <button \n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleViewRoute(route);\n                              }}\n                              className=\"text-primary-600 hover:text-primary-700\"\n                              title=\"View Details\"\n                            >\n                              <BarChart3 className=\"w-4 h-4\" />\n                            </button>\n                            <button className=\"text-gray-400 hover:text-gray-600\" title=\"Edit\">\n                              <Edit className=\"w-4 h-4\" />\n                            </button>\n                            <button className=\"text-red-400 hover:text-red-600\" title=\"Delete\">\n                              <Trash2 className=\"w-4 h-4\" />\n                            </button>\n                          </div>\n                        </div>\n                        <div className=\"text-sm text-gray-600 space-y-1\">\n                          <div className=\"flex items-center\">\n                            <MapPin className=\"w-4 h-4 mr-2\" />\n                            {locations.find(l => l.id === route.originId)?.city} → {locations.find(l => l.id === route.destinationId)?.city}\n                          </div>\n                          <div className=\"flex items-center justify-between\">\n                            <span>Distance: {route.distanceKm} km</span>\n                            <span>Duration: {Math.floor(route.durationHours)}h {Math.round((route.durationHours % 1) * 60)}m</span>\n                            <span className=\"text-primary-600 font-medium\">Price: RM {route.basePrice}</span>\n                          </div>\n                          \n                          {/* Trip Occupation for this route */}\n                          <div className=\"mt-2\">\n                            {(() => {\n                              const routeTrips = todaysSchedule.filter(trip => trip.routeId === route.id);\n                              const avgOccupation = routeTrips.length > 0 \n                                ? routeTrips.reduce((sum, trip) => sum + calculateOccupancy(trip), 0) / routeTrips.length\n                                : 0;\n                              \n                              return avgOccupation > 0 && (\n                                <div className=\"flex items-center justify-between text-xs\">\n                                  <span className=\"text-gray-500\">Avg. Occupation:</span>\n                                  <div className=\"flex items-center space-x-2\">\n                                    <div className=\"w-16 bg-gray-200 rounded-full h-2\">\n                                      <div \n                                        className=\"h-2 rounded-full transition-all\"\n                                        style={{ \n                                          width: `${Math.min(avgOccupation, 100)}%`,\n                                          backgroundColor: avgOccupation > 80 ? '#EF4444' : avgOccupation > 60 ? '#F59E0B' : '#10B981'\n                                        }}\n                                      ></div>\n                                    </div>\n                                    <span className={`font-medium ${avgOccupation > 80 ? 'text-red-600' : avgOccupation > 60 ? 'text-yellow-600' : 'text-green-600'}`}>\n                                      {typeof avgOccupation === 'number' ? avgOccupation.toFixed(0) : '0'}%\n                                    </span>\n                                  </div>\n                                </div>\n                              );\n                            })()}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Route Visualization */}\n            <div className=\"card\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold\">Route Visualization</h3>\n                <button className=\"btn-secondary text-sm\">\n                  Clear Selection\n                </button>\n              </div>\n              \n              <div className=\"h-96 bg-gray-100 rounded-lg\">\n                <RouteMap \n                  routes={selectedRoute ? [selectedRoute] : routes}\n                  locations={locations}\n                  selectedTrips={todaysSchedule}\n                />\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n\n      {activeTab === 'vehicles' && (\n        <VehicleManagement vehicles={vehicles} onRefresh={loadDashboardData} />\n      )}\n\n      {activeTab === 'schedule' && (\n        <ScheduleManagement \n          todaysSchedule={todaysSchedule} \n          routes={routes} \n          vehicles={vehicles} \n          onRefresh={loadDashboardData}\n        />\n      )}\n\n      {activeTab === 'analytics' && (\n        <Analytics />\n      )}\n\n      {activeTab === 'routes' && (\n         <RouteManagement routes={routes} onRefresh={loadDashboardData} />\n      )}\n\n      {/* Route Details Modal */}\n      {showRouteDetails && (\n        <div style={{ zIndex: 9999 }}>\n          <RouteDetails\n            route={detailRoute}\n            locations={locations}\n            onClose={() => {\n              setShowRouteDetails(false);\n              setDetailRoute(null);\n            }}\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Vehicle Management Component\nconst VehicleManagement = ({ vehicles = [], onRefresh }) => {\n  const [showAddVehicle, setShowAddVehicle] = useState(false);\n  const [editingVehicle, setEditingVehicle] = useState(null);\n  const [showServiceModal, setShowServiceModal] = useState(null);\n\n  const handleAddVehicle = () => {\n    setShowAddVehicle(true);\n  };\n\n  const handleEditVehicle = (vehicle) => {\n    setEditingVehicle({\n      ...vehicle,\n      editCapacity: vehicle.vehicle_capacity || vehicle.capacity || 0,\n      editMileage: vehicle.current_mileage || 0,\n      editLastService: vehicle.last_service_date || ''\n    });\n  };\n\n  const handleServiceVehicle = async (vehicle) => {\n    try {\n      // Toggle between active and maintenance status\n      const newStatus = vehicle.status === 'active' ? 'maintenance' : 'active';\n      \n      const response = await fetch(`http://localhost:5001/api/admin/vehicles/${vehicle.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ status: newStatus }),\n      });\n\n      if (response.ok) {\n        setShowServiceModal({\n          ...vehicle,\n          newStatus,\n          message: newStatus === 'maintenance' \n            ? 'Vehicle has been marked for maintenance' \n            : 'Vehicle has been returned to active service'\n        });\n        // Refresh data after a short delay\n        setTimeout(() => {\n          onRefresh();\n        }, 1500);\n      } else {\n        addNotification({\n          type: 'error',\n          message: 'Failed to update vehicle status'\n        });\n      }\n    } catch (error) {\n      console.error('Error updating vehicle status:', error);\n              addNotification({\n          type: 'error',\n          message: 'Error updating vehicle status'\n        });\n    }\n  };\n\n  const handleSaveEdit = async () => {\n    try {\n      const updateData = {\n        current_mileage: editingVehicle.editMileage,\n        last_service_date: editingVehicle.editLastService || null\n      };\n\n      // Update capacity through vehicle_types if needed\n      if (editingVehicle.editCapacity !== editingVehicle.vehicle_capacity) {\n        // For now, we'll skip capacity update as it's tied to vehicle_type\n        // In a real scenario, you'd either update vehicle_type or create new type\n      }\n\n      const response = await fetch(`http://localhost:5001/api/admin/vehicles/${editingVehicle.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(updateData),\n      });\n\n      if (response.ok) {\n        setEditingVehicle(null);\n        onRefresh();\n        addNotification({\n          type: 'success',\n          message: 'Vehicle updated successfully!'\n        });\n      } else {\n                  addNotification({\n            type: 'error',\n            message: 'Failed to update vehicle'\n          });\n      }\n    } catch (error) {\n      console.error('Error updating vehicle:', error);\n              addNotification({\n          type: 'error',\n          message: 'Error updating vehicle'\n        });\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Vehicle Management</h2>\n        <button \n          className=\"btn-primary flex items-center\"\n          onClick={handleAddVehicle}\n        >\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Add Vehicle\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {vehicles.map((vehicle) => (\n          <div key={vehicle.id} className=\"card\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\n                  <Bus className=\"w-5 h-5 text-blue-600\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-gray-900\">{vehicle.license_plate || vehicle.plateNumber || vehicle.vehicle_number}</h3>\n                  <p className=\"text-sm text-gray-600\">{vehicle.model || 'N/A'}</p>\n                </div>\n              </div>\n              <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                vehicle.status === 'active' ? 'bg-green-100 text-green-800' :\n                vehicle.status === 'maintenance' ? 'bg-yellow-100 text-yellow-800' :\n                'bg-red-100 text-red-800'\n              }`}>\n                {vehicle.status}\n              </span>\n            </div>\n            \n            <div className=\"space-y-2 text-sm\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">Capacity:</span>\n                <span className=\"font-medium\">{vehicle.vehicle_capacity || vehicle.capacity || 'N/A'} seats</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">Mileage:</span>\n                <span className=\"font-medium\">{vehicle.current_mileage ? vehicle.current_mileage.toLocaleString() : 'N/A'} km</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">Last Service:</span>\n                <span className=\"font-medium\">\n                  {vehicle.last_service_date \n                    ? new Date(vehicle.last_service_date).toLocaleDateString('en-GB')\n                    : vehicle.lastService || 'N/A'}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"mt-4 flex space-x-2\">\n              <button \n                className=\"btn-secondary text-xs flex-1\"\n                onClick={() => handleEditVehicle(vehicle)}\n              >\n                Edit\n              </button>\n              <button \n                className=\"btn-secondary text-xs flex-1\"\n                onClick={() => handleServiceVehicle(vehicle)}\n              >\n                Service\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Add Vehicle Modal */}\n      {showAddVehicle && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Add New Vehicle</h3>\n            <p className=\"text-gray-600 mb-4\">Add vehicle functionality coming soon...</p>\n            <button \n              className=\"btn-secondary w-full\"\n              onClick={() => setShowAddVehicle(false)}\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Edit Vehicle Modal */}\n      {editingVehicle && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Edit Vehicle: {editingVehicle.license_plate}</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Capacity (seats)\n                </label>\n                <input\n                  type=\"number\"\n                  value={editingVehicle.editCapacity}\n                  onChange={(e) => setEditingVehicle(prev => ({\n                    ...prev,\n                    editCapacity: parseInt(e.target.value)\n                  }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  min=\"1\"\n                  max=\"100\"\n                  disabled\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">Capacity is determined by vehicle type</p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Current Mileage (km)\n                </label>\n                <input\n                  type=\"number\"\n                  value={editingVehicle.editMileage}\n                  onChange={(e) => setEditingVehicle(prev => ({\n                    ...prev,\n                    editMileage: parseInt(e.target.value)\n                  }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  min=\"0\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Last Service Date\n                </label>\n                <input\n                  type=\"date\"\n                  value={editingVehicle.editLastService}\n                  onChange={(e) => setEditingVehicle(prev => ({\n                    ...prev,\n                    editLastService: e.target.value\n                  }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex space-x-3 mt-6\">\n              <button \n                className=\"btn-primary flex-1\"\n                onClick={handleSaveEdit}\n              >\n                Save Changes\n              </button>\n              <button \n                className=\"btn-secondary flex-1\"\n                onClick={() => setEditingVehicle(null)}\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Service Modal */}\n      {showServiceModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Service Status: {showServiceModal.license_plate}</h3>\n            \n            <div className=\"text-center mb-6\">\n              <div className={`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium ${\n                showServiceModal.newStatus === 'maintenance' \n                  ? 'bg-yellow-100 text-yellow-800' \n                  : 'bg-green-100 text-green-800'\n              }`}>\n                Status: {showServiceModal.newStatus === 'maintenance' ? 'Under Maintenance' : 'Active Service'}\n              </div>\n              \n              <p className=\"text-gray-600 mt-4\">{showServiceModal.message}</p>\n              \n              {showServiceModal.newStatus === 'maintenance' && (\n                <p className=\"text-sm text-yellow-600 mt-2\">\n                  Vehicle is now out of service. Click Service button again to return to active status.\n                </p>\n              )}\n            </div>\n\n            <button \n              className=\"btn-secondary w-full\"\n              onClick={() => setShowServiceModal(null)}\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Schedule Management Component\nconst ScheduleManagement = ({ todaysSchedule = [], routes = [], vehicles = [], onRefresh }) => {\n  const { systemDate } = useApp();\n  const [selectedDate, setSelectedDate] = useState(systemDate);\n  const [filteredSchedule, setFilteredSchedule] = useState([]);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [createForm, setCreateForm] = useState({\n    route_id: '',\n    vehicle_id: '',\n    departure_date: systemDate,\n    departure_time: '08:00',\n    base_price: 0,\n    seat_types: [\n      { id: 'regular', name: 'Regular Seats', multiplier: 1.0, enabled: true },\n      { id: 'premium', name: 'Premium Seats', multiplier: 1.5, enabled: true },\n      { id: 'vip', name: 'VIP Seats', multiplier: 2.0, enabled: true }\n    ],\n    pricing_rules: [\n      { id: 'weekend', name: 'Weekend Pricing', type: 'surcharge', value: 15, enabled: false },\n      { id: 'holiday', name: 'Holiday Pricing', type: 'surcharge', value: 25, enabled: false },\n      { id: 'early_booking', name: 'Early Booking Discount', type: 'discount', value: 10, enabled: false }\n    ]\n  });\n  \n  // State for route stops\n  const [routeStops, setRouteStops] = useState([]);\n  const [loadingStops, setLoadingStops] = useState(false);\n\n  const [dateRange, setDateRange] = useState({\n    startDate: selectedDate,\n    endDate: selectedDate\n  });\n  const [loadingSchedule, setLoadingSchedule] = useState(false);\n  const [viewMode, setViewMode] = useState('day'); // 'day', 'week', 'month'\n\n  // State for loading and form submission\n  const [loading, setLoading] = useState(false);\n  const [creatingTrip, setCreatingTrip] = useState(false);\n\n  // Add state for trip details modal\n  const [showTripDetailsModal, setShowTripDetailsModal] = useState(false);\n  const [selectedTrip, setSelectedTrip] = useState(null);\n  const [loadingTripDetails, setLoadingTripDetails] = useState(false);\n\n  // Add state for edit trip modal\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editingTrip, setEditingTrip] = useState(null);\n  const [editForm, setEditForm] = useState({\n    departure_datetime: '',\n    estimated_arrival_datetime: '',\n    base_price: '',\n    status: '',\n    special_notes: ''\n  });\n  const [updatingTrip, setUpdatingTrip] = useState(false);\n\n  // Filter schedule by selected date or date range\n  // Load schedule data based on selected date and view mode\n  useEffect(() => {\n    const loadScheduleForDate = async () => {\n      setLoadingSchedule(true);\n      try {\n        // Use date range if in week or month view mode\n        const startDate = viewMode === 'day' ? selectedDate : dateRange.startDate;\n        const endDate = viewMode === 'day' ? selectedDate : dateRange.endDate;\n        \n        const response = await fetch(`http://localhost:5001/api/admin/schedules?startDate=${startDate}&endDate=${endDate}`);\n        if (response.ok) {\n          const data = await response.json();\n          if (data.success) {\n            // Sort by date then by departure time\n            const sortedSchedule = data.data.sort((a, b) => {\n              const dateA = new Date(a.departure_datetime);\n              const dateB = new Date(b.departure_datetime);\n              \n              if (dateA.toDateString() === dateB.toDateString()) {\n                return dateA.getTime() - dateB.getTime(); // Sort by time if same day\n              }\n              return dateA.getTime() - dateB.getTime(); // Sort by date\n            });\n            \n            setFilteredSchedule(sortedSchedule);\n          }\n        }\n      } catch (error) {\n        console.error('Error loading schedule for date:', error);\n        setFilteredSchedule([]);\n      } finally {\n        setLoadingSchedule(false);\n      }\n    };\n\n    loadScheduleForDate();\n  }, [selectedDate, dateRange, viewMode]);\n  \n  // Load route stops when a route is selected\n  useEffect(() => {\n    if (createForm.route_id) {\n      loadRouteStops();\n    }\n  }, [createForm.route_id]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const loadRouteStops = async () => {\n    if (!createForm.route_id) {\n      setRouteStops([]);\n      return;\n    }\n\n    try {\n      setLoadingStops(true);\n      const response = await getRouteStops(createForm.route_id);\n      if (response.success) {\n        setRouteStops(response.data);\n      } else {\n        setRouteStops([]);\n      }\n    } catch (error) {\n      console.error('Error loading route stops:', error);\n      setRouteStops([]);\n    } finally {\n      setLoadingStops(false);\n    }\n  };\n  const formatTime = (datetime) => {\n    try {\n      return new Date(datetime).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});\n    } catch (error) {\n      return 'Invalid time';\n    }\n  };\n\n  const formatDate = (datetime) => {\n    try {\n      return new Date(datetime).toLocaleDateString('en-GB');\n    } catch (error) {\n      return 'Invalid date';\n    }\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'scheduled': return 'bg-blue-100 text-blue-800';\n      case 'boarding': return 'bg-yellow-100 text-yellow-800';\n      case 'in_transit': return 'bg-green-100 text-green-800';\n      case 'arrived': return 'bg-gray-100 text-gray-800';\n      case 'cancelled': return 'bg-red-100 text-red-800';\n      case 'delayed': return 'bg-orange-100 text-orange-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  // Handle seat type multiplier change\n  const handleSeatTypeChange = (id, value) => {\n    setCreateForm(prev => {\n      const updatedSeatTypes = prev.seat_types.map(type => \n        type.id === id ? { ...type, multiplier: parseFloat(value) } : type\n      );\n      return { ...prev, seat_types: updatedSeatTypes };\n    });\n  };\n  \n  // Handle pricing rule toggle\n  const handlePricingRuleToggle = (id, enabled) => {\n    setCreateForm(prev => {\n      const updatedRules = prev.pricing_rules.map(rule => \n        rule.id === id ? { ...rule, enabled } : rule\n      );\n      return { ...prev, pricing_rules: updatedRules };\n    });\n  };\n  \n  // Handle pricing rule value change\n  const handlePricingRuleValueChange = (id, value) => {\n    setCreateForm(prev => {\n      const updatedRules = prev.pricing_rules.map(rule => \n        rule.id === id ? { ...rule, value: parseInt(value, 10) } : rule\n      );\n      return { ...prev, pricing_rules: updatedRules };\n    });\n  };\n  \n  // Create trip schedule with enhanced options\n  const handleCreateTrip = async () => {\n    // Validate form\n    if (!createForm.route_id || !createForm.vehicle_id || !createForm.departure_date || !createForm.departure_time || !createForm.base_price) {\n      addNotification({\n        type: 'warning',\n        message: 'Please fill in all required fields'\n      });\n      return;\n    }\n\n    try {\n      setCreatingTrip(true);\n\n      // Get route stops to calculate estimated arrival time\n      let estimatedArrivalDatetime;\n      \n      if (routeStops.length > 0) {\n        // If we have route stops, use the last stop's arrival offset\n        const lastStop = routeStops[routeStops.length - 1];\n        const arrivalOffsetMinutes = lastStop.arrival_offset_minutes || 0;\n        \n        // Calculate estimated arrival time\n        const departureDatetime = new Date(`${createForm.departure_date}T${createForm.departure_time}:00`);\n        estimatedArrivalDatetime = new Date(departureDatetime.getTime() + arrivalOffsetMinutes * 60000);\n      } else {\n        // Fallback: Add 4 hours if no route stops data\n        const departureDatetime = new Date(`${createForm.departure_date}T${createForm.departure_time}:00`);\n        estimatedArrivalDatetime = new Date(departureDatetime.getTime() + 4 * 60 * 60000);\n      }\n\n      // Format dates for API with proper timezone handling\n      const departureDatetime = new Date(`${createForm.departure_date}T${createForm.departure_time}:00`);\n      \n      // Validate datetime\n      if (isNaN(departureDatetime.getTime())) {\n        addNotification({\n          type: 'error',\n          message: 'Invalid departure date or time. Please check your inputs.'\n        });\n        return;\n      }\n      \n      // Prepare seat type pricing data\n      const seatTypePricing = createForm.seat_types\n        .filter(type => type.enabled)\n        .map(type => ({\n          seat_type_id: type.id,\n          name: type.name,\n          price_multiplier: parseFloat(type.multiplier)\n        }));\n\n      // Prepare pricing rules data\n      const pricingRules = createForm.pricing_rules\n        .filter(rule => rule.enabled)\n        .map(rule => ({\n          rule_name: rule.name,\n          rule_type: rule.type,\n          rule_value: parseInt(rule.value, 10)\n        }));\n\n      // Create schedule\n      const response = await createSchedule({\n        route_id: createForm.route_id,\n        vehicle_id: createForm.vehicle_id,\n        departure_datetime: departureDatetime.toISOString(),\n        estimated_arrival_datetime: estimatedArrivalDatetime.toISOString(),\n        base_price: parseFloat(createForm.base_price),\n        seat_type_pricing: seatTypePricing,\n        pricing_rules: pricingRules\n      });\n\n      if (response.success) {\n        setShowCreateModal(false);\n        resetCreateForm();\n        onRefresh();\n        addNotification({\n          type: 'success',\n          message: 'Trip scheduled successfully!'\n        });\n      } else {\n        addNotification({\n          type: 'error',\n          message: 'Failed to schedule trip: ' + (response.message || 'Unknown error')\n        });\n      }\n    } catch (error) {\n      console.error('Error creating trip:', error);\n      addNotification({\n        type: 'error',\n        message: 'Error scheduling trip: ' + (error.message || 'Unknown error')\n      });\n    } finally {\n      setCreatingTrip(false);\n    }\n  };\n\n  // Function to group trips by date\n  const getTripsByDate = () => {\n    const groupedTrips = {};\n    \n    filteredSchedule.forEach(trip => {\n      const date = new Date(trip.departure_datetime).toDateString();\n      if (!groupedTrips[date]) {\n        groupedTrips[date] = [];\n      }\n      groupedTrips[date].push(trip);\n    });\n    \n    return groupedTrips;\n  };\n  \n  // Set week view dates\n  const setWeekView = () => {\n    const currentDate = new Date(selectedDate);\n    const startOfWeek = new Date(currentDate);\n    startOfWeek.setDate(currentDate.getDate() - currentDate.getDay());\n    \n    const endOfWeek = new Date(startOfWeek);\n    endOfWeek.setDate(startOfWeek.getDate() + 6);\n    \n    setDateRange({\n      startDate: startOfWeek.toISOString().split('T')[0],\n      endDate: endOfWeek.toISOString().split('T')[0]\n    });\n    setViewMode('week');\n  };\n  \n  // Set month view dates\n  const setMonthView = () => {\n    const currentDate = new Date(selectedDate);\n    const startOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);\n    const endOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);\n    \n    setDateRange({\n      startDate: startOfMonth.toISOString().split('T')[0],\n      endDate: endOfMonth.toISOString().split('T')[0]\n    });\n    setViewMode('month');\n  };\n  \n  // Switch back to day view\n  const setDayView = () => {\n    setViewMode('day');\n  };\n  \n  // Get formatted date range text based on view mode\n  const getDateRangeText = () => {\n    if (viewMode === 'day') {\n      return `Schedule for ${formatDate(selectedDate)}`;\n    } \n    else if (viewMode === 'week') {\n      return `Week of ${formatDate(dateRange.startDate)} - ${formatDate(dateRange.endDate)}`;\n    }\n    else {\n      return `Month of ${new Date(dateRange.startDate).toLocaleString('en-US', {month: 'long', year: 'numeric'})}`;\n    }\n  };\n\n  // Reset create form to initial state\n  const resetCreateForm = () => {\n    setCreateForm({\n      route_id: '',\n      vehicle_id: '',\n      departure_date: systemDate,\n      departure_time: '08:00',\n      base_price: 0,\n      seat_types: [\n        { id: 'regular', name: 'Regular Seats', multiplier: 1.0, enabled: true },\n        { id: 'premium', name: 'Premium Seats', multiplier: 1.5, enabled: true },\n        { id: 'vip', name: 'VIP Seats', multiplier: 2.0, enabled: true }\n      ],\n      pricing_rules: [\n        { id: 'weekend', name: 'Weekend Pricing', type: 'surcharge', value: 15, enabled: false },\n        { id: 'holiday', name: 'Holiday Pricing', type: 'surcharge', value: 25, enabled: false },\n        { id: 'early_booking', name: 'Early Booking Discount', type: 'discount', value: 10, enabled: false }\n      ]\n    });\n    setRouteStops([]);\n  };\n\n  // Handle trip click\n  const handleTripClick = async (tripId) => {\n    setLoadingTripDetails(true);\n    try {\n      const response = await getTripDetails(tripId);\n      if (response.success) {\n        setSelectedTrip(response.data);\n        setShowTripDetailsModal(true);\n      } else {\n        alert('Failed to load trip details');\n      }\n    } catch (error) {\n      console.error('Error loading trip details:', error);\n      alert('Error loading trip details');\n    } finally {\n      setLoadingTripDetails(false);\n    }\n  };\n\n  // Handle edit trip\n  const handleEditTrip = async (trip) => {\n    setEditingTrip(trip);\n    \n    // Format datetime for input fields\n    const formatDateTimeForInput = (dateTimeString) => {\n      try {\n        const date = new Date(dateTimeString);\n        return date.toISOString().slice(0, 16); // YYYY-MM-DDTHH:mm format\n      } catch (error) {\n        return '';\n      }\n    };\n\n    setEditForm({\n      departure_datetime: formatDateTimeForInput(trip.departure_datetime),\n      estimated_arrival_datetime: formatDateTimeForInput(trip.estimated_arrival_datetime),\n      base_price: trip.base_price.toString(),\n      status: trip.status,\n      special_notes: trip.special_notes || ''\n    });\n    \n    setShowEditModal(true);\n  };\n\n  // Handle update trip\n  const handleUpdateTrip = async () => {\n    if (!editingTrip) return;\n\n    try {\n      setUpdatingTrip(true);\n\n      // Prepare update data\n      const updateData = {};\n      \n      if (editForm.departure_datetime) {\n        updateData.departure_datetime = new Date(editForm.departure_datetime).toISOString();\n      }\n      \n      if (editForm.estimated_arrival_datetime) {\n        updateData.estimated_arrival_datetime = new Date(editForm.estimated_arrival_datetime).toISOString();\n      }\n      \n      if (editForm.base_price) {\n        updateData.base_price = parseFloat(editForm.base_price);\n      }\n      \n      if (editForm.status) {\n        updateData.status = editForm.status;\n      }\n      \n      if (editForm.special_notes) {\n        updateData.special_notes = editForm.special_notes;\n      }\n\n      const response = await updateTrip(editingTrip.id, updateData);\n      \n      if (response.success) {\n        addNotification({\n          type: 'success',\n          message: 'Trip updated successfully!'\n        });\n        setShowEditModal(false);\n        setEditingTrip(null);\n        onRefresh(); // Refresh the schedule data\n      } else {\n        addNotification({\n          type: 'error',\n          message: 'Failed to update trip: ' + (response.message || 'Unknown error')\n        });\n      }\n    } catch (error) {\n      console.error('Error updating trip:', error);\n      alert('Error updating trip: ' + (error.message || 'Unknown error'));\n    } finally {\n      setUpdatingTrip(false);\n    }\n  };\n\n  // Handle delete trip\n  const handleDeleteTrip = async (trip) => {\n    if (!window.confirm(`Are you sure you want to delete the trip \"${trip.route_name}\" scheduled for ${formatDate(trip.departure_datetime)} at ${formatTime(trip.departure_datetime)}?`)) {\n      return;\n    }\n\n    try {\n      const response = await deleteTrip(trip.id);\n      \n      if (response.success) {\n        alert('Trip deleted successfully!');\n        onRefresh(); // Refresh the schedule data\n      } else {\n        alert('Failed to delete trip: ' + (response.message || 'Unknown error'));\n      }\n    } catch (error) {\n      console.error('Error deleting trip:', error);\n      alert('Error deleting trip: ' + (error.message || 'Unknown error'));\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-wrap justify-between items-center gap-4\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Schedule Management</h2>\n        <div className=\"flex flex-wrap items-center gap-3\">\n          {/* View mode selector */}\n          <div className=\"inline-flex rounded-md shadow-sm\">\n            <button\n              className={`px-4 py-2 text-sm font-medium ${viewMode === 'day' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-50'} border border-gray-300 rounded-l-md focus:z-10`}\n              onClick={setDayView}\n            >\n              Day\n            </button>\n            <button\n              className={`px-4 py-2 text-sm font-medium ${viewMode === 'week' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-50'} border-t border-b border-r border-gray-300 focus:z-10`}\n              onClick={setWeekView}\n            >\n              Week\n            </button>\n            <button\n              className={`px-4 py-2 text-sm font-medium ${viewMode === 'month' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-50'} border-t border-b border-r border-gray-300 rounded-r-md focus:z-10`}\n              onClick={setMonthView}\n            >\n              Month\n            </button>\n          </div>\n          \n          {/* Date selector */}\n          <input\n            type=\"date\"\n            value={selectedDate}\n            onChange={(e) => setSelectedDate(e.target.value)}\n            className=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            min={systemDate}\n            max=\"2025-07-31\"\n          />\n          \n          <button \n            className=\"btn-primary flex items-center\"\n            onClick={() => setShowCreateModal(true)}\n          >\n          <Calendar className=\"w-4 h-4 mr-2\" />\n          Create Schedule\n        </button>\n        </div>\n      </div>\n\n      {loadingSchedule ? (\n        <div className=\"card py-16\">\n          <div className=\"flex flex-col items-center justify-center\">\n            <div className=\"w-12 h-12 border-4 border-t-4 border-primary-600 border-t-transparent rounded-full animate-spin\"></div>\n            <p className=\"mt-4 text-gray-600\">Loading schedule data...</p>\n          </div>\n        </div>\n      ) : (\n      <div className=\"card\">\n          <h3 className=\"text-lg font-semibold mb-4\">\n            {getDateRangeText()}\n            <span className=\"ml-2 text-sm font-normal text-gray-600\">\n              ({filteredSchedule.length} trips)\n            </span>\n          </h3>\n          \n          {filteredSchedule.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500\">\n              <Calendar className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\n              <p>No trips scheduled for this period</p>\n            </div>\n          ) : viewMode === 'day' ? (\n            // Day view - simple list\n        <div className=\"space-y-3\">\n              {filteredSchedule.map((trip) => {\n                const occupiedSeats = trip.occupied_seats || (trip.total_seats - trip.available_seats);\n                const occupancyPercentage = trip.occupancy_percentage || \n                  Math.round((occupiedSeats / trip.total_seats) * 100);\n                \n            return (\n                  <div \n                    key={trip.id} \n                    className=\"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer\"\n                    onClick={() => handleTripClick(trip.id)}\n                  >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <h4 className=\"font-medium text-gray-900\">{trip.route_name}</h4>\n                          <div className=\"flex space-x-2\">\n                            <button \n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleTripClick(trip.id);\n                              }}\n                              className=\"text-primary-600 hover:text-primary-700\"\n                              title=\"View Details\"\n                            >\n                              <BarChart3 className=\"w-4 h-4\" />\n                            </button>\n                            <button \n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleEditTrip(trip);\n                              }}\n                              className=\"text-gray-400 hover:text-gray-600\" \n                              title=\"Edit\"\n                            >\n                              <Edit className=\"w-4 h-4\" />\n                            </button>\n                            <button \n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleDeleteTrip(trip);\n                              }}\n                              className=\"text-red-400 hover:text-red-600\" \n                              title=\"Delete\"\n                            >\n                              <Trash2 className=\"w-4 h-4\" />\n                            </button>\n                          </div>\n                        </div>\n                        <div className=\"text-sm text-gray-600 space-y-1\">\n                          <div className=\"flex items-center\">\n                            <MapPin className=\"w-4 h-4 mr-2\" />\n                            {trip.origin_name} → {trip.destination_name}\n                          </div>\n                          <div className=\"flex items-center justify-between\">\n                            <span>Departure: {formatTime(trip.departure_datetime)}</span>\n                            <span>Arrival: {formatTime(trip.estimated_arrival_datetime)}</span>\n                          </div>\n                          <div className=\"flex items-center justify-between\">\n                            <span>Vehicle: {trip.vehicle_number || trip.license_plate}</span>\n                            <span className=\"text-primary-600 font-medium\">Price: RM {trip.base_price}</span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          ) : (\n            // Week/Month view - grouped by date\n            <div className=\"space-y-6\">\n              {Object.entries(getTripsByDate()).length === 0 ? (\n                <div className=\"py-10 text-center text-gray-500\">\n                  No trips scheduled for this period\n                </div>\n              ) : (\n                Object.entries(getTripsByDate()).map(([date, trips]) => (\n                  <div key={date} className=\"py-4\">\n                    <div className=\"px-4 py-2 bg-gray-50 font-medium\">\n                      {new Date(date).toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' })}\n                    </div>\n                    \n                    <div className=\"divide-y divide-gray-100\">\n                      {trips.map(trip => (\n                        <div \n                          key={trip.id} \n                          className=\"p-4 hover:bg-gray-50 cursor-pointer transition-colors\"\n                          onClick={() => handleTripClick(trip.id)}\n                        >\n                          <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-4\">\n                              <div className=\"text-lg font-medium w-20 text-gray-900\">\n                                {formatTime(trip.departure_datetime)}\n                      </div>\n                              <div>\n                                <div className=\"font-medium text-gray-900\">{trip.route_name}</div>\n                      <div className=\"text-sm text-gray-600\">\n                                  {trip.origin_name} → {trip.destination_name}\n                      </div>\n                    </div>\n                  </div>\n                            \n                            <div className=\"flex items-center space-x-6\">\n                              <div className=\"text-sm text-gray-600\">\n                                {trip.vehicle_number || trip.license_plate}\n                      </div>\n                              \n                              <div>\n                                <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(trip.status)}`}>\n                                  {trip.status.replace('_', ' ').toUpperCase()}\n                                </span>\n                    </div>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Create Schedule Modal */}\n      {showCreateModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold\">Create New Trip Schedule</h3>\n              <button \n                onClick={() => setShowCreateModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X size={20} />\n              </button>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {/* Left Column - Basic Trip Information */}\n              <div className=\"space-y-4\">\n                <h4 className=\"font-medium text-gray-700\">Basic Trip Information</h4>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Route\n                  </label>\n                  <RouteSelector \n                    value={createForm.route_id}\n                    onChange={(value) => {\n                      setCreateForm(prev => ({ ...prev, route_id: value }));\n                      if (value) {\n                        // When route changes, load route stops\n                        getRouteStops(value).then(response => {\n                          if (response.success) {\n                            setRouteStops(response.data || []);\n                          } else {\n                            setRouteStops([]);\n                          }\n                        }).catch(err => {\n                          console.error('Error loading route stops:', err);\n                          setRouteStops([]);\n                        });\n                      } else {\n                        setRouteStops([]);\n                      }\n                    }}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Vehicle\n                  </label>\n                  <select\n                    value={createForm.vehicle_id}\n                    onChange={(e) => setCreateForm(prev => ({ ...prev, vehicle_id: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"\">Select a vehicle</option>\n                    {vehicles.map(vehicle => (\n                      <option key={vehicle.id} value={vehicle.id}>\n                        {vehicle.vehicle_number} - {vehicle.license_plate} ({vehicle.vehicle_type_name})\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Departure Date\n                    </label>\n                    <input\n                      type=\"date\"\n                      value={createForm.departure_date}\n                      onChange={(e) => setCreateForm(prev => ({ ...prev, departure_date: e.target.value }))}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      min={systemDate}\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Departure Time\n                    </label>\n                    <input\n                      type=\"time\"\n                      value={createForm.departure_time}\n                      onChange={(e) => setCreateForm(prev => ({ ...prev, departure_time: e.target.value }))}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n                </div>\n              </div>\n              \n              {/* Right Column - Pricing and Seats */}\n              <div className=\"space-y-4\">\n                <h4 className=\"font-medium text-gray-700\">Pricing Configuration</h4>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Base Price (RM)\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.50\"\n                    min=\"0\"\n                    value={createForm.base_price}\n                    onChange={(e) => setCreateForm(prev => ({ ...prev, base_price: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"e.g. 45.00\"\n                  />\n                </div>\n\n                {/* Seat Type Pricing */}\n                <div className=\"bg-gray-50 p-3 rounded-lg border border-gray-200\">\n                  <h5 className=\"text-sm font-medium text-gray-700 mb-2\">Seat Type Pricing</h5>\n                  <div className=\"space-y-3 mt-3\">\n                    {createForm.seat_types.map(seatType => (\n                      <div key={seatType.id} className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center\">\n                          <input \n                            type=\"checkbox\" \n                            id={`${seatType.id}-seats`} \n                            className=\"mr-2\" \n                            checked={seatType.enabled} \n                            onChange={(e) => {\n                              const updatedSeatTypes = createForm.seat_types.map(type => \n                                type.id === seatType.id ? { ...type, enabled: e.target.checked } : type\n                              );\n                              setCreateForm(prev => ({ ...prev, seat_types: updatedSeatTypes }));\n                            }}\n                          />\n                          <label htmlFor={`${seatType.id}-seats`} className=\"text-sm\">{seatType.name}</label>\n                        </div>\n                        <div className=\"text-sm flex items-center\">\n                          <span className=\"text-gray-500 mr-2\">Multiplier:</span>\n                          {seatType.id === 'regular' ? (\n                            <span className=\"font-medium\">1.0x</span>\n                          ) : (\n                            <input \n                              type=\"number\" \n                              step=\"0.1\" \n                              min=\"1\" \n                              className=\"w-16 px-2 py-1 border border-gray-300 rounded-md\" \n                              value={seatType.multiplier} \n                              onChange={(e) => handleSeatTypeChange(seatType.id, e.target.value)}\n                            />\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Dynamic Pricing Rules */}\n                <div className=\"bg-gray-50 p-3 rounded-lg border border-gray-200\">\n                  <h5 className=\"text-sm font-medium text-gray-700 mb-2\">Dynamic Pricing Rules</h5>\n                  <div className=\"space-y-3 mt-3\">\n                    {createForm.pricing_rules.map(rule => (\n                      <div key={rule.id} className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center\">\n                          <input \n                            type=\"checkbox\" \n                            id={rule.id} \n                            className=\"mr-2\" \n                            checked={rule.enabled}\n                            onChange={(e) => handlePricingRuleToggle(rule.id, e.target.checked)}\n                          />\n                          <label htmlFor={rule.id} className=\"text-sm\">{rule.name}</label>\n                        </div>\n                        <div className=\"text-sm flex items-center\">\n                          <span className=\"text-gray-500 mr-2\">{rule.id === 'early_booking' ? '-' : '+'}</span>\n                          <input \n                            type=\"number\" \n                            step=\"1\" \n                            min=\"0\" \n                            className=\"w-16 px-2 py-1 border border-gray-300 rounded-md\" \n                            value={rule.value} \n                            disabled={!rule.enabled}\n                            onChange={(e) => handlePricingRuleValueChange(rule.id, e.target.value)}\n                          />\n                          <span className=\"text-gray-500 ml-1\">%</span>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex space-x-3 mt-6\">\n              <button \n                className=\"btn-primary flex-1\"\n                onClick={handleCreateTrip}\n                disabled={creatingTrip || !createForm.route_id || !createForm.vehicle_id || !createForm.departure_date || !createForm.departure_time || !createForm.base_price}\n              >\n                {creatingTrip ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></div>\n                    Creating...\n                  </>\n                ) : 'Schedule Trip'}\n              </button>\n              <button \n                className=\"btn-secondary flex-1\"\n                onClick={() => setShowCreateModal(false)}\n                disabled={creatingTrip}\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Trip Details Modal */}\n      {showTripDetailsModal && selectedTrip && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold\">\n                {selectedTrip.trips_scheduled ? 'Route Details' : 'Trip Details'}\n              </h3>\n              <button \n                onClick={() => setShowTripDetailsModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n            \n            {/* Trip Header */}\n            <div className=\"bg-gray-50 p-4 rounded-lg mb-4\">\n              <div className=\"flex justify-between items-center\">\n                <div>\n                  <h4 className=\"font-semibold text-lg\">{selectedTrip.route_name}</h4>\n                  <p className=\"text-gray-600\">{selectedTrip.trip_number}</p>\n                </div>\n                {selectedTrip.trips_scheduled ? (\n                  <span className=\"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800\">\n                    ROUTE OVERVIEW\n                  </span>\n                ) : (\n                  <span className={`px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(selectedTrip.status)}`}>\n                    {selectedTrip.status.replace('_', ' ').toUpperCase()}\n                  </span>\n                )}\n              </div>\n            </div>\n            \n            {/* Trip Details Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n              {/* Left Column - Trip Information */}\n              <div className=\"space-y-4\">\n                <h4 className=\"font-medium text-gray-700 border-b pb-2\">\n                  {selectedTrip.trips_scheduled ? 'Route Information' : 'Trip Information'}\n                </h4>\n                \n                {selectedTrip.trips_scheduled ? (\n                  <>\n                    <div>\n                      <p className=\"text-sm text-gray-500\">Route</p>\n                      <p className=\"font-medium\">{selectedTrip.origin_name} → {selectedTrip.destination_name}</p>\n                    </div>\n                    \n                    <div>\n                      <p className=\"text-sm text-gray-500\">Scheduled Trips</p>\n                      <p className=\"font-medium\">{selectedTrip.trips_scheduled} trips</p>\n                    </div>\n                    \n                    <div>\n                      <p className=\"text-sm text-gray-500\">Total Passengers</p>\n                      <p className=\"font-medium\">{selectedTrip.total_passengers || 0} passengers</p>\n                    </div>\n                  </>\n                ) : (\n                  <>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <p className=\"text-sm text-gray-500\">Departure</p>\n                        <p className=\"font-medium\">{formatDate(selectedTrip.departure_datetime)}</p>\n                        <p className=\"text-sm\">{formatTime(selectedTrip.departure_datetime)}</p>\n                      </div>\n                      \n                      <div>\n                        <p className=\"text-sm text-gray-500\">Arrival (Est.)</p>\n                        <p className=\"font-medium\">{formatDate(selectedTrip.estimated_arrival_datetime)}</p>\n                        <p className=\"text-sm\">{formatTime(selectedTrip.estimated_arrival_datetime)}</p>\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <p className=\"text-sm text-gray-500\">Route</p>\n                      <p className=\"font-medium\">{selectedTrip.origin_name} → {selectedTrip.destination_name}</p>\n                      <p className=\"text-sm text-gray-600\">{selectedTrip.origin_city} to {selectedTrip.destination_city}</p>\n                    </div>\n                    \n                    <div>\n                      <p className=\"text-sm text-gray-500\">Vehicle</p>\n                      <p className=\"font-medium\">{selectedTrip.vehicle_model}</p>\n                      <p className=\"text-sm text-gray-600\">\n                        {selectedTrip.vehicle_number} | {selectedTrip.license_plate} | {selectedTrip.vehicle_type}\n                      </p>\n                    </div>\n                  </>\n                )}\n              </div>\n              \n              {/* Right Column - Occupancy & Pricing */}\n              <div className=\"space-y-4\">\n                <h4 className=\"font-medium text-gray-700 border-b pb-2\">Occupancy & Pricing</h4>\n                \n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-gray-500\">\n                      {selectedTrip.trips_scheduled ? 'Average Occupancy' : 'Seats'}\n                    </p>\n                    <p className=\"font-medium\">\n                      {selectedTrip.trips_scheduled ? \n                        `${selectedTrip.avg_occupancy || 0}%` : \n                        `${selectedTrip.occupied_seats} / ${selectedTrip.total_seats} occupied`\n                      }\n                    </p>\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-2\">\n                    <div className=\"w-20 bg-gray-200 rounded-full h-2\">\n                      <div \n                        className=\"h-2 rounded-full transition-all\"\n                        style={{ \n                          width: `${Math.min(selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0, 100)}%`,\n                          backgroundColor: (selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0) > 80 ? '#EF4444' : \n                                          (selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0) > 60 ? '#F59E0B' : '#10B981'\n                        }}\n                      ></div>\n                    </div>\n                    <span className=\"text-sm font-medium\">\n                      {selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0}%\n                    </span>\n                  </div>\n                </div>\n                \n                <div>\n                  <p className=\"text-sm text-gray-500\">\n                    {selectedTrip.trips_scheduled ? 'Total Revenue' : 'Base Price'}\n                  </p>\n                  <p className=\"font-medium\">\n                    RM {selectedTrip.trips_scheduled ? \n                      selectedTrip.total_revenue || 0 : \n                      selectedTrip.base_price}\n                  </p>\n                </div>\n                \n                {!selectedTrip.trips_scheduled && selectedTrip.seat_pricing && selectedTrip.seat_pricing.length > 0 && (\n                  <div>\n                    <p className=\"text-sm text-gray-500\">Seat Type Pricing</p>\n                    <div className=\"space-y-1 mt-1\">\n                      {selectedTrip.seat_pricing.map((pricing, index) => (\n                        <div key={index} className=\"flex justify-between text-sm\">\n                          <span>{pricing.seat_type_id.charAt(0).toUpperCase() + pricing.seat_type_id.slice(1)}</span>\n                          <span className=\"font-medium\">{pricing.price_multiplier}x</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                \n                {!selectedTrip.trips_scheduled && selectedTrip.pricing_rules && selectedTrip.pricing_rules.length > 0 && (\n                  <div>\n                    <p className=\"text-sm text-gray-500\">Pricing Rules</p>\n                    <div className=\"space-y-1 mt-1\">\n                      {selectedTrip.pricing_rules.map((rule, index) => (\n                        <div key={index} className=\"flex justify-between text-sm\">\n                          <span>{rule.rule_name.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}</span>\n                          <span className=\"font-medium\">\n                            {rule.rule_type === 'discount' ? '-' : '+'}{rule.rule_value}%\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n            \n            {/* Route Stops */}\n            {!selectedTrip.trips_scheduled && selectedTrip.stops && selectedTrip.stops.length > 0 && (\n              <div className=\"mb-6\">\n                <h4 className=\"font-medium text-gray-700 border-b pb-2 mb-4\">Route Stops</h4>\n                \n                <div className=\"space-y-4\">\n                  {selectedTrip.stops.map((stop, index) => {\n                    const isOrigin = index === 0;\n                    const isDestination = index === selectedTrip.stops.length - 1;\n                    \n                    return (\n                      <div key={stop.id} className=\"flex items-center\">\n                        <div className=\"relative\">\n                          {!isDestination && (\n                            <div className=\"h-full w-0.5 bg-blue-500 absolute left-2 top-3\"></div>\n                          )}\n                          {isOrigin || isDestination ? (\n                            <div className=\"h-4 w-4 rounded-full bg-blue-500 mt-1\"></div>\n                          ) : (\n                            <div className=\"h-4 w-4 rounded-full border-2 border-blue-500 bg-white mt-1\"></div>\n                          )}\n                        </div>\n                        \n                        <div className=\"ml-4 flex-1\">\n                          <div className=\"flex justify-between\">\n                            <div>\n                              <p className=\"font-medium\">\n                                {stop.location_name}\n                                {isOrigin && ' (Origin)'}\n                                {isDestination && ' (Destination)'}\n                              </p>\n                              <p className=\"text-sm text-gray-600\">{stop.location_city}</p>\n                            </div>\n                            \n                            {!isOrigin && (\n                              <div className=\"text-right\">\n                                <p className=\"text-sm text-gray-500\">\n                                  +{Math.floor(stop.arrival_offset_minutes / 60)} hrs \n                                  {stop.arrival_offset_minutes % 60 > 0 ? ` ${stop.arrival_offset_minutes % 60} mins` : ''}\n                                </p>\n                                {stop.price_from_origin > 0 && (\n                                  <p className=\"text-sm font-medium\">RM {stop.price_from_origin}</p>\n                                )}\n                              </div>\n                            )}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n            )}\n            \n            {/* Performance Data - Only for route details */}\n            {selectedTrip.trips_scheduled && (\n              <div className=\"mb-6\">\n                <h4 className=\"font-medium text-gray-700 border-b pb-2 mb-4\">Performance Data</h4>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div className=\"p-4 bg-gray-50 rounded-lg\">\n                    <div className=\"text-sm text-gray-500 mb-1\">Average Occupancy</div>\n                    <div className=\"flex items-center space-x-2\">\n                      <div className=\"text-xl font-semibold\">{selectedTrip.avg_occupancy || 0}%</div>\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                        <div \n                          className=\"h-2 rounded-full transition-all\"\n                          style={{ \n                            width: `${Math.min(selectedTrip.avg_occupancy || 0, 100)}%`,\n                            backgroundColor: (selectedTrip.avg_occupancy || 0) > 80 ? '#10B981' : \n                                            (selectedTrip.avg_occupancy || 0) > 60 ? '#F59E0B' : '#EF4444'\n                          }}\n                        ></div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"p-4 bg-gray-50 rounded-lg\">\n                    <div className=\"text-sm text-gray-500 mb-1\">Total Revenue</div>\n                    <div className=\"text-xl font-semibold text-green-600\">RM {selectedTrip.total_revenue || 0}</div>\n                  </div>\n                  \n                  <div className=\"p-4 bg-gray-50 rounded-lg\">\n                    <div className=\"text-sm text-gray-500 mb-1\">Total Passengers</div>\n                    <div className=\"text-xl font-semibold\">{selectedTrip.total_passengers || 0}</div>\n                  </div>\n                  \n                  <div className=\"p-4 bg-gray-50 rounded-lg\">\n                    <div className=\"text-sm text-gray-500 mb-1\">Average Price Per Trip</div>\n                    <div className=\"text-xl font-semibold\">\n                      RM {selectedTrip.trips_scheduled ? \n                        (selectedTrip.total_revenue / selectedTrip.trips_scheduled).toFixed(2) : 0}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n            \n            {/* Trips List - Only for route details */}\n            {selectedTrip.trips_scheduled && selectedTrip.trips && selectedTrip.trips.length > 0 && (\n              <div className=\"mb-6\">\n                <h4 className=\"font-medium text-gray-700 border-b pb-2 mb-4\">Scheduled Trips</h4>\n                \n                <div className=\"overflow-hidden border border-gray-200 rounded-lg\">\n                  <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Trip Number\n                        </th>\n                        <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Departure\n                        </th>\n                        <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Vehicle\n                        </th>\n                        <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Occupancy\n                        </th>\n                        <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Status\n                        </th>\n                        <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Actions\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                      {selectedTrip.trips.map((trip) => {\n                        const occupiedSeats = trip.occupied_seats || (trip.total_seats - trip.available_seats) || 0;\n                        const occupancyPercentage = trip.occupancy_percentage || \n                          (trip.total_seats ? Math.round((occupiedSeats / trip.total_seats) * 100) : 0);\n                          \n                        return (\n                          <tr key={trip.id} className=\"hover:bg-gray-50\">\n                            <td className=\"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900\">\n                              {trip.trip_number}\n                            </td>\n                            <td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-500\">\n                              <div>{formatDate(trip.departure_datetime)}</div>\n                              <div className=\"text-xs\">{formatTime(trip.departure_datetime)}</div>\n                            </td>\n                            <td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-500\">\n                              {trip.vehicle_number || trip.license_plate || 'N/A'}\n                            </td>\n                            <td className=\"px-4 py-3 whitespace-nowrap\">\n                              <div className=\"flex items-center\">\n                                <div className=\"w-16 bg-gray-200 rounded-full h-2 mr-2\">\n                                  <div \n                                    className=\"h-2 rounded-full transition-all\"\n                                    style={{ \n                                      width: `${Math.min(occupancyPercentage, 100)}%`,\n                                      backgroundColor: occupancyPercentage > 80 ? '#EF4444' : \n                                              occupancyPercentage > 60 ? '#F59E0B' : '#10B981'\n                                    }}\n                                  ></div>\n                                </div>\n                                <span className=\"text-xs font-medium\">\n                                  {occupancyPercentage}%\n                                </span>\n                              </div>\n                            </td>\n                            <td className=\"px-4 py-3 whitespace-nowrap\">\n                              <span className={`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(trip.status)}`}>\n                                {trip.status?.replace('_', ' ').toUpperCase() || 'N/A'}\n                              </span>\n                            </td>\n                            <td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-500\">\n                              <button \n                                onClick={() => handleTripClick(trip.id)}\n                                className=\"text-blue-600 hover:text-blue-800\"\n                              >\n                                View\n                              </button>\n                            </td>\n                          </tr>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            )}\n            \n            {/* Actions */}\n            <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n              <button\n                className=\"btn-secondary\"\n                onClick={() => setShowTripDetailsModal(false)}\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Edit Trip Modal */}\n      {showEditModal && editingTrip && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold\">Edit Trip</h3>\n              <button \n                onClick={() => setShowEditModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X size={20} />\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              {/* Trip Info Header */}\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <h4 className=\"font-medium text-gray-900\">{editingTrip.route_name}</h4>\n                <p className=\"text-sm text-gray-600\">\n                  {editingTrip.origin_name} → {editingTrip.destination_name}\n                </p>\n              </div>\n\n              {/* Edit Form */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Departure DateTime\n                  </label>\n                  <input\n                    type=\"datetime-local\"\n                    value={editForm.departure_datetime}\n                    onChange={(e) => setEditForm(prev => ({ ...prev, departure_datetime: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Estimated Arrival DateTime\n                  </label>\n                  <input\n                    type=\"datetime-local\"\n                    value={editForm.estimated_arrival_datetime}\n                    onChange={(e) => setEditForm(prev => ({ ...prev, estimated_arrival_datetime: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Base Price (RM)\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    value={editForm.base_price}\n                    onChange={(e) => setEditForm(prev => ({ ...prev, base_price: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Status\n                  </label>\n                  <select\n                    value={editForm.status}\n                    onChange={(e) => setEditForm(prev => ({ ...prev, status: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"scheduled\">Scheduled</option>\n                    <option value=\"boarding\">Boarding</option>\n                    <option value=\"in_transit\">In Transit</option>\n                    <option value=\"arrived\">Arrived</option>\n                    <option value=\"cancelled\">Cancelled</option>\n                    <option value=\"delayed\">Delayed</option>\n                  </select>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Special Notes\n                </label>\n                <textarea\n                  value={editForm.special_notes}\n                  onChange={(e) => setEditForm(prev => ({ ...prev, special_notes: e.target.value }))}\n                  rows={3}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Any special notes or instructions for this trip...\"\n                />\n              </div>\n            </div>\n\n            {/* Actions */}\n            <div className=\"flex space-x-3 mt-6\">\n              <button \n                className=\"btn-primary flex-1\"\n                onClick={handleUpdateTrip}\n                disabled={updatingTrip}\n              >\n                {updatingTrip ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></div>\n                    Updating...\n                  </>\n                ) : 'Update Trip'}\n              </button>\n              <button \n                className=\"btn-secondary flex-1\"\n                onClick={() => setShowEditModal(false)}\n                disabled={updatingTrip}\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Analytics Component\nconst Analytics = () => {\n  const [analyticsData, setAnalyticsData] = useState(null);\n  const [routePerformance, setRoutePerformance] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  \n  // Add state for trip details modal\n  const [showTripDetailsModal, setShowTripDetailsModal] = useState(false);\n  const [selectedTrip, setSelectedTrip] = useState(null);\n  const [loadingTripDetails, setLoadingTripDetails] = useState(false);\n  \n  // Helper function to get status color\n  const getStatusColor = (status) => {\n    switch (status?.toLowerCase()) {\n      case 'scheduled':\n        return 'bg-blue-100 text-blue-800';\n      case 'boarding':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'in_transit':\n        return 'bg-green-100 text-green-800';\n      case 'arrived':\n        return 'bg-purple-100 text-purple-800';\n      case 'cancelled':\n        return 'bg-red-100 text-red-800';\n      case 'delayed':\n        return 'bg-orange-100 text-orange-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n  \n  // Helper functions for date formatting\n  const formatTime = (datetime) => {\n    if (!datetime) return '';\n    try {\n      return new Date(datetime).toLocaleTimeString('en-US', {\n        hour: '2-digit',\n        minute: '2-digit',\n        hour12: true\n      });\n    } catch (error) {\n      console.error('Error formatting time:', error);\n      return '';\n    }\n  };\n  \n  const formatDate = (datetime) => {\n    if (!datetime) return '';\n    try {\n      return new Date(datetime).toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      });\n    } catch (error) {\n      console.error('Error formatting date:', error);\n      return '';\n    }\n  };\n\n  useEffect(() => {\n    const loadAnalyticsData = async () => {\n      setLoading(true);\n      try {\n        // 加载总体分析数据\n        const statsResponse = await getAnalyticsData();\n        if (statsResponse.success) {\n          setAnalyticsData(statsResponse.data);\n        } else {\n          setError('Failed to load analytics data');\n        }\n        \n        // 加载路线表现数据\n        const routeResponse = await getRouteAnalytics();\n        if (routeResponse.success) {\n          setRoutePerformance(routeResponse.data);\n        } else {\n          setError('Failed to load route performance data');\n        }\n      } catch (err) {\n        console.error('Error loading analytics:', err);\n        setError(handleApiError(err));\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    loadAnalyticsData();\n  }, []);\n  \n  // Handle route click to show details\n  const handleRouteClick = async (route) => {\n    console.log(\"Route clicked:\", route);\n    \n    try {\n      // 创建一个包含路线数据的对象，模拟行程详情结构\n      const routeDetails = {\n        id: route.id || Math.random().toString(36).substr(2, 9),\n        route_name: route.route_name || 'Unknown Route',\n        trip_number: `Route-${(route.route_name || 'Unknown').replace(/\\s+/g, '-')}`,\n        status: 'active',\n        origin_name: route.route_name ? route.route_name.split(' - ')[0] : 'Unknown',\n        destination_name: route.route_name ? (route.route_name.split(' - ')[1] || '') : '',\n        origin_city: route.route_name ? route.route_name.split(' - ')[0] : 'Unknown',\n        destination_city: route.route_name ? (route.route_name.split(' - ')[1] || '') : '',\n        base_price: route.total_revenue && route.trips_scheduled ? route.total_revenue / route.trips_scheduled : 0,\n        total_seats: 0,\n        available_seats: 0,\n        occupied_seats: route.total_passengers || 0,\n        occupancy_percentage: route.avg_occupancy || 0,\n        departure_datetime: new Date().toISOString(),\n        estimated_arrival_datetime: new Date(new Date().getTime() + 3600000).toISOString(),\n        vehicle_model: 'Various',\n        vehicle_number: 'Multiple',\n        license_plate: '-',\n        vehicle_type: 'Various',\n        // 添加路线特有的数据\n        trips_scheduled: route.trips_scheduled || 0,\n        total_passengers: route.total_passengers || 0,\n        total_revenue: route.total_revenue || 0,\n        avg_occupancy: route.avg_occupancy || 0,\n        // 空数组，避免undefined错误\n        stops: [],\n        seat_pricing: [],\n        pricing_rules: [],\n        // 添加行程列表，初始为空\n        trips: []\n      };\n      \n      // 获取该路线下的所有行程\n      try {\n        setLoadingTripDetails(true);\n        \n        // 获取当前日期作为默认参数\n        const today = new Date();\n        // 获取30天前的日期作为开始日期\n        const startDate = new Date(today);\n        startDate.setDate(today.getDate() - 30);\n        // 获取30天后的日期作为结束日期\n        const endDate = new Date(today);\n        endDate.setDate(today.getDate() + 30);\n        \n        // 格式化日期为ISO字符串\n        const startDateStr = startDate.toISOString().split('T')[0];\n        const endDateStr = endDate.toISOString().split('T')[0];\n        \n        console.log(`Fetching trips from ${startDateStr} to ${endDateStr}`);\n        const response = await getSchedules(startDateStr, endDateStr);\n        \n        if (response.success) {\n          // 过滤出与当前路线名称匹配的行程\n          const routeTrips = response.data.filter(trip => \n            trip.route_name === route.route_name\n          );\n          \n          // 添加行程列表到路线详情\n          routeDetails.trips = routeTrips;\n          console.log(\"Found trips for route:\", routeTrips.length);\n        } else {\n          console.error(\"Failed to fetch trips:\", response.message);\n        }\n      } catch (error) {\n        console.error(\"Error fetching trips for route:\", error);\n        // 继续执行，即使获取行程失败\n      } finally {\n        setLoadingTripDetails(false);\n      }\n      \n      // 设置选中的行程并显示模态框\n      setSelectedTrip(routeDetails);\n      setShowTripDetailsModal(true);\n    } catch (error) {\n      console.error(\"Error showing route details:\", error);\n      alert('Failed to show route details');\n    }\n  };\n  \n  // Handle trip click\n  const handleTripClick = async (tripId) => {\n    setLoadingTripDetails(true);\n    try {\n      const response = await getTripDetails(tripId);\n      if (response.success) {\n        setSelectedTrip(response.data);\n        setShowTripDetailsModal(true);\n      } else {\n        alert('Failed to load trip details');\n      }\n    } catch (error) {\n      console.error('Error loading trip details:', error);\n      alert('Error loading trip details');\n    } finally {\n      setLoadingTripDetails(false);\n    }\n  };\n  \n  if (loading) {\n    return (\n      <div className=\"flex justify-center py-20\">\n        <div className=\"flex flex-col items-center\">\n          <div className=\"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading analytics data...</p>\n        </div>\n      </div>\n    );\n  }\n  \n  if (error) {\n    return (\n      <div className=\"card bg-red-50 border-red-200\">\n        <div className=\"flex items-center text-red-600 mb-2\">\n          <AlertCircle className=\"w-5 h-5 mr-2\" />\n          <h3 className=\"font-medium\">Error loading analytics</h3>\n        </div>\n        <p className=\"text-red-600\">{error}</p>\n        <button \n          className=\"mt-4 px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-md\"\n          onClick={() => window.location.reload()}\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <h2 className=\"text-2xl font-bold text-gray-900\">Analytics & Reports</h2>\n      \n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"card\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600\">Total Revenue</p>\n              <p className=\"text-2xl font-bold text-green-600\">\n                RM {analyticsData?.totalRevenue?.toLocaleString() || '0'}\n              </p>\n            </div>\n            <TrendingUp className=\"w-8 h-8 text-green-600\" />\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600\">Average Occupancy</p>\n              <p className=\"text-2xl font-bold text-blue-600\">\n                {typeof analyticsData?.averageOccupancy === 'number' ? analyticsData.averageOccupancy.toFixed(1) : '0'}%\n              </p>\n            </div>\n            <Users className=\"w-8 h-8 text-blue-600\" />\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600\">Total Passengers</p>\n              <p className=\"text-2xl font-bold text-purple-600\">\n                {analyticsData?.totalPassengers?.toLocaleString() || '0'}\n              </p>\n            </div>\n            <Users className=\"w-8 h-8 text-purple-600\" />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"card\">\n        <h3 className=\"text-lg font-semibold mb-4\">Route Performance</h3>\n        <div className=\"space-y-4\">\n          {routePerformance.length > 0 ? routePerformance.map((route) => (\n            <div \n              key={route.route_name} \n              className=\"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors\"\n              onClick={() => handleRouteClick(route)}\n            >\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                  <h4 className=\"font-medium text-gray-900\">{route.route_name}</h4>\n                  <p className=\"text-sm text-gray-600\">{route.trips_scheduled} trips scheduled</p>\n                  </div>\n                  <div className=\"text-right space-y-1\">\n                  <div className=\"text-sm font-medium text-green-600\">\n                    RM {parseFloat(route.total_revenue || 0).toLocaleString()}\n                  </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <div className=\"w-20 bg-gray-200 rounded-full h-2\">\n                        <div \n                          className=\"h-2 rounded-full transition-all\"\n                          style={{ \n                          width: `${Math.min(route.avg_occupancy || 0, 100)}%`,\n                          backgroundColor: (route.avg_occupancy || 0) > 80 ? '#EF4444' : (route.avg_occupancy || 0) > 60 ? '#F59E0B' : '#10B981'\n                          }}\n                        ></div>\n                      </div>\n                    <span className=\"text-xs font-medium\">\n                      {typeof route.avg_occupancy === 'number' ? route.avg_occupancy.toFixed(0) : '0'}%\n                    </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n          )) : (\n            <div className=\"text-center py-8 text-gray-500\">\n              <p>No route performance data available</p>\n        </div>\n          )}\n      </div>\n    </div>\n      \n      {/* Trip Details Modal */}\n      {showTripDetailsModal && selectedTrip && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold\">\n                {selectedTrip.trips_scheduled ? 'Route Details' : 'Trip Details'}\n              </h3>\n              <button \n                onClick={() => setShowTripDetailsModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n            \n            {/* Trip Header */}\n            <div className=\"bg-gray-50 p-4 rounded-lg mb-4\">\n              <div className=\"flex justify-between items-center\">\n                <div>\n                  <h4 className=\"font-semibold text-lg\">{selectedTrip.route_name}</h4>\n                  <p className=\"text-gray-600\">{selectedTrip.trip_number}</p>\n                </div>\n                {selectedTrip.trips_scheduled ? (\n                  <span className=\"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800\">\n                    ROUTE OVERVIEW\n                  </span>\n                ) : (\n                  <span className={`px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(selectedTrip.status)}`}>\n                    {selectedTrip.status.replace('_', ' ').toUpperCase()}\n                  </span>\n                )}\n              </div>\n            </div>\n            \n            {/* Trip Details Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n              {/* Left Column - Trip Information */}\n          <div className=\"space-y-4\">\n                <h4 className=\"font-medium text-gray-700 border-b pb-2\">\n                  {selectedTrip.trips_scheduled ? 'Route Information' : 'Trip Information'}\n                </h4>\n                \n                {selectedTrip.trips_scheduled ? (\n                  <>\n            <div>\n                      <p className=\"text-sm text-gray-500\">Route</p>\n                      <p className=\"font-medium\">{selectedTrip.origin_name} → {selectedTrip.destination_name}</p>\n            </div>\n                    \n            <div>\n                      <p className=\"text-sm text-gray-500\">Scheduled Trips</p>\n                      <p className=\"font-medium\">{selectedTrip.trips_scheduled} trips</p>\n            </div>\n                    \n            <div>\n                      <p className=\"text-sm text-gray-500\">Total Passengers</p>\n                      <p className=\"font-medium\">{selectedTrip.total_passengers || 0} passengers</p>\n            </div>\n                  </>\n                ) : (\n                  <>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <p className=\"text-sm text-gray-500\">Departure</p>\n                        <p className=\"font-medium\">{formatDate(selectedTrip.departure_datetime)}</p>\n                        <p className=\"text-sm\">{formatTime(selectedTrip.departure_datetime)}</p>\n                      </div>\n                      \n                      <div>\n                        <p className=\"text-sm text-gray-500\">Arrival (Est.)</p>\n                        <p className=\"font-medium\">{formatDate(selectedTrip.estimated_arrival_datetime)}</p>\n                        <p className=\"text-sm\">{formatTime(selectedTrip.estimated_arrival_datetime)}</p>\n          </div>\n        </div>\n\n                    <div>\n                      <p className=\"text-sm text-gray-500\">Route</p>\n                      <p className=\"font-medium\">{selectedTrip.origin_name} → {selectedTrip.destination_name}</p>\n                      <p className=\"text-sm text-gray-600\">{selectedTrip.origin_city} to {selectedTrip.destination_city}</p>\n                    </div>\n                    \n                    <div>\n                      <p className=\"text-sm text-gray-500\">Vehicle</p>\n                      <p className=\"font-medium\">{selectedTrip.vehicle_model}</p>\n                      <p className=\"text-sm text-gray-600\">\n                        {selectedTrip.vehicle_number} | {selectedTrip.license_plate} | {selectedTrip.vehicle_type}\n                      </p>\n                    </div>\n                  </>\n                )}\n              </div>\n              \n              {/* Right Column - Occupancy & Pricing */}\n          <div className=\"space-y-4\">\n                <h4 className=\"font-medium text-gray-700 border-b pb-2\">Occupancy & Pricing</h4>\n                \n                <div className=\"flex items-center justify-between\">\n            <div>\n                    <p className=\"text-sm text-gray-500\">\n                      {selectedTrip.trips_scheduled ? 'Average Occupancy' : 'Seats'}\n                    </p>\n                    <p className=\"font-medium\">\n                      {selectedTrip.trips_scheduled ? \n                        `${selectedTrip.avg_occupancy || 0}%` : \n                        `${selectedTrip.occupied_seats} / ${selectedTrip.total_seats} occupied`\n                      }\n                    </p>\n            </div>\n                  \n                  <div className=\"flex items-center space-x-2\">\n                    <div className=\"w-20 bg-gray-200 rounded-full h-2\">\n                      <div \n                        className=\"h-2 rounded-full transition-all\"\n                        style={{ \n                          width: `${Math.min(selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0, 100)}%`,\n                          backgroundColor: (selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0) > 80 ? '#EF4444' : \n                                          (selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0) > 60 ? '#F59E0B' : '#10B981'\n                        }}\n                      ></div>\n                    </div>\n                    <span className=\"text-sm font-medium\">\n                      {selectedTrip.occupancy_percentage || selectedTrip.avg_occupancy || 0}%\n                    </span>\n                  </div>\n                </div>\n                \n            <div>\n                  <p className=\"text-sm text-gray-500\">\n                    {selectedTrip.trips_scheduled ? 'Total Revenue' : 'Base Price'}\n                  </p>\n                  <p className=\"font-medium\">\n                    RM {selectedTrip.trips_scheduled ? \n                      selectedTrip.total_revenue || 0 : \n                      selectedTrip.base_price}\n                  </p>\n            </div>\n                \n                {!selectedTrip.trips_scheduled && selectedTrip.seat_pricing && selectedTrip.seat_pricing.length > 0 && (\n            <div>\n                    <p className=\"text-sm text-gray-500\">Seat Type Pricing</p>\n                    <div className=\"space-y-1 mt-1\">\n                      {selectedTrip.seat_pricing.map((pricing, index) => (\n                        <div key={index} className=\"flex justify-between text-sm\">\n                          <span>{pricing.seat_type_id.charAt(0).toUpperCase() + pricing.seat_type_id.slice(1)}</span>\n                          <span className=\"font-medium\">{pricing.price_multiplier}x</span>\n            </div>\n                      ))}\n          </div>\n        </div>\n                )}\n                \n                {!selectedTrip.trips_scheduled && selectedTrip.pricing_rules && selectedTrip.pricing_rules.length > 0 && (\n                  <div>\n                    <p className=\"text-sm text-gray-500\">Pricing Rules</p>\n                    <div className=\"space-y-1 mt-1\">\n                      {selectedTrip.pricing_rules.map((rule, index) => (\n                        <div key={index} className=\"flex justify-between text-sm\">\n                          <span>{rule.rule_name.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}</span>\n                          <span className=\"font-medium\">\n                            {rule.rule_type === 'discount' ? '-' : '+'}{rule.rule_value}%\n                          </span>\n      </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n            \n            {/* Route Stops */}\n            {!selectedTrip.trips_scheduled && selectedTrip.stops && selectedTrip.stops.length > 0 && (\n              <div className=\"mb-6\">\n                <h4 className=\"font-medium text-gray-700 border-b pb-2 mb-4\">Route Stops</h4>\n                \n                <div className=\"space-y-4\">\n                  {selectedTrip.stops.map((stop, index) => {\n                    const isOrigin = index === 0;\n                    const isDestination = index === selectedTrip.stops.length - 1;\n                    \n                    return (\n                      <div key={stop.id} className=\"flex items-center\">\n                        <div className=\"relative\">\n                          {!isDestination && (\n                            <div className=\"h-full w-0.5 bg-blue-500 absolute left-2 top-3\"></div>\n                          )}\n                          {isOrigin || isDestination ? (\n                            <div className=\"h-4 w-4 rounded-full bg-blue-500 mt-1\"></div>\n                          ) : (\n                            <div className=\"h-4 w-4 rounded-full border-2 border-blue-500 bg-white mt-1\"></div>\n                          )}\n                        </div>\n                        \n                        <div className=\"ml-4 flex-1\">\n                          <div className=\"flex justify-between\">\n                            <div>\n                              <p className=\"font-medium\">\n                                {stop.location_name}\n                                {isOrigin && ' (Origin)'}\n                                {isDestination && ' (Destination)'}\n                              </p>\n                              <p className=\"text-sm text-gray-600\">{stop.location_city}</p>\n                            </div>\n                            \n                            {!isOrigin && (\n                              <div className=\"text-right\">\n                                <p className=\"text-sm text-gray-500\">\n                                  +{Math.floor(stop.arrival_offset_minutes / 60)} hrs \n                                  {stop.arrival_offset_minutes % 60 > 0 ? ` ${stop.arrival_offset_minutes % 60} mins` : ''}\n                                </p>\n                                {stop.price_from_origin > 0 && (\n                                  <p className=\"text-sm font-medium\">RM {stop.price_from_origin}</p>\n                                )}\n                              </div>\n                            )}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n            )}\n            \n            {/* Performance Data - Only for route details */}\n            {selectedTrip.trips_scheduled && (\n              <div className=\"mb-6\">\n                <h4 className=\"font-medium text-gray-700 border-b pb-2 mb-4\">Performance Data</h4>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div className=\"p-4 bg-gray-50 rounded-lg\">\n                    <div className=\"text-sm text-gray-500 mb-1\">Average Occupancy</div>\n                    <div className=\"flex items-center space-x-2\">\n                      <div className=\"text-xl font-semibold\">{selectedTrip.avg_occupancy || 0}%</div>\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                        <div \n                          className=\"h-2 rounded-full transition-all\"\n                          style={{ \n                            width: `${Math.min(selectedTrip.avg_occupancy || 0, 100)}%`,\n                            backgroundColor: (selectedTrip.avg_occupancy || 0) > 80 ? '#10B981' : \n                                            (selectedTrip.avg_occupancy || 0) > 60 ? '#F59E0B' : '#EF4444'\n                          }}\n                        ></div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"p-4 bg-gray-50 rounded-lg\">\n                    <div className=\"text-sm text-gray-500 mb-1\">Total Revenue</div>\n                    <div className=\"text-xl font-semibold text-green-600\">RM {selectedTrip.total_revenue || 0}</div>\n                  </div>\n                  \n                  <div className=\"p-4 bg-gray-50 rounded-lg\">\n                    <div className=\"text-sm text-gray-500 mb-1\">Total Passengers</div>\n                    <div className=\"text-xl font-semibold\">{selectedTrip.total_passengers || 0}</div>\n                  </div>\n                  \n                  <div className=\"p-4 bg-gray-50 rounded-lg\">\n                    <div className=\"text-sm text-gray-500 mb-1\">Average Price Per Trip</div>\n                    <div className=\"text-xl font-semibold\">\n                      RM {selectedTrip.trips_scheduled ? \n                        (selectedTrip.total_revenue / selectedTrip.trips_scheduled).toFixed(2) : 0}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n            \n            {/* Trips List - Only for route details */}\n            {selectedTrip.trips_scheduled && selectedTrip.trips && selectedTrip.trips.length > 0 && (\n              <div className=\"mb-6\">\n                <h4 className=\"font-medium text-gray-700 border-b pb-2 mb-4\">Scheduled Trips</h4>\n                \n                <div className=\"overflow-hidden border border-gray-200 rounded-lg\">\n                  <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Trip Number\n                        </th>\n                        <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Departure\n                        </th>\n                        <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Vehicle\n                        </th>\n                        <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Occupancy\n                        </th>\n                        <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Status\n                        </th>\n                        <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Actions\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                      {selectedTrip.trips.map((trip) => {\n                        const occupiedSeats = trip.occupied_seats || (trip.total_seats - trip.available_seats) || 0;\n                        const occupancyPercentage = trip.occupancy_percentage || \n                          (trip.total_seats ? Math.round((occupiedSeats / trip.total_seats) * 100) : 0);\n                          \n                        return (\n                          <tr key={trip.id} className=\"hover:bg-gray-50\">\n                            <td className=\"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900\">\n                              {trip.trip_number}\n                            </td>\n                            <td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-500\">\n                              <div>{formatDate(trip.departure_datetime)}</div>\n                              <div className=\"text-xs\">{formatTime(trip.departure_datetime)}</div>\n                            </td>\n                            <td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-500\">\n                              {trip.vehicle_number || trip.license_plate || 'N/A'}\n                            </td>\n                            <td className=\"px-4 py-3 whitespace-nowrap\">\n                              <div className=\"flex items-center\">\n                                <div className=\"w-16 bg-gray-200 rounded-full h-2 mr-2\">\n                                  <div \n                                    className=\"h-2 rounded-full transition-all\"\n                                    style={{ \n                                      width: `${Math.min(occupancyPercentage, 100)}%`,\n                                      backgroundColor: occupancyPercentage > 80 ? '#EF4444' : \n                                                      occupancyPercentage > 60 ? '#F59E0B' : '#10B981'\n                                    }}\n                                  ></div>\n                                </div>\n                                <span className=\"text-xs font-medium\">\n                                  {occupancyPercentage}%\n                                </span>\n                              </div>\n                            </td>\n                            <td className=\"px-4 py-3 whitespace-nowrap\">\n                              <span className={`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(trip.status)}`}>\n                                {trip.status?.replace('_', ' ').toUpperCase() || 'N/A'}\n                              </span>\n                            </td>\n                            <td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-500\">\n                              <button \n                                onClick={() => handleTripClick(trip.id)}\n                                className=\"text-blue-600 hover:text-blue-800\"\n                              >\n                                View\n                              </button>\n                            </td>\n                          </tr>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            )}\n            \n            {selectedTrip.trips_scheduled && selectedTrip.trips && selectedTrip.trips.length === 0 && (\n              <div className=\"mb-6 p-8 bg-gray-50 rounded-lg text-center\">\n                <p className=\"text-gray-500\">No trips found for this route</p>\n              </div>\n            )}\n            \n            {/* Actions */}\n            <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n              <button\n                className=\"btn-secondary\"\n                onClick={() => setShowTripDetailsModal(false)}\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// System Settings Component has been removed\n\n// Customer Service Component for Walk-in Ticket Sales\nconst CustomerService = () => {\n  const { locations, systemDate } = useApp();\n  const [currentStep, setCurrentStep] = useState(1); // 1: Search, 2: Select Trip, 3: Customer Info, 4: Payment\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedTrip, setSelectedTrip] = useState(null);\n  const [customerInfo, setCustomerInfo] = useState({\n    fullName: '',\n    phone: '',\n    email: '',\n    icNumber: '',\n    passengerCount: 1\n  });\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [error, setError] = useState(null);\n\n  // 添加热门行程\n  const [popularTrip, setPopularTrip] = useState({\n    id: '1',\n    route: { name: 'KL - Johor Bahru Express' },\n    origin: 'Kuala Lumpur',\n    destination: 'Johor Bahru',\n    departureTime: '08:00 AM',\n    price: 'RM 45.00'\n  });\n\n  const [searchForm, setSearchForm] = useState({\n    origin: '',\n    destination: '',\n    date: systemDate,\n    isRoundTrip: false,\n    returnDate: format(addDays(new Date(systemDate), 1), 'yyyy-MM-dd')\n  });\n\n  // 添加处理热门行程选择的函数\n  const handlePopularTripSelect = (trip) => {\n    // 根据热门行程设置表单值\n    const fromLoc = locations.find(loc => loc.city === trip.origin);\n    const toLoc = locations.find(loc => loc.city === trip.destination);\n    \n    if (fromLoc) setSearchForm(prev => ({ ...prev, origin: fromLoc.id }));\n    if (toLoc) setSearchForm(prev => ({ ...prev, destination: toLoc.id }));\n    \n    // 自动搜索\n    handleSearch();\n  };\n\n  const handleSearch = async () => {\n    setIsProcessing(true);\n    \n    try {\n      const searchParams = {\n        origin: searchForm.origin,\n        destination: searchForm.destination,\n        departureDate: searchForm.date,\n        passengers: customerInfo.passengerCount\n      };\n\n      const response = await searchTrips(searchParams);\n      \n      if (response.success) {\n        setSearchResults(response.data);\n        setCurrentStep(2);\n      } else {\n        setError('Failed to search trips. Please try again.');\n      }\n    } catch (err) {\n      console.error('Search error:', err);\n      setError(handleApiError(err));\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleTripSelect = (trip) => {\n    setSelectedTrip(trip);\n    setCurrentStep(3);\n  };\n\n  const handleCustomerSubmit = () => {\n    if (customerInfo.fullName && customerInfo.phone) {\n      setCurrentStep(4);\n    }\n  };\n\n  const handlePaymentComplete = () => {\n    // Process booking\n    const bookingRef = `TBS${format(new Date(systemDate), 'yyyyMMddHHmm')}`;\n    alert(`Booking confirmed! Reference: ${bookingRef}`);\n    \n    // Reset form\n    setCurrentStep(1);\n    setSearchResults([]);\n    setSelectedTrip(null);\n    setCustomerInfo({ fullName: '', phone: '', email: '', icNumber: '', passengerCount: 1 });\n  };\n\n  const resetSearch = () => {\n    setCurrentStep(1);\n    setSearchResults([]);\n    setSelectedTrip(null);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Error Message */}\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0\">\n              <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n              </svg>\n            </div>\n            <div className=\"ml-3\">\n              <p className=\"text-sm text-red-700\">{error}</p>\n              <button \n                onClick={() => setError(null)}\n                className=\"mt-2 text-red-800 underline hover:text-red-900 text-sm\"\n              >\n                Dismiss\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Customer Service Portal</h2>\n          <p className=\"text-gray-600\">Help walk-in customers purchase tickets quickly and efficiently</p>\n        </div>\n        {currentStep > 1 && (\n          <button onClick={resetSearch} className=\"btn-secondary\">\n            New Search\n          </button>\n        )}\n      </div>\n\n      {/* Progress Steps */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4\">\n        <div className=\"flex items-center justify-between\">\n          {['Search Trips', 'Select Trip', 'Customer Info', 'Payment'].map((step, index) => (\n            <div key={index} className=\"flex items-center\">\n              <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\n                currentStep > index + 1 ? 'bg-blue-500 text-white' :\n                currentStep === index + 1 ? 'bg-blue-600 text-white' :\n                'bg-gray-200 text-gray-600'\n              }`}>\n                {currentStep > index + 1 ? '✓' : index + 1}\n              </div>\n              <span className={`ml-2 text-sm font-medium ${\n                currentStep >= index + 1 ? 'text-gray-900' : 'text-gray-500'\n              }`}>\n                {step}\n              </span>\n              {index < 3 && (\n                <div className={`w-8 h-0.5 mx-4 ${\n                  currentStep > index + 1 ? 'bg-blue-500' : 'bg-gray-200'\n                }`}></div>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Step 1: Search Form */}\n      {currentStep === 1 && (\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          <div className=\"md:col-span-2\">\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">Search Available Trips</h3>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n                <div>\n                  <label className=\"label\">From</label>\n                  <select\n                    value={searchForm.origin}\n                    onChange={(e) => setSearchForm(prev => ({ ...prev, origin: e.target.value }))}\n                    className=\"input w-full\"\n                    required\n                  >\n                    <option value=\"\">Select departure location</option>\n                    {locations.map(location => (\n                      <option key={location.id} value={location.id}>\n                        {location.name}, {location.city}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"label\">To</label>\n                  <select\n                    value={searchForm.destination}\n                    onChange={(e) => setSearchForm(prev => ({ ...prev, destination: e.target.value }))}\n                    className=\"input w-full\"\n                    required\n                  >\n                    <option value=\"\">Select arrival location</option>\n                    {locations.map(location => (\n                      <option key={location.id} value={location.id}>\n                        {location.name}, {location.city}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n                <div>\n                  <label className=\"label\">Date</label>\n                  <input\n                    type=\"date\"\n                    value={searchForm.date}\n                    onChange={(e) => setSearchForm(prev => ({ ...prev, date: e.target.value }))}\n                    className=\"input w-full\"\n                    min={format(new Date(), 'yyyy-MM-dd')}\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"label\">Passengers</label>\n                  <select\n                    value={customerInfo.passengerCount}\n                    onChange={(e) => setCustomerInfo(prev => ({ ...prev, passengerCount: parseInt(e.target.value) }))}\n                    className=\"input w-full\"\n                  >\n                    {[1, 2, 3, 4, 5, 6, 7, 8].map(num => (\n                      <option key={num} value={num}>\n                        {num} {num === 1 ? 'passenger' : 'passengers'}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n              \n              <button\n                onClick={handleSearch}\n                disabled={isProcessing || !searchForm.origin || !searchForm.destination}\n                className=\"btn-primary w-full flex items-center justify-center\"\n              >\n                {isProcessing ? (\n                  <>\n                    <div className=\"spinner-sm mr-2\"></div>\n                    Searching...\n                  </>\n                ) : (\n                  <>\n                    <Search className=\"w-4 h-4 mr-2\" />\n                    Search Trips\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n          \n          {/* Popular Trip Card */}\n          <div>\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">Popular Trip</h3>\n              <PopularTrip \n                trip={popularTrip} \n                onSelect={handlePopularTripSelect} \n              />\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Step 2: Trip Selection */}\n      {currentStep === 2 && (\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">Available Trips ({searchResults.length} found)</h3>\n          \n          {searchResults.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500\">\n              <p>No trips found for the selected route and date.</p>\n              <button onClick={resetSearch} className=\"btn-primary mt-4\">Try Another Search</button>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {searchResults.map(trip => (\n                <div key={trip.id} className=\"border border-gray-200 rounded-lg p-4 hover:border-blue-300 cursor-pointer\"\n                     onClick={() => handleTripSelect(trip)}>\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div>\n                          <div className=\"font-semibold text-lg\">{trip.route.name}</div>\n                          <div className=\"text-sm text-gray-600\">\n                            {locations.find(l => l.id === trip.route.originId)?.city} → \n                            {locations.find(l => l.id === trip.route.destinationId)?.city}\n                          </div>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"font-semibold\">{trip.departureDatetime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>\n                          <div className=\"text-sm text-gray-600\">Departure</div>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"font-semibold\">{trip.arrivalDatetime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>\n                          <div className=\"text-sm text-gray-600\">Arrival</div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"text-2xl font-bold text-blue-600\">RM {trip.route.basePrice}</div>\n                      <div className=\"text-sm text-gray-600\">{trip.availableSeats} seats available</div>\n                      <div className={`text-xs px-2 py-1 rounded-full ${\n                        calculateOccupancy(trip) > 80 ? 'bg-red-100 text-red-600' :\n                        calculateOccupancy(trip) > 60 ? 'bg-yellow-100 text-yellow-600' :\n                        'bg-green-100 text-green-600'\n                      }`}>\n                        {calculateOccupancy(trip)}% occupied\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Step 3: Customer Information */}\n      {currentStep === 3 && selectedTrip && (\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">Customer Information</h3>\n          \n          {/* Selected Trip Summary */}\n          <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\n            <h4 className=\"font-semibold mb-2\">Selected Trip</h4>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <div className=\"font-medium\">{selectedTrip.route.name}</div>\n                <div className=\"text-sm text-gray-600\">\n                  {selectedTrip.departureDatetime.toLocaleDateString()} at {selectedTrip.departureDatetime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}\n                </div>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"text-lg font-bold text-blue-600\">RM {selectedTrip.route.basePrice * customerInfo.passengerCount}</div>\n                <div className=\"text-sm text-gray-600\">{customerInfo.passengerCount} passenger{customerInfo.passengerCount > 1 ? 's' : ''}</div>\n              </div>\n            </div>\n          </div>\n          \n          {/* Customer Form */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n            <div>\n              <label className=\"label\">Full Name *</label>\n              <input\n                type=\"text\"\n                value={customerInfo.fullName}\n                onChange={(e) => setCustomerInfo(prev => ({ ...prev, fullName: e.target.value }))}\n                className=\"input w-full\"\n                placeholder=\"Enter customer's full name\"\n                required\n              />\n            </div>\n            \n            <div>\n              <label className=\"label\">Phone Number *</label>\n              <input\n                type=\"tel\"\n                value={customerInfo.phone}\n                onChange={(e) => setCustomerInfo(prev => ({ ...prev, phone: e.target.value }))}\n                className=\"input w-full\"\n                placeholder=\"+60123456789\"\n                required\n              />\n            </div>\n            \n            <div>\n              <label className=\"label\">Email Address</label>\n              <input\n                type=\"email\"\n                value={customerInfo.email}\n                onChange={(e) => setCustomerInfo(prev => ({ ...prev, email: e.target.value }))}\n                className=\"input w-full\"\n                placeholder=\"customer@email.com\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"label\">IC Number</label>\n              <input\n                type=\"text\"\n                value={customerInfo.icNumber}\n                onChange={(e) => setCustomerInfo(prev => ({ ...prev, icNumber: e.target.value }))}\n                className=\"input w-full\"\n                placeholder=\"123456-78-9012\"\n              />\n            </div>\n          </div>\n          \n          <div className=\"flex space-x-4\">\n            <button onClick={() => setCurrentStep(2)} className=\"btn-secondary\">\n              Back to Trip Selection\n            </button>\n            <button \n              onClick={handleCustomerSubmit}\n              disabled={!customerInfo.fullName || !customerInfo.phone}\n              className=\"btn-primary\"\n            >\n              Continue to Payment\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Step 4: Payment */}\n      {currentStep === 4 && selectedTrip && (\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">Payment & Confirmation</h3>\n          \n          {/* Booking Summary */}\n          <div className=\"bg-gray-50 rounded-lg p-6 mb-6\">\n            <h4 className=\"font-semibold mb-4\">Booking Summary</h4>\n            \n            <div className=\"space-y-3\">\n              <div className=\"flex justify-between\">\n                <span>Route:</span>\n                <span className=\"font-medium\">{selectedTrip.route.name}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Date & Time:</span>\n                <span className=\"font-medium\">\n                  {selectedTrip.departureDatetime.toLocaleDateString()} at {selectedTrip.departureDatetime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Passenger:</span>\n                <span className=\"font-medium\">{customerInfo.fullName}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Phone:</span>\n                <span className=\"font-medium\">{customerInfo.phone}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Passengers:</span>\n                <span className=\"font-medium\">{customerInfo.passengerCount}</span>\n              </div>\n              <hr />\n              <div className=\"flex justify-between text-lg font-bold\">\n                <span>Total Amount:</span>\n                <span className=\"text-blue-600\">RM {selectedTrip.route.basePrice * customerInfo.passengerCount}</span>\n              </div>\n            </div>\n          </div>\n          \n          {/* Payment Methods */}\n          <div className=\"mb-6\">\n            <h4 className=\"font-semibold mb-3\">Payment Method</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <button className=\"border-2 border-blue-500 bg-blue-50 text-blue-700 rounded-lg p-4 text-center\">\n                💳 Card Payment\n              </button>\n              <button className=\"border-2 border-gray-200 hover:border-gray-300 rounded-lg p-4 text-center\">\n                💰 Cash Payment\n              </button>\n              <button className=\"border-2 border-gray-200 hover:border-gray-300 rounded-lg p-4 text-center\">\n                📱 E-Wallet\n              </button>\n            </div>\n          </div>\n          \n          <div className=\"flex space-x-4\">\n            <button onClick={() => setCurrentStep(3)} className=\"btn-secondary\">\n              Back to Customer Info\n            </button>\n            <button onClick={handlePaymentComplete} className=\"btn-primary\">\n              Confirm Payment & Issue Ticket\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Route Management Component\nconst RouteManagement = ({ routes = [], onRefresh }) => {\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [locations, setLocations] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [createForm, setCreateForm] = useState({\n    name: '',\n    base_price: 0,\n    stops: []\n  });\n\n  // Load locations for route creation\n  useEffect(() => {\n    const loadLocations = async () => {\n      try {\n        const response = await getLocationsForRoutes();\n        if (response.success) {\n          setLocations(response.data);\n        }\n      } catch (error) {\n        console.error('Error loading locations:', error);\n      }\n    };\n\n    loadLocations();\n  }, []);\n\n  const handleAddStop = () => {\n    setCreateForm(prev => ({\n      ...prev,\n      stops: [\n        ...prev.stops,\n        {\n          location_id: '',\n          is_origin: prev.stops.length === 0, // 第一个站点默认为起点\n          is_destination: false,\n          arrival_offset_minutes: prev.stops.length === 0 ? 0 : 30, // 起点的到达时间偏移为0\n          departure_offset_minutes: 5,\n          price_from_origin: 0\n        }\n      ]\n    }));\n  };\n\n  const handleRemoveStop = (index) => {\n    setCreateForm(prev => {\n      const newStops = prev.stops.filter((_, i) => i !== index);\n      \n      // 如果删除了起点，将第一个站点设为新的起点\n      if (prev.stops[index].is_origin && newStops.length > 0) {\n        newStops[0].is_origin = true;\n        newStops[0].arrival_offset_minutes = 0;\n      }\n      \n      // 如果删除了终点，将最后一个站点设为新的终点\n      if (prev.stops[index].is_destination && newStops.length > 0) {\n        newStops[newStops.length - 1].is_destination = true;\n      }\n      \n      return { ...prev, stops: newStops };\n    });\n  };\n\n  const handleStopChange = (index, field, value) => {\n    setCreateForm(prev => {\n      const newStops = [...prev.stops];\n      \n      // 特殊处理起点和终点的设置\n      if (field === 'is_origin' && value === true) {\n        // 将其他站点的is_origin设为false\n        newStops.forEach((stop, i) => {\n          if (i !== index) stop.is_origin = false;\n        });\n        // 起点的到达时间偏移设为0\n        newStops[index].arrival_offset_minutes = 0;\n      } else if (field === 'is_destination' && value === true) {\n        // 将其他站点的is_destination设为false\n        newStops.forEach((stop, i) => {\n          if (i !== index) stop.is_destination = false;\n        });\n      }\n      \n      newStops[index] = {\n        ...newStops[index],\n        [field]: value\n      };\n      \n      return { ...prev, stops: newStops };\n    });\n  };\n\n  const handleCreateRoute = async () => {\n    // 验证表单\n    if (createForm.name.trim() === '') {\n      alert('请输入路线名称');\n      return;\n    }\n    \n    if (createForm.stops.length < 2) {\n      alert('路线至少需要两个站点');\n      return;\n    }\n    \n    // 确保有起点和终点\n    const hasOrigin = createForm.stops.some(stop => stop.is_origin);\n    const hasDestination = createForm.stops.some(stop => stop.is_destination);\n    \n    if (!hasOrigin) {\n      alert('请设置一个起点站');\n      return;\n    }\n    \n    if (!hasDestination) {\n      alert('请设置一个终点站');\n      return;\n    }\n    \n    // 确保所有站点都有选择位置\n    const allLocationsSelected = createForm.stops.every(stop => stop.location_id);\n    \n    if (!allLocationsSelected) {\n      alert('请为所有站点选择位置');\n      return;\n    }\n\n    // 准备提交的数据\n    const routeData = {\n      name: createForm.name,\n      base_price: createForm.base_price,\n      stops: createForm.stops.map(stop => ({\n        ...stop,\n        arrival_offset_minutes: parseInt(stop.arrival_offset_minutes),\n        departure_offset_minutes: parseInt(stop.departure_offset_minutes),\n        price_from_origin: parseFloat(stop.price_from_origin)\n      }))\n    };\n    \n    // 获取起点和终点ID，用于兼容旧的API\n    const originStop = routeData.stops.find(stop => stop.is_origin);\n    const destinationStop = routeData.stops.find(stop => stop.is_destination);\n    \n    if (originStop && destinationStop) {\n      routeData.origin_id = originStop.location_id;\n      routeData.destination_id = destinationStop.location_id;\n    }\n    \n    setLoading(true);\n    try {\n      const response = await createRoute(routeData);\n      if (response.success) {\n        setShowCreateModal(false);\n        setCreateForm({\n          name: '',\n          base_price: 0,\n          stops: []\n        });\n        onRefresh();\n        alert('路线创建成功！');\n      } else {\n        alert('创建路线失败: ' + (response.message || '未知错误'));\n      }\n    } catch (error) {\n      console.error('创建路线时出错:', error);\n      alert('创建路线时出错');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 自动生成路线名称\n  const generateRouteName = () => {\n    const originStop = createForm.stops.find(stop => stop.is_origin);\n    const destinationStop = createForm.stops.find(stop => stop.is_destination);\n    \n    if (!originStop || !destinationStop) return;\n    \n    const originLocation = locations.find(loc => loc.id === originStop.location_id);\n    const destinationLocation = locations.find(loc => loc.id === destinationStop.location_id);\n    \n    if (originLocation && destinationLocation) {\n      const routeName = `${originLocation.city} - ${destinationLocation.city} Express`;\n      setCreateForm(prev => ({\n        ...prev,\n        name: routeName\n      }));\n    }\n  };\n\n  // Format duration from minutes to hours and minutes\n  const formatDuration = (minutes) => {\n    if (!minutes) return 'N/A';\n    const hours = Math.floor(minutes / 60);\n    const mins = minutes % 60;\n    return `${hours}h ${mins}m`;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Route Management</h2>\n        <button \n          className=\"btn-primary flex items-center\"\n          onClick={() => setShowCreateModal(true)}\n        >\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Create New Route\n        </button>\n      </div>\n\n      {/* Routes List */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {routes.map((route) => (\n          <div key={route.id} className=\"card\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\n                  <Map className=\"w-5 h-5 text-blue-600\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-gray-900\">{route.name}</h3>\n                  <p className=\"text-sm text-gray-600\">{route.route_code}</p>\n                </div>\n              </div>\n              <div className=\"text-sm text-gray-500\">\n                RM {route.base_price}\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n              <MapPin className=\"w-4 h-4\" />\n              <span>{route.origin_name} → {route.destination_name}</span>\n            </div>\n            \n            {/* Route Details */}\n            <div className=\"mt-3 grid grid-cols-3 gap-2 text-xs\">\n              <div>\n                <span className=\"text-gray-500\">Distance:</span>\n                <span className=\"font-medium ml-1\">{route.distance_km || 'N/A'} km</span>\n              </div>\n              <div>\n                <span className=\"text-gray-500\">Duration:</span>\n                <span className=\"font-medium ml-1\">{formatDuration(route.estimated_duration_minutes)}</span>\n              </div>\n              <div>\n                <span className=\"text-gray-500\">Price:</span>\n                <span className=\"font-medium ml-1\">RM {route.base_price}</span>\n              </div>\n            </div>\n            \n            {route.total_trips > 0 && (\n              <div className=\"mt-3 flex items-center justify-between text-xs\">\n                <span className=\"text-gray-500\">Trip Count:</span>\n                <span className=\"font-medium\">{route.total_trips} trips</span>\n              </div>\n            )}\n            \n            {route.avg_occupancy > 0 && (\n              <div className=\"flex items-center justify-between text-xs\">\n                <span className=\"text-gray-500\">Avg. Occupation:</span>\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-16 bg-gray-200 rounded-full h-2\">\n                    <div \n                      className=\"h-2 rounded-full transition-all\"\n                      style={{ \n                        width: `${Math.min(route.avg_occupancy || 0, 100)}%`,\n                        backgroundColor: (route.avg_occupancy || 0) > 80 ? '#EF4444' : (route.avg_occupancy || 0) > 60 ? '#F59E0B' : '#10B981'\n                      }}\n                    ></div>\n                  </div>\n                  <span className=\"font-medium\">\n                    {typeof route.avg_occupancy === 'number' ? route.avg_occupancy.toFixed(0) : '0'}%\n                  </span>\n                </div>\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {/* Create Route Modal */}\n      {showCreateModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n            <h3 className=\"text-lg font-semibold mb-4\">创建新路线</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  路线名称\n                </label>\n                <div className=\"flex space-x-2\">\n                  <input\n                    type=\"text\"\n                    value={createForm.name}\n                    onChange={(e) => setCreateForm(prev => ({ ...prev, name: e.target.value }))}\n                    className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"例如：吉隆坡 - 槟城快车\"\n                    required\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={generateRouteName}\n                    className=\"px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200\"\n                    title=\"根据起点和终点自动生成路线名称\"\n                  >\n                    自动生成\n                  </button>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  基本票价 (RM)\n                </label>\n                <input\n                  type=\"number\"\n                  step=\"0.50\"\n                  min=\"0\"\n                  value={createForm.base_price}\n                  onChange={(e) => setCreateForm(prev => ({ ...prev, base_price: parseFloat(e.target.value) }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"例如：45.00\"\n                  required\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">这是从起点到终点的全程票价</p>\n              </div>\n\n              {/* 站点管理 */}\n              <div>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    路线站点\n                  </label>\n                  <button \n                    type=\"button\" \n                    className=\"text-sm text-blue-600 hover:text-blue-800 flex items-center\"\n                    onClick={handleAddStop}\n                  >\n                    <Plus className=\"w-4 h-4 mr-1\" />\n                    添加站点\n                  </button>\n                </div>\n\n                {createForm.stops.length === 0 ? (\n                  <div className=\"text-sm text-gray-500 text-center py-8 border border-dashed border-gray-300 rounded-md\">\n                    <div className=\"mb-2\">还没有添加任何站点</div>\n                    <button \n                      type=\"button\"\n                      className=\"btn-primary text-sm px-4 py-2\"\n                      onClick={handleAddStop}\n                    >\n                      添加第一个站点\n                    </button>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {createForm.stops.map((stop, index) => (\n                      <div key={index} className={`p-4 border rounded-md ${\n                        stop.is_origin ? 'bg-blue-50 border-blue-200' : \n                        stop.is_destination ? 'bg-green-50 border-green-200' : \n                        'bg-gray-50 border-gray-200'\n                      }`}>\n                        <div className=\"flex justify-between items-center mb-3\">\n                          <div className=\"flex items-center space-x-2\">\n                            <h4 className=\"text-sm font-medium text-gray-700\">站点 #{index + 1}</h4>\n                            {stop.is_origin && (\n                              <span className=\"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded-full\">起点</span>\n                            )}\n                            {stop.is_destination && (\n                              <span className=\"px-2 py-0.5 bg-green-100 text-green-800 text-xs rounded-full\">终点</span>\n                            )}\n                          </div>\n                          <button \n                            type=\"button\" \n                            className=\"text-sm text-red-600 hover:text-red-800\"\n                            onClick={() => handleRemoveStop(index)}\n                          >\n                            <X className=\"w-4 h-4\" />\n                          </button>\n                        </div>\n                        \n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3\">\n                          <div>\n                            <label className=\"block text-xs text-gray-700 mb-1\">\n                              位置\n                            </label>\n                            <select\n                              value={stop.location_id}\n                              onChange={(e) => handleStopChange(index, 'location_id', e.target.value)}\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                              required\n                            >\n                              <option value=\"\">选择位置</option>\n                              {locations.filter(loc => \n                                !createForm.stops.some((s, i) => i !== index && s.location_id === loc.id)\n                              ).map(location => (\n                                <option key={location.id} value={location.id}>\n                                  {location.name}, {location.city}\n                                </option>\n                              ))}\n                            </select>\n                          </div>\n                          \n                          <div>\n                            <label className=\"block text-xs text-gray-700 mb-1\">\n                              从起点的票价 (RM)\n                            </label>\n                            <input\n                              type=\"number\"\n                              step=\"0.50\"\n                              min=\"0\"\n                              value={stop.price_from_origin}\n                              onChange={(e) => handleStopChange(index, 'price_from_origin', parseFloat(e.target.value))}\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                            />\n                          </div>\n                        </div>\n                        \n                        <div className=\"grid grid-cols-2 gap-3 mb-3\">\n                          <div>\n                            <label className=\"block text-xs text-gray-700 mb-1\">\n                              到达时间偏移（分钟）\n                            </label>\n                            <input\n                              type=\"number\"\n                              min=\"0\"\n                              value={stop.arrival_offset_minutes}\n                              onChange={(e) => handleStopChange(index, 'arrival_offset_minutes', parseInt(e.target.value))}\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                              disabled={stop.is_origin} // 起点的到达时间偏移固定为0\n                            />\n                            {stop.is_origin && (\n                              <p className=\"text-xs text-gray-500 mt-1\">起点站的到达时间偏移固定为0</p>\n                            )}\n                          </div>\n                          \n                          <div>\n                            <label className=\"block text-xs text-gray-700 mb-1\">\n                              出发时间偏移（分钟）\n                            </label>\n                            <input\n                              type=\"number\"\n                              min=\"0\"\n                              value={stop.departure_offset_minutes}\n                              onChange={(e) => handleStopChange(index, 'departure_offset_minutes', parseInt(e.target.value))}\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                            />\n                          </div>\n                        </div>\n                        \n                        <div className=\"flex space-x-4 mt-2\">\n                          <div className=\"flex items-center\">\n                            <input\n                              type=\"checkbox\"\n                              id={`is_origin_${index}`}\n                              checked={stop.is_origin}\n                              onChange={(e) => handleStopChange(index, 'is_origin', e.target.checked)}\n                              className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                            />\n                            <label htmlFor={`is_origin_${index}`} className=\"ml-2 block text-sm text-gray-700\">\n                              设为起点\n                            </label>\n                          </div>\n                          \n                          <div className=\"flex items-center\">\n                            <input\n                              type=\"checkbox\"\n                              id={`is_destination_${index}`}\n                              checked={stop.is_destination}\n                              onChange={(e) => handleStopChange(index, 'is_destination', e.target.checked)}\n                              className=\"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded\"\n                            />\n                            <label htmlFor={`is_destination_${index}`} className=\"ml-2 block text-sm text-gray-700\">\n                              设为终点\n                            </label>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n                \n                {createForm.stops.length > 0 && (\n                  <div className=\"mt-2 text-right\">\n                    <button \n                      type=\"button\" \n                      className=\"text-sm text-blue-600 hover:text-blue-800 flex items-center ml-auto\"\n                      onClick={handleAddStop}\n                    >\n                      <Plus className=\"w-4 h-4 mr-1\" />\n                      添加更多站点\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"flex space-x-3 mt-6\">\n              <button \n                className=\"btn-primary flex-1\"\n                onClick={handleCreateRoute}\n                disabled={loading || createForm.stops.length < 2}\n              >\n                {loading ? '创建中...' : '创建路线'}\n              </button>\n              <button \n                className=\"btn-secondary flex-1\"\n                onClick={() => setShowCreateModal(false)}\n                disabled={loading}\n              >\n                取消\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdminDashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}