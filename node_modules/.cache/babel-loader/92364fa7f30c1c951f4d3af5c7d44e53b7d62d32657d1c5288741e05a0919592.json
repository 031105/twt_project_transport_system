{"ast":null,"code":"import _objectSpread from\"/Users/gohshunda/TWT-Transport-Booking/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{MapPin,Plus,X,ArrowRight,Save,Edit,Trash}from'lucide-react';import{getAllLocations,createRoute,getAllRoutes}from'../../services/adminApi';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RouteSelector=_ref=>{let{value,onChange,className}=_ref;const[routes,setRoutes]=useState([]);const[locations,setLocations]=useState([]);const[loading,setLoading]=useState(false);const[showCreateModal,setShowCreateModal]=useState(false);const[formData,setFormData]=useState({name:'',basePrice:'',routeType:'standard',stops:[{locationId:'',isOrigin:true,isDestination:false,arrivalOffsetMinutes:0,departureOffsetMinutes:10,priceFromOrigin:0},{locationId:'',isOrigin:false,isDestination:true,arrivalOffsetMinutes:120,departureOffsetMinutes:0,priceFromOrigin:0}]});// 加载所有路线和站点\nconst loadData=async()=>{setLoading(true);try{const[routesResponse,locationsResponse]=await Promise.all([getAllRoutes(),getAllLocations()]);if(routesResponse.success){setRoutes(routesResponse.data);}if(locationsResponse.success){setLocations(locationsResponse.data);}}catch(error){console.error('Error loading data:',error);}finally{setLoading(false);}};// 初始化加载\nuseEffect(()=>{loadData();},[]);// 处理站点变更\nconst handleStopChange=(index,field,value)=>{setFormData(prev=>{const newStops=[...prev.stops];newStops[index]=_objectSpread(_objectSpread({},newStops[index]),{},{[field]:value});// 如果设置为起点，其他站点不能是起点\nif(field==='isOrigin'&&value===true){newStops.forEach((stop,i)=>{if(i!==index){newStops[i]=_objectSpread(_objectSpread({},newStops[i]),{},{isOrigin:false});}});}// 如果设置为终点，其他站点不能是终点\nif(field==='isDestination'&&value===true){newStops.forEach((stop,i)=>{if(i!==index){newStops[i]=_objectSpread(_objectSpread({},newStops[i]),{},{isDestination:false});}});}return _objectSpread(_objectSpread({},prev),{},{stops:newStops});});};// 添加新站点\nconst addStop=()=>{setFormData(prev=>{const newStops=[...prev.stops];// 在倒数第二个位置添加新站点（在终点站之前）\nconst lastIndex=newStops.length-1;const newStop={locationId:'',isOrigin:false,isDestination:false,arrivalOffsetMinutes:newStops[lastIndex].arrivalOffsetMinutes-30,departureOffsetMinutes:newStops[lastIndex].arrivalOffsetMinutes-20,priceFromOrigin:0};newStops.splice(lastIndex,0,newStop);return _objectSpread(_objectSpread({},prev),{},{stops:newStops});});};// 删除站点\nconst removeStop=index=>{setFormData(prev=>{const newStops=[...prev.stops];// 不能删除起点或终点\nif(newStops[index].isOrigin||newStops[index].isDestination){alert('Cannot remove origin or destination stops');return prev;}// 需要至少保留两个站点（起点和终点）\nif(newStops.length<=2){alert('Route must have at least two stops');return prev;}newStops.splice(index,1);return _objectSpread(_objectSpread({},prev),{},{stops:newStops});});};// 生成路线名称\nconst generateRouteName=()=>{const originStop=formData.stops.find(stop=>stop.isOrigin);const destinationStop=formData.stops.find(stop=>stop.isDestination);if(!originStop||!destinationStop||!originStop.locationId||!destinationStop.locationId){return'';}const originLocation=locations.find(loc=>loc.id===originStop.locationId);const destinationLocation=locations.find(loc=>loc.id===destinationStop.locationId);if(!originLocation||!destinationLocation){return'';}return\"\".concat(originLocation.name,\" to \").concat(destinationLocation.name);};// 创建路线\nconst handleCreateRoute=async()=>{// 基本验证\nif(!formData.basePrice){alert('Please enter a base price');return;}const originStop=formData.stops.find(stop=>stop.isOrigin);const destinationStop=formData.stops.find(stop=>stop.isDestination);if(!originStop||!destinationStop||!originStop.locationId||!destinationStop.locationId){alert('Please select origin and destination locations');return;}// 自动生成路线名称\nif(!formData.name){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{name:generateRouteName()}));}// 准备API数据\nconst routeData={name:formData.name||generateRouteName(),basePrice:parseFloat(formData.basePrice),routeType:formData.routeType,originId:originStop.locationId,destinationId:destinationStop.locationId,intermediateStops:formData.stops.filter(stop=>!stop.isOrigin&&!stop.isDestination).map((stop,index)=>({locationId:stop.locationId,stopOrder:index+1,arrivalOffsetMinutes:stop.arrivalOffsetMinutes,departureOffsetMinutes:stop.departureOffsetMinutes,priceFromOrigin:parseFloat(stop.priceFromOrigin||0),boardingAllowed:true,alightingAllowed:true}))};setLoading(true);try{const response=await createRoute(routeData);if(response.success){alert('Route created successfully');setShowCreateModal(false);await loadData();// 选择新创建的路线\nif(response.data&&response.data.id){onChange(response.data.id);}}else{alert('Failed to create route: '+(response.error||'Unknown error'));}}catch(error){console.error('Error creating route:',error);alert('An error occurred while creating the route');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:className,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"select\",{value:value||'',onChange:e=>onChange(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",disabled:loading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a route\"}),routes.filter(route=>route&&route.id).map(route=>{var _route$originLocation,_route$destinationLoc;return/*#__PURE__*/_jsxs(\"option\",{value:route.id,children:[route.name,\" (\",((_route$originLocation=route.originLocation)===null||_route$originLocation===void 0?void 0:_route$originLocation.name)||'Unknown',\" \\u2192 \",((_route$destinationLoc=route.destinationLocation)===null||_route$destinationLoc===void 0?void 0:_route$destinationLoc.name)||'Unknown',\")\"]},route.id);})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowCreateModal(true),className:\"ml-2 p-2 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 focus:outline-none\",title:\"Create new route\",children:/*#__PURE__*/_jsx(Plus,{size:20})})]}),showCreateModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"Create New Route\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreateModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{size:20})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Route Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.name,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:generateRouteName()||\"Enter route name or leave blank for auto-generation\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Base Price (RM) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:formData.basePrice,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{basePrice:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g. 45.00\",required:true,min:\"0\",step:\"0.01\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Route Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.routeType,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{routeType:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"standard\",children:\"Standard\"}),/*#__PURE__*/_jsx(\"option\",{value:\"express\",children:\"Express\"}),/*#__PURE__*/_jsx(\"option\",{value:\"shuttle\",children:\"Shuttle\"}),/*#__PURE__*/_jsx(\"option\",{value:\"premium\",children:\"Premium\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Stops\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:addStop,className:\"text-blue-600 hover:text-blue-800 text-sm flex items-center\",children:[/*#__PURE__*/_jsx(Plus,{size:16,className:\"mr-1\"}),\" Add Intermediate Stop\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-[40vh] overflow-y-auto p-2 border border-gray-200 rounded-md\",children:formData.stops.map((stop,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-gray-50 rounded-md border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[stop.isOrigin&&/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-md mr-2\",children:\"Origin\"}),stop.isDestination&&/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-md mr-2\",children:\"Destination\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"Stop \",index+1]})]}),!stop.isOrigin&&!stop.isDestination&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeStop(index),className:\"text-red-500 hover:text-red-700\",children:/*#__PURE__*/_jsx(Trash,{size:16})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-medium text-gray-700 mb-1\",children:\"Location *\"}),/*#__PURE__*/_jsxs(\"select\",{value:stop.locationId,onChange:e=>handleStopChange(index,'locationId',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select location\"}),locations.map(location=>/*#__PURE__*/_jsxs(\"option\",{value:location.id,children:[location.name,\", \",location.city]},location.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-medium text-gray-700 mb-1\",children:\"Arrival (minutes)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:stop.arrivalOffsetMinutes,onChange:e=>handleStopChange(index,'arrivalOffsetMinutes',parseInt(e.target.value,10)),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\",min:\"0\",disabled:stop.isOrigin})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-medium text-gray-700 mb-1\",children:\"Departure (minutes)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:stop.departureOffsetMinutes,onChange:e=>handleStopChange(index,'departureOffsetMinutes',parseInt(e.target.value,10)),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\",min:\"0\",disabled:stop.isDestination})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-medium text-gray-700 mb-1\",children:\"Price from Origin (RM)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:stop.priceFromOrigin,onChange:e=>handleStopChange(index,'priceFromOrigin',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\",min:\"0\",step:\"0.01\",disabled:stop.isOrigin})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"origin-\".concat(index),checked:stop.isOrigin,onChange:e=>handleStopChange(index,'isOrigin',e.target.checked),className:\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"origin-\".concat(index),className:\"ml-2 text-xs text-gray-700\",children:\"Is Origin\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"destination-\".concat(index),checked:stop.isDestination,onChange:e=>handleStopChange(index,'isDestination',e.target.checked),className:\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"destination-\".concat(index),className:\"ml-2 text-xs text-gray-700\",children:\"Is Destination\"})]})]})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4 border-t\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowCreateModal(false),className:\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none\",disabled:loading,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCreateRoute,className:\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none flex items-center\",disabled:loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"}),\"Creating...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Save,{size:18,className:\"mr-2\"}),\"Create Route\"]})})]})]})]})})]});};export default RouteSelector;","map":{"version":3,"names":["React","useState","useEffect","MapPin","Plus","X","ArrowRight","Save","Edit","Trash","getAllLocations","createRoute","getAllRoutes","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RouteSelector","_ref","value","onChange","className","routes","setRoutes","locations","setLocations","loading","setLoading","showCreateModal","setShowCreateModal","formData","setFormData","name","basePrice","routeType","stops","locationId","isOrigin","isDestination","arrivalOffsetMinutes","departureOffsetMinutes","priceFromOrigin","loadData","routesResponse","locationsResponse","Promise","all","success","data","error","console","handleStopChange","index","field","prev","newStops","_objectSpread","forEach","stop","i","addStop","lastIndex","length","newStop","splice","removeStop","alert","generateRouteName","originStop","find","destinationStop","originLocation","loc","id","destinationLocation","concat","handleCreateRoute","routeData","parseFloat","originId","destinationId","intermediateStops","filter","map","stopOrder","boardingAllowed","alightingAllowed","response","children","e","target","disabled","route","_route$originLocation","_route$destinationLoc","type","onClick","title","size","placeholder","required","min","step","location","city","parseInt","checked","htmlFor"],"sources":["/Users/gohshunda/TWT-Transport-Booking/src/components/admin/RouteSelector.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  MapPin, \n  Plus, \n  X, \n  ArrowRight,\n  Save,\n  Edit,\n  Trash\n} from 'lucide-react';\nimport { \n  getAllLocations, \n  createRoute,\n  getAllRoutes\n} from '../../services/adminApi';\n\nconst RouteSelector = ({ value, onChange, className }) => {\n  const [routes, setRoutes] = useState([]);\n  const [locations, setLocations] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [formData, setFormData] = useState({\n    name: '',\n    basePrice: '',\n    routeType: 'standard',\n    stops: [\n      {\n        locationId: '',\n        isOrigin: true,\n        isDestination: false,\n        arrivalOffsetMinutes: 0,\n        departureOffsetMinutes: 10,\n        priceFromOrigin: 0\n      },\n      {\n        locationId: '',\n        isOrigin: false,\n        isDestination: true,\n        arrivalOffsetMinutes: 120,\n        departureOffsetMinutes: 0,\n        priceFromOrigin: 0\n      }\n    ]\n  });\n\n  // 加载所有路线和站点\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      const [routesResponse, locationsResponse] = await Promise.all([\n        getAllRoutes(),\n        getAllLocations()\n      ]);\n      \n      if (routesResponse.success) {\n        setRoutes(routesResponse.data);\n      }\n      \n      if (locationsResponse.success) {\n        setLocations(locationsResponse.data);\n      }\n    } catch (error) {\n      console.error('Error loading data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 初始化加载\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  // 处理站点变更\n  const handleStopChange = (index, field, value) => {\n    setFormData(prev => {\n      const newStops = [...prev.stops];\n      newStops[index] = { ...newStops[index], [field]: value };\n      \n      // 如果设置为起点，其他站点不能是起点\n      if (field === 'isOrigin' && value === true) {\n        newStops.forEach((stop, i) => {\n          if (i !== index) {\n            newStops[i] = { ...newStops[i], isOrigin: false };\n          }\n        });\n      }\n      \n      // 如果设置为终点，其他站点不能是终点\n      if (field === 'isDestination' && value === true) {\n        newStops.forEach((stop, i) => {\n          if (i !== index) {\n            newStops[i] = { ...newStops[i], isDestination: false };\n          }\n        });\n      }\n      \n      return { ...prev, stops: newStops };\n    });\n  };\n\n  // 添加新站点\n  const addStop = () => {\n    setFormData(prev => {\n      const newStops = [...prev.stops];\n      // 在倒数第二个位置添加新站点（在终点站之前）\n      const lastIndex = newStops.length - 1;\n      const newStop = {\n        locationId: '',\n        isOrigin: false,\n        isDestination: false,\n        arrivalOffsetMinutes: newStops[lastIndex].arrivalOffsetMinutes - 30,\n        departureOffsetMinutes: newStops[lastIndex].arrivalOffsetMinutes - 20,\n        priceFromOrigin: 0\n      };\n      \n      newStops.splice(lastIndex, 0, newStop);\n      return { ...prev, stops: newStops };\n    });\n  };\n\n  // 删除站点\n  const removeStop = (index) => {\n    setFormData(prev => {\n      const newStops = [...prev.stops];\n      // 不能删除起点或终点\n      if (newStops[index].isOrigin || newStops[index].isDestination) {\n        alert('Cannot remove origin or destination stops');\n        return prev;\n      }\n      \n      // 需要至少保留两个站点（起点和终点）\n      if (newStops.length <= 2) {\n        alert('Route must have at least two stops');\n        return prev;\n      }\n      \n      newStops.splice(index, 1);\n      return { ...prev, stops: newStops };\n    });\n  };\n\n  // 生成路线名称\n  const generateRouteName = () => {\n    const originStop = formData.stops.find(stop => stop.isOrigin);\n    const destinationStop = formData.stops.find(stop => stop.isDestination);\n    \n    if (!originStop || !destinationStop || !originStop.locationId || !destinationStop.locationId) {\n      return '';\n    }\n    \n    const originLocation = locations.find(loc => loc.id === originStop.locationId);\n    const destinationLocation = locations.find(loc => loc.id === destinationStop.locationId);\n    \n    if (!originLocation || !destinationLocation) {\n      return '';\n    }\n    \n    return `${originLocation.name} to ${destinationLocation.name}`;\n  };\n\n  // 创建路线\n  const handleCreateRoute = async () => {\n    // 基本验证\n    if (!formData.basePrice) {\n      alert('Please enter a base price');\n      return;\n    }\n    \n    const originStop = formData.stops.find(stop => stop.isOrigin);\n    const destinationStop = formData.stops.find(stop => stop.isDestination);\n    \n    if (!originStop || !destinationStop || !originStop.locationId || !destinationStop.locationId) {\n      alert('Please select origin and destination locations');\n      return;\n    }\n    \n    // 自动生成路线名称\n    if (!formData.name) {\n      setFormData(prev => ({ ...prev, name: generateRouteName() }));\n    }\n    \n    // 准备API数据\n    const routeData = {\n      name: formData.name || generateRouteName(),\n      basePrice: parseFloat(formData.basePrice),\n      routeType: formData.routeType,\n      originId: originStop.locationId,\n      destinationId: destinationStop.locationId,\n      intermediateStops: formData.stops\n        .filter(stop => !stop.isOrigin && !stop.isDestination)\n        .map((stop, index) => ({\n          locationId: stop.locationId,\n          stopOrder: index + 1,\n          arrivalOffsetMinutes: stop.arrivalOffsetMinutes,\n          departureOffsetMinutes: stop.departureOffsetMinutes,\n          priceFromOrigin: parseFloat(stop.priceFromOrigin || 0),\n          boardingAllowed: true,\n          alightingAllowed: true\n        }))\n    };\n    \n    setLoading(true);\n    try {\n      const response = await createRoute(routeData);\n      if (response.success) {\n        alert('Route created successfully');\n        setShowCreateModal(false);\n        await loadData();\n        \n        // 选择新创建的路线\n        if (response.data && response.data.id) {\n          onChange(response.data.id);\n        }\n      } else {\n        alert('Failed to create route: ' + (response.error || 'Unknown error'));\n      }\n    } catch (error) {\n      console.error('Error creating route:', error);\n      alert('An error occurred while creating the route');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className={className}>\n      <div className=\"flex items-center\">\n        <select\n          value={value || ''}\n          onChange={(e) => onChange(e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          disabled={loading}\n        >\n          <option value=\"\">Select a route</option>\n          {routes.filter(route => route && route.id).map(route => (\n            <option key={route.id} value={route.id}>\n              {route.name} ({route.originLocation?.name || 'Unknown'} → {route.destinationLocation?.name || 'Unknown'})\n            </option>\n          ))}\n        </select>\n        \n        <button\n          type=\"button\"\n          onClick={() => setShowCreateModal(true)}\n          className=\"ml-2 p-2 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 focus:outline-none\"\n          title=\"Create new route\"\n        >\n          <Plus size={20} />\n        </button>\n      </div>\n\n      {/* Create Route Modal */}\n      {showCreateModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold\">Create New Route</h3>\n              <button \n                onClick={() => setShowCreateModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X size={20} />\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              {/* Route Name and Price */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Route Name\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={formData.name}\n                    onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder={generateRouteName() || \"Enter route name or leave blank for auto-generation\"}\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Base Price (RM) *\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={formData.basePrice}\n                    onChange={(e) => setFormData(prev => ({ ...prev, basePrice: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"e.g. 45.00\"\n                    required\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n              </div>\n\n              {/* Route Type */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Route Type\n                </label>\n                <select\n                  value={formData.routeType}\n                  onChange={(e) => setFormData(prev => ({ ...prev, routeType: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"standard\">Standard</option>\n                  <option value=\"express\">Express</option>\n                  <option value=\"shuttle\">Shuttle</option>\n                  <option value=\"premium\">Premium</option>\n                </select>\n              </div>\n\n              {/* Stops */}\n              <div>\n                <div className=\"flex justify-between items-center mb-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Stops\n                  </label>\n                  <button\n                    type=\"button\"\n                    onClick={addStop}\n                    className=\"text-blue-600 hover:text-blue-800 text-sm flex items-center\"\n                  >\n                    <Plus size={16} className=\"mr-1\" /> Add Intermediate Stop\n                  </button>\n                </div>\n\n                <div className=\"space-y-3 max-h-[40vh] overflow-y-auto p-2 border border-gray-200 rounded-md\">\n                  {formData.stops.map((stop, index) => (\n                    <div key={index} className=\"p-3 bg-gray-50 rounded-md border border-gray-200\">\n                      <div className=\"flex justify-between items-center mb-2\">\n                        <div className=\"flex items-center\">\n                          {stop.isOrigin && (\n                            <span className=\"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-md mr-2\">Origin</span>\n                          )}\n                          {stop.isDestination && (\n                            <span className=\"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-md mr-2\">Destination</span>\n                          )}\n                          <span className=\"font-medium\">Stop {index + 1}</span>\n                        </div>\n                        {!stop.isOrigin && !stop.isDestination && (\n                          <button\n                            type=\"button\"\n                            onClick={() => removeStop(index)}\n                            className=\"text-red-500 hover:text-red-700\"\n                          >\n                            <Trash size={16} />\n                          </button>\n                        )}\n                      </div>\n\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                        <div>\n                          <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                            Location *\n                          </label>\n                          <select\n                            value={stop.locationId}\n                            onChange={(e) => handleStopChange(index, 'locationId', e.target.value)}\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                            required\n                          >\n                            <option value=\"\">Select location</option>\n                            {locations.map(location => (\n                              <option key={location.id} value={location.id}>\n                                {location.name}, {location.city}\n                              </option>\n                            ))}\n                          </select>\n                        </div>\n\n                        <div className=\"grid grid-cols-2 gap-2\">\n                          <div>\n                            <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                              Arrival (minutes)\n                            </label>\n                            <input\n                              type=\"number\"\n                              value={stop.arrivalOffsetMinutes}\n                              onChange={(e) => handleStopChange(index, 'arrivalOffsetMinutes', parseInt(e.target.value, 10))}\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                              min=\"0\"\n                              disabled={stop.isOrigin}\n                            />\n                          </div>\n                          <div>\n                            <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                              Departure (minutes)\n                            </label>\n                            <input\n                              type=\"number\"\n                              value={stop.departureOffsetMinutes}\n                              onChange={(e) => handleStopChange(index, 'departureOffsetMinutes', parseInt(e.target.value, 10))}\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                              min=\"0\"\n                              disabled={stop.isDestination}\n                            />\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"mt-2\">\n                        <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                          Price from Origin (RM)\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={stop.priceFromOrigin}\n                          onChange={(e) => handleStopChange(index, 'priceFromOrigin', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                          min=\"0\"\n                          step=\"0.01\"\n                          disabled={stop.isOrigin}\n                        />\n                      </div>\n\n                      <div className=\"mt-2 flex items-center space-x-4\">\n                        <div className=\"flex items-center\">\n                          <input\n                            type=\"checkbox\"\n                            id={`origin-${index}`}\n                            checked={stop.isOrigin}\n                            onChange={(e) => handleStopChange(index, 'isOrigin', e.target.checked)}\n                            className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                          />\n                          <label htmlFor={`origin-${index}`} className=\"ml-2 text-xs text-gray-700\">\n                            Is Origin\n                          </label>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <input\n                            type=\"checkbox\"\n                            id={`destination-${index}`}\n                            checked={stop.isDestination}\n                            onChange={(e) => handleStopChange(index, 'isDestination', e.target.checked)}\n                            className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                          />\n                          <label htmlFor={`destination-${index}`} className=\"ml-2 text-xs text-gray-700\">\n                            Is Destination\n                          </label>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowCreateModal(false)}\n                  className=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none\"\n                  disabled={loading}\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleCreateRoute}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none flex items-center\"\n                  disabled={loading}\n                >\n                  {loading ? (\n                    <>\n                      <span className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></span>\n                      Creating...\n                    </>\n                  ) : (\n                    <>\n                      <Save size={18} className=\"mr-2\" />\n                      Create Route\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default RouteSelector; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}